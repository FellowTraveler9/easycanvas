!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(n){var i={};function o(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=n,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=68)}([function(t,e,n){"use strict";var i={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},funcOrValue:function(t,e){return"function"==typeof t?t.call(e):t},execFuncs:function(t,e,n){t&&(i.isArray(n)||(n=[n])),"function"==typeof t?t.apply(e,n):i.isArray(t)&&t.length&&t.forEach(function(t){t&&t.apply(e,n)})},blend:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],pointInRect:function(t,e,n,i,o,r){return!(t<n||i<t||e<o||r<e)},firstValuable:function(t,e,n){return void 0===t?void 0===e?n:e:t}};t.exports=i},function(t,e,n){"use strict";var i=["cutLeft","cutTop","cutWidth","cutHeight"],o=["left","top","width","height"],r=i.concat(o),l=r.concat(["locate","rx","ry","zIndex","fontSize","fontFamily","textAlign","textVerticalAlign","color","rotate","scale","opacity","backgroundColor","border","overflow","overflowX","overflowY"]);t.exports={txywh:o,sxywh:i,xywh:r,styles:l,devFlag:"__EASYCANVAS_DEVTOOL__",version:"0.8.0"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i="undefined"!=typeof window;e.default=function(e,t){i&&window.Easycanvas&&(Easycanvas.class[t]=function(t){return e(Easycanvas.sprite,t)})}},function(t,e,n){"use strict";function h(t){return t.$lastPaintTime||Date.now()}function l(t,e,n,i,o){var r=(0,a.funcOrValue)(t[e]);r=r||0,t[e]=s[n].bind(l)(r,i,o)}var a=n(0),d=Math.PI,s={linear:function(n,i,o){var r,l=h(this),a=!1,s=function(){var t=(this.$lastPaintTime-l)/o,e=(i-n)*t+n;if(a)if(n<i)for(;i<e;)e-=i-n;else for(;e<i;)e+=n-i;else n<i&&i<e?(s.$done=!0,e=i):i<n&&e<i&&(s.$done=!0,e=i);return 1<=t&&r&&(r.call(this,e),r=null),e}.bind(this);return s.loop=function(){return a=!0,s},s.restart=function(){return l=h(this),s},s.then=function(t){return r=t,s},s},pendulum:function(i,o,r,t){var l=h(this),a=t||{};a.start=a.start||0;var s,c=!1,u=a.cycle||1,f=function(){var t=(h(this)-l)/r;c?u&&(t%=u):u?u<t&&(t=u,f.$done=!0,t=u):1<t&&(f.$done=!0,t=1);var e=t*d*2-d/2+a.start/360*d,n=(o-i)*(Math.sin(e)+1)/2+i;return u<=t&&s&&(s.call(this,n),s=null),n}.bind(this);return f.loop=function(){return c=!0,f},f.restart=function(){return l=h(this),f},f.then=function(t){return s=t,f},f},ease:function(t,e,n){return this.pendulum(t,e,2*n,{cycle:.5})},oneByOne:function(t){function e(){for(var t=0;t<n.length;t++){if(!n[t].$done)return n[t]();if(!n[t].$nextRestart&&(n[t].$nextRestart=!0,n[t+1]))return n[t+1].restart(),n[t+1]()}if(i){for(var e=0;e<n.length;e++)n[e].$done=!1,n[e].$nextRestart=!1,n[e].restart();return n[0]()}return n[n.length-1]()}var n=t,i=!1;return e.loop=function(){return i=!0,e},e}};for(var i in s)l[i]=s[i];t.exports=l},function(t,e,n){"use strict";t.exports=function(t,e,n,i,o,r){var l=o?-o/180*3.141593:0,a=t,s=e;return o&&(a=(t-n)*Math.cos(l)-(e-i)*Math.sin(l)+n,s=(t-n)*Math.sin(l)+(e-i)*Math.cos(l)+i),r?[a,s]:{x:a,y:s}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function i(t,e){var n,i=String(t),o=i+JSON.stringify(e);if(e.fontSize=e.fontSize||16,k[o])return k[o];e.padding?((n=(n=e.padding.split(" ")).map(function(t){return parseInt(t)}))[1]=Number(n[1]||n[0]),n[2]=Number(n[2]||n[0]),n[3]=Number(n[3]||n[1])):n=[0,0,0,0];var r=e.minWidth||e.width||(e.fontSize||16)*i.length+n[1]+n[3]+100,l=i.split("\n").length,a=e.fontSize*(Math.round(i.length)/r+l-1)*(e.lineHeight||e.fontSize)+n[0]+n[2]+100,s=document.createElement("canvas");s.width=r,s.height=a;var c=s.getContext("2d");window.tempCanvas=s,(window.tempCtx=c).textBaseline="middle",c.font=(e.fontStyle?e.fontStyle+" ":"")+e.fontSize+"px "+(e.family||"serif"),c.fillStyle=e.color||"#000",c.textAlign=e.textAlign||"left";for(var u=e.lineHeight?(e.lineHeight-e.fontSize)/2:0,f=0,h=1,d=0,p=0,g=1;;)if((p=c.measureText(i.slice(f,h)).width)>e.width){if("ellipsis"===e.textOverflow){h-=2,c.fillText(i.slice(f,h)+"...",0,u+e.fontSize/2),u+=e.fontSize+(e.lineHeight?(e.lineHeight-e.fontSize)/2:0),g++,d=e.width-n[1]-n[3];break}h-=1,c.fillText(i.slice(f,h),0,u+e.fontSize/2),h=(f=h)+1,u+=e.fontSize+(e.lineHeight?(e.lineHeight-e.fontSize)/2:10),g++}else{if(h>i.length-1){d<p&&(d=p),c.fillText(i.slice(f,h),0,u+e.fontSize/2),u+=e.fontSize+(e.lineHeight?(e.lineHeight-e.fontSize)/2:0);break}i.slice(h,h+1)===P&&(c.fillText(i.slice(f,h),0,u+e.fontSize/2),h=(f=h+=1)+1,u+=e.fontSize+(e.lineHeight?(e.lineHeight-e.fontSize)/2:10),g++),d<p&&(d=p),h++}var v=document.createElement("canvas");v.lastLineLeft=p,v.lineCount=g,v.width=Math.max(d+n[1]+n[3],e.minWidth||0),v.height=u+n[0]+n[2];var m=v.getContext("2d");if(e.backgroundColor&&(m.fillStyle=e.backgroundColor,m.fillRect(0,0,v.width,v.height)),m.drawImage(s,(v.width-d)/2,n[0]),e.border){var y=e.border.split(" "),$=y.pop();"solid"===y[y.length-1]&&y.pop();var b=y[0],x=y[1]||b,w=y[2]||b,O=y[3]||x||b;b=parseInt(b),x=parseInt(x),w=parseInt(w),O=parseInt(O);var S=e.borderRadius||0;if(m.beginPath(),m.strokeStyle=$,b&&(m.lineWidth=b,m.moveTo(O?S:0,0),m.lineTo(v.width-(x?S:0),0)),x&&(m.lineWidth=x,m.moveTo(v.width,b?S:0),m.lineTo(v.width,v.height-(w?S:0))),w&&(m.lineWidth=w,m.moveTo(O?S:0,v.height),m.lineTo(v.width-(x?S:0),v.height)),O&&(m.lineWidth=O,m.moveTo(0,b?S:0),m.lineTo(0,v.height-(w?S:0))),m.stroke(),S){var T=document.createElement("canvas"),M=Math.min(v.width,v.height);T.width=T.height=M;var _=T.getContext("2d");_.beginPath(),_.strokeStyle=$,_.arc(M>>1,M>>1,(M>>1)-1,0,2*Math.PI),_.stroke(),b&&x&&m.drawImage(T,M>>1,0,M>>1,M>>1,v.width-S,0,S,S),w&&x&&m.drawImage(T,M>>1,M>>1,M>>1,M>>1,v.width-S,v.height-S,S,S),b&&O&&m.drawImage(T,0,0,M>>1,M>>1,0,0,S,S),w&&O&&m.drawImage(T,0,M>>1,M>>1,M>>1,0,v.height-S,S,S)}}return k[o]=v}var k={},P="\n".slice(0,1);e.default=i},function(t,e,n){"use strict";var l=v(n(0)),a=v(n(1)),i=v(n(33)),o=v(n(34)),r=v(n(10)),s=v(n(11)),c=v(n(35)),u=v(n(36)),f=v(n(37)),h=v(n(38)),d=v(n(39)),p=v(n(40)),g=v(n(41));function v(t){return t&&t.__esModule?t:{default:t}}function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(n){n.children&&n.children.forEach(function(t,e){t.$id||(n.children[e]=new $(t)),n.$id&&!n.$dom?(n.children[e].$canvas=n.$canvas,n.children[e].$parent=n):n.children[e].$canvas=n,y(n.children[e])})}var $=function(t){var e=function(t,n){var i=t||{};i.$id||(i.$id=Math.random().toString(36).substr(2)),i.$tickedTimes=i.$tickedTimes||0,i.content=i.content||{},i.style=i.style||{},i.style.scale=l.default.firstValuable(i.style.scale,1),i.style.opacity=l.default.firstValuable(i.style.opacity,1),i.style.zIndex=i.style.zIndex||0,i.style.locate=i.style.locate||"center";l.default.funcOrValue(i.content.img);return n.$cache={},n.$render={},n.$style={},n.$needUpdate={},i.hooks=i.hooks||{},a.default.styles.concat(["visible"]).forEach(function(e){n.$cache[e]=void 0,n.$style[e]=i.style[e],"function"==typeof i.style[e]&&(n.$style[e]=i.style[e].bind(n)),-1<a.default.xywh.indexOf(e)?n.$style[e]=n.$style[e]||0:-1<["opacity","scale"].indexOf(e)&&(n.$style[e]=l.default.firstValuable(n.$style[e],1)),n.$needUpdate[e]=1,Object.defineProperty(i.style,e,{get:function(){return n.$style[e]},set:function(t){n.$style[e]!==t&&(n.$style[e]=t,n.$needUpdate[e]=1)}})}),i.events=i.events||{},i.events.eIndex=i.events.eIndex,i.children=i.children||[],"string"==typeof i.children&&(i.content.text=i.children,i.children=[]),y(i),i.$styleCacheTime={},i}(t,this);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this[n]=e[n]);return function(e){var n=this;this.$extendList.forEach(function(t){t.call(n,e)})}.call(this,e),this};$.prototype.$extendList=[],$.prototype.add=function(t){if(t)return this.children.push(t),y(this),this.children[this.children.length-1]},$.prototype.getRect=function(t,e){var n=this,i={};if(a.default.txywh.forEach(function(t){i[t]=n.getStyle(t,e)}),0===i.width&&this.content.img&&!t){var o=l.default.funcOrValue(this.content.img,this);i.width=o.width,i.height=o.height}var r=this.getStyle("locate");return"lt"===r||("ld"===r?i.top-=i.height:"rt"===r?i.left-=i.width:"rd"===r?(i.left-=i.width,i.top-=i.height):(i.left-=i.width>>1,i.top-=i.height>>1)),i.right=this.$canvas.width-i.left-i.width,i.bottom=this.$canvas.height-i.top-i.height,i},$.prototype.getSelfStyle=function(t){var e={};if(t)return l.default.funcOrValue(this.style[t],this);for(var n in this.style)e[n]=l.default.funcOrValue(this.style[n],this);return e},$.prototype.getStyle=function(t,e){var n=this;if(e&&void 0!==n.$cache[t])return n.$cache[t];var i=l.default.funcOrValue(n.$style[t],n);if(n.$parent){var o=n.$parent.getStyle(t);if("left"===t||"top"===t)return(o=l.default.firstValuable(o,0))+l.default.firstValuable(i,0);if("scale"===t||"opacity"===t)return(o=l.default.firstValuable(o,1))*l.default.firstValuable(i,1);if("visible"===t)return!1!==o&&i}return i},$.prototype.remove=function(t){if(t)return this.$canvas.remove(t),void l.default.execFuncs(t.hooks.removed,t);this.$parent?this.$parent.remove(this):this.$canvas.remove(this),l.default.execFuncs(this.hooks.removed,this)},$.prototype.update=function(t){if(t){for(var e in t)if("object"===m(t[e]))for(var n in t[e])this[e]||(this[e]={}),this[e][n]=t[e][n];else this[e]=t[e];return this.recalculate(!0),this}},$.prototype.hide=function(){return this.style.display="none",this},$.prototype.show=function(){return this.style.display=void 0,this},$.prototype.getAllChildren=function(t){var e=t?[this]:[];return this.children.forEach(function(t){e=e.concat(t.getAllChildren(!0))}),e},$.prototype.getAllVisibleChildren=function(t){if(!1===l.default.funcOrValue(this.style.visible,this))return[];var e=t?[this]:[];return this.children.forEach(function(t){e=e.concat(t.getAllVisibleChildren(!0))}),e},$.prototype.getOuterRect=h.default,$.prototype.combine=d.default,$.prototype.uncombine=p.default,$.prototype.combineAsync=function(){return this.$combine||(this.$combine=9,this.off("ticked",this.combine),this.on("ticked",this.combine,100)),this},$.prototype.recalculate=g.default,$.prototype.refresh=function(){for(var t in $sprite.$style)$sprite.$cache[t]=$.get($sprite.$style[t],$sprite);return this},$.prototype.nextTick=s.default,$.prototype.on=i.default,$.prototype.off=o.default,$.prototype.clear=r.default,$.prototype.trigger=c.default,$.prototype.broadcast=u.default,$.prototype.distribute=f.default,t.exports=$},function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,r,e){var l=e||{},a=u.cacheCanvas;if("object"===o(t)){var n=t;return l.callbackArgs=l.callbackArgs||[],void u(n.shift(),function(t){l.callbackArgs.push(t),1<n.length?u(n,r,l):u(n[0],function(t){l.callbackArgs.push(t),r(l.callbackArgs)},l)},e)}var i=t+"_"+JSON.stringify(e)+"_"+a;if(f[i])return r?void(f[i].width&&r?r(f[i]):setTimeout(function(){u(t,r,e)},100)):f[i];var s,c=new d;return c._complete=!1,l.block?(c.src=t,p++):0===p?c.src=t:h.push({imgObj:c,src:t}),f[i]=c,(l.canvas||l.alphaColor||a)&&((s=document.createElement("canvas")).width=s.height||0,f[i]=s),c.onload=function(t){if(c._complete=!0,"jpg"===c.src.substr(-3)||"jpeg"===c.src.substr(-3)||"bmp"===c.src.substr(-3)?c.$noAlpha=!0:0===c.src.indexOf("data:image/jpg;")&&(c.$noAlpha=!0),l.block&&0===--p&&(h.forEach(function(t){t.imgObj.src=t.src}),h.splice(0)),s&&(l.canvas||l.alphaColor||a)){var e=s.getContext("2d");if(s.width=c.width,s.height=c.height,s.$noAlpha=c.$noAlpha,e.drawImage(c,0,0),l.alphaColor){for(var n=e.getImageData(0,0,c.width,c.height),i=0;i<n.data.length;i+=4){var o=n.data[i]+n.data[i+1]+n.data[i+2];n.data[i]<1&&n.data[i+1]<1&&n.data[i+2]<1&&(n.data[i+3]=Math.floor(o/255))}e.putImageData(n,0,0),s.$noAlpha=!1}c=s}r&&r(c)},c.onerror=function(){f[i]=c},s||c}var f={},h=[],d="undefined"!=typeof window&&Image,p=0;u.cacheCanvas=!1,t.exports=u},function(t,e,n){"use strict";i(n(4));var f=i(n(19));function i(t){return t&&t.__esModule?t:{default:t}}t.exports=function(t,e,n,i,o,r,l,a,s,c,u){if(!u){if(r+a<e)return!1;if(e+i<r)return!1;if(o+l<t)return!1;if(t+n<o)return!1}return!!((0,f.default)(t,e,o,r,l,a,s,c,u)||(0,f.default)(t+n,e,o,r,l,a,s,c,u)||(0,f.default)(t,e+i,o,r,l,a,s,c,u)||(0,f.default)(t+n,e+i,o,r,l,a,s,c,u))||(!!((0,f.default)(o,r,t,e,n,i,s,c,-u)||(0,f.default)(o+l,r,t,e,n,i,s,c,-u)||(0,f.default)(o,r+a,t,e,n,i,s,c,-u)||(0,f.default)(o+l,r+a,t,e,n,i,s,c,-u))||(r<e&&e+i<r+a&&t<o&&o+l<t+n||o<t&&t+n<o+l&&e<r&&r+a<e+i))}},function(t,e,n){"use strict";function i(t){setTimeout(t,1e3/60)}var o="undefined"!=typeof requestAnimationFrame&&(requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame)||i;t.exports=o},function(t,e,n){"use strict";t.exports=function(){this.children.forEach(function(t){t.remove()}),this.children=[]}},function(t,e,n){"use strict";t.exports=function(e){this.on("ticked",function t(){e.apply(this,arguments),this.off("ticked",t)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(5)),o=r(n(2));function r(t){return t&&t.__esModule?t:{default:t}}function l(t,e){t.buttonStyleNormal=Object.assign(s,{minWidth:e.style.width,lineHeight:e.style.height,padding:0},e.props.normal),t.buttonStyleHovered=Object.assign({},t.buttonStyleNormal,e.props.hovered),t.buttonStylePressed=Object.assign({},t.buttonStyleNormal,e.props.pressed),t.imageNormal=(0,i.default)(e.props.text||"",t.buttonStyleNormal),t.imageHovered=e.props.hovered&&(0,i.default)(e.props.text||"",t.buttonStyleHovered),t.imagePressed=e.props.pressed&&(0,i.default)(e.props.text||"",t.buttonStylePressed)}function a(e,t){var n;e.props=e.props||{};var i={buttonStyleNormal:void 0,buttonStyleHovered:void 0,buttonStylePressed:void 0,imageNormal:void 0,imageHovered:void 0,imagePressed:void 0};l(i,e);var o={};return e.events=e.events||{},o.touchmove=o.mousemove=function(){n.content.img=i.imageHovered||i.imageNormal},o.touchstart=o.mousedown=function(){n.content.img=i.imagePressed||i.imageHovered||i.imageNormal},o.touchend=o.touchout=o.mouseout=function(){n.content.img=i.imageNormal},o.mouseup=function(){n.content.img=i.imageHovered||i.imageNormal},o.click=function(t){e.events.click&&e.events.click.call(n,t)},(n=new t({name:e.name||"button_"+e.props.text,content:{img:i.imageNormal},style:e.style,props:e.props,events:o,hooks:e.hooks})).update=function(t){this.__proto__.update.call(this,t),l(i,e),n.content.img=i.imageNormal},n}var s={padding:0,width:300,family:'"Helvetica Neue",Helvetica,Arial,sans-serif'};(0,o.default)(a,"button");var c=a;e.default=c},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function o(t,e){var n,i=t||{};return i.name=i.name||"Image",(n=new e(i)).content.img=i.src,Object.defineProperty(n,"src",{get:function(){return n.content.img?n.content.img.src:""},set:function(t){n.content.img=t}}),n}(0,((i=n(2))&&i.__esModule?i:{default:i}).default)(o,"image");var r=o;e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c,h=n(0),u=o(n(3)),i=o(n(2));function o(t){return t&&t.__esModule?t:{default:t}}function d(t,e){return Math.abs(t)<Math.abs(e)?t:e}function r(t,e){var o=!1,r=!1,n=t||{};function l(){o&&(a.scroll.scrollX=o()),r&&(a.scroll.scrollY=r()),o||r||a.off("ticked",l)}n.scroll=Object.assign({scrollX:0,scrollY:0,scrollableX:function(){return"visible"!==(this.style.overflowX||this.style.overflow)},scrollableY:function(){return"visible"!==(this.style.overflowY||this.style.overflow)},minScrollX:0,maxScrollX:function(){var n=this,i=0;return this.getChildren().forEach(function(t){var e=t.getSelfStyle("left")+t.getSelfStyle("width")-n.getStyle("width");i<e&&(i=e)}),i},minScrollY:0,maxScrollY:function(){var n=this,i=0;return this.getChildren().forEach(function(t){var e=t.getSelfStyle("top")+t.getSelfStyle("height")-n.getStyle("height");i<e&&(i=e)}),i},propagationX:!1,propagationY:!1},t.scroll);var i=!1;n.events=Object.assign({touchstart:function(t){f(this),c=!(i=!0),g(this,t),a.scroll.propagationX||a.scroll.propagationY||t.stopPropagation()},touchmove:function(t){if(i&&(!c||this===c)){var e=g(this,t);1===e&&a.scroll.propagationY?(t.stopPropagation(),c=this):2===e&&a.scroll.propagationX&&(t.stopPropagation(),c=this)}},mousewheel:function(t){i=!0,v(this,t),t.stopPropagation()},touchend:function(){i=!1,f(this)},mouseup:function(){i=!1,f(this)}},n.events||{}),n.scroll.capture&&(n.events.interceptor=function(t){return a.events[t.type]?(a.events[t.type].call(a,t),!1):t});var a=new e(n);a.on("ticked",function(){p(a)}),a.on("scrollTo",function(t,e,n){var i;return o=u.default.ease(a.scroll.scrollY,t,n||200,{cycle:.5}).then(function(){o=!1,i&&i(),i=!1}),r=u.default.ease(a.scroll.scrollY,e,n||200,{cycle:.5}).then(function(){r=!1,i&&i(),i=!1}),a.on("ticked",l),{then:function(t){i=t}}}),a.$scroll={speedX:0,speedY:0,touching:!1,startPos:{},lastTouchSpeed:0,lastScrollSpeed:0};var s=a.add({name:"scrolling-element",style:{left:function(){return-this.$parent.scroll.scrollX},top:function(){return-this.$parent.scroll.scrollY}}});return a.add=s.add.bind(s),a.clear=s.clear.bind(s),a.getChildren=function(){return s.children},a}var f=function(t){t.$scroll.touching=!1},p=function(t){if(t.$scroll&&t.$scroll.$scrolling){if(1<Math.abs(t.$scroll.speedX)?t.$scroll.speedX*=t.scroll.smooth||.8:t.$scroll.speedX=0,1<Math.abs(t.$scroll.speedY)?t.$scroll.speedY*=t.scroll.smooth||.8:t.$scroll.speedY=0,Math.abs(t.$scroll.speedX)<=1&&Math.abs(t.$scroll.speedY)<=1)return t.$scroll.$scrolling=!1,void(t.$scroll.$wheeling=!1);if(!t.$scroll.touching){if(t.scroll.scrollY-=t.$scroll.speedY,t.scroll.scrollX-=t.$scroll.speedX,!t.$scroll.touching&&!t.$scroll.$wheeling&&Math.abs(t.$scroll.speedY)<50&&t.scroll.anchors&&t.scroll.anchors.length)for(var e=t.scroll.anchorsRange||400,n=0;n<t.scroll.anchors.length;n++){var i=t.scroll.anchors[n],o=t.scroll.scrollY-i;if(0<o&&o<e&&0<t.$scroll.speedY||o<0&&-e<o&&t.$scroll.speedY<0){t.trigger("scrollTo",i,200),t.$scroll.speedY=0;break}}var r=(0,h.funcOrValue)(t.scroll.minScrollX,t),l=(0,h.funcOrValue)(t.scroll.maxScrollX,t),a=(0,h.funcOrValue)(t.scroll.minScrollY,t),s=(0,h.funcOrValue)(t.scroll.maxScrollY,t);!isNaN(a)&&t.scroll.scrollY<a?t.scroll.scrollY=a:!isNaN(s)&&t.scroll.scrollY>s&&(t.scroll.scrollY=s,t.broadcast("scrolledToBottom"),t.$scroll.speedY=0),!isNaN(r)&&t.scroll.scrollX<r?t.scroll.scrollX=r:!isNaN(l)&&t.scroll.scrollX>l&&(t.scroll.scrollX=l)}}},g=function(t,e){var n=Date.now();if(t.$scroll.$wheeling=!1,t.$scroll.touching){t.$scroll.$scrolling=!0;var i=t.$scroll.startPos.x-e.canvasX,o=t.$scroll.startPos.y-e.canvasY,r=n-t.$scroll.touching;t.$scroll.touching=n;var l=(0,h.funcOrValue)(t.scroll.minScrollX,t),a=(0,h.funcOrValue)(t.scroll.maxScrollX,t),s=(0,h.funcOrValue)(t.scroll.minScrollY,t),c=(0,h.funcOrValue)(t.scroll.maxScrollY,t);if((t.scroll.scrollX+i<l||t.scroll.scrollX+i>a)&&(t.scroll.flexible||t.scroll.flexibleX?i>>=3:i=0),(t.scroll.scrollY+o<s||t.scroll.scrollY+o>c)&&(t.scroll.flexible||t.scroll.flexibleY?o>>=3:o=0),(0,h.funcOrValue)(t.scroll.scrollableX,t)&&1<=Math.abs(i)&&1<r){var u=(e.canvasX-t.$scroll.startPos.x)/r*25;0<t.$scroll.lastScrollSpeed*u&&15<Math.abs(u)&&(u+=d(u,t.$scroll.lastScrollSpeed)),t.$scroll.speedX=(t.$scroll.lastTouchSpeed+u)/(t.$scroll.lastTouchSpeed?2:1),t.$scroll.lastTouchSpeed=u,t.scroll.scrollX+=i}if((0,h.funcOrValue)(t.scroll.scrollableY,t)&&1<=Math.abs(o)&&1<r){var f=(e.canvasY-t.$scroll.startPos.y)/r*25;0<t.$scroll.lastScrollSpeed*f&&15<Math.abs(f)&&(f+=d(f,t.$scroll.lastScrollSpeed)),t.$scroll.speedY=(t.$scroll.lastTouchSpeed+f)/(t.$scroll.lastTouchSpeed?2:1),t.$scroll.lastTouchSpeed=f,t.scroll.scrollY+=o}if(t.$scroll.startPos.x=e.canvasX,t.$scroll.startPos.y=e.canvasY,Math.abs(i)>Math.abs(o)+1)return 1;if(Math.abs(i)<Math.abs(o)-1)return 2}else t.$scroll.touching=n,t.$scroll.quickTouch=n,t.$scroll.lastTouchSpeed=0,t.$scroll.startPos.x=e.canvasX,t.$scroll.startPos.y=e.canvasY,t.$scroll.lastScrollSpeed=t.$scroll.speedX||t.$scroll.speedY,t.$scroll.speedX=0,t.$scroll.speedY=0},v=function(t,e){t.$scroll.speedX=(0,h.funcOrValue)(t.scroll.scrollableX,t)?e.event.wheelDeltaX:0,t.$scroll.speedY=(0,h.funcOrValue)(t.scroll.scrollableY,t)?e.event.wheelDeltaY:0,t.$scroll.$scrolling=!0,t.$scroll.$wheeling=!0,e.stopPropagation()};(0,i.default)(r,"scroll");var l=r;e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,a=n(0);function o(t,e){var n=new e(t);return t.props.index=t.props.index||0,n.on("beforeTick",function(){var t=this.props,e=(0,a.funcOrValue)(this.content.img,this);if(e&&e.width){var n,i,o=t.index||0;if(o<0&&(o=0),t.frameWidth||t.frameHeight){n=t.frameWidth<0?e.width/-t.frameWidth:t.frameWidth,i=t.frameHeight<0?e.height/-t.frameHeight:t.frameHeight;var r=Math.floor(e.width/n),l=Math.floor(e.height/i);this.style.cutLeft=o%r*n,this.style.cutTop=Math.floor(o/r)%l*i}!t.loop&&0<o&&0===this.style.cutLeft&&0===this.style.cutTop&&(this.style.img=void 0,t.onOver?t.onOver.call(this):this.remove()),t.lastFrameTime=t.lastFrameTime||0,this.$canvas.$nextTickTime-t.lastFrameTime>=(0,a.funcOrValue)(t.interval,this)&&(t.lastFrameTime=this.$canvas.$nextTickTime,t.index++),this.style.cutWidth=this.style.cutWidth||n,this.style.cutHeight=this.style.cutHeight||i,this.style.width=this.style.width||n,this.style.height=this.style.height||i}}),n}(0,((i=n(2))&&i.__esModule?i:{default:i}).default)(o,"sequence");var r=o;e.default=r},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function o(t,e){var n,i=t||{};return i.name=i.name||"Text",i.content=i.content||{},i.content.text=i.text,n=new e(i),Object.defineProperty(n,"text",{get:function(){return n.content.text||""},set:function(t){n.content.text=t}}),n}(0,((i=n(2))&&i.__esModule?i:{default:i}).default)(o,"text");var r=o;e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(2)),o=r(n(5));function r(t){return t&&t.__esModule?t:{default:t}}function l(t){t.content.img=t.text?(0,o.default)(t.text,Object.assign({},s,{lineHeight:t.style.fontSize,textAlign:"left"},t.style)):void 0}function a(t,e){var n;return t.name=t.name||"Text",n=new e(t),l(n),Object.defineProperty(n,"text",{get:function(){return n.content.text},set:function(t){n.content.img=text}}),n.update=function(t){this.__proto__.update.call(this,t),l(this)},n}var s={padding:0,width:300,lineHeight:100,family:'"Helvetica Neue",Helvetica,Arial,sans-serif'};(0,i.default)(a,"text");var c=a;e.default=c},function(t,e,n){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function o(t,e){var n=t||{};return n.name=n.name||"View",new e(n)}(0,((i=n(2))&&i.__esModule?i:{default:i}).default)(o,"view");var r=o;e.default=r},function(t,e,n){"use strict";var i;(i=n(4))&&i.__esModule;t.exports=function(t,e,n,i,o,r,l,a,s){var c=s?-s/180*3.141593:0;return c&&(e=((t=(t-l)*Math.cos(c)-(e-a)*Math.sin(c)+l)-l)*Math.sin(c)+(e-a)*Math.cos(c)+a),n<=t&&t<=n+o&&i<=e&&e<=i+r}},function(t,e,n){"use strict";var o="processing",r={};t.exports=function t(e,n){if(e&&e.match(/^data:/))n&&n(e);else if(r[e])r[e]!==o?n(r[e]):setTimeout(function(){t(e,n)},100);else{r[e]=o;var i=new XMLHttpRequest;i.onload=function(){var t=new FileReader;t.onloadend=function(){r[e]=t.result,n&&n(t.result)},t.readAsDataURL(i.response)},i.open("GET",e),i.responseType="blob",i.send()}}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Painter",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"tick",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"utils",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Transition",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"ImgLoader",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"imgPretreat",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"multlineText",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"sprite",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"extend",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"Button",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"Image",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"Scroll",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"Sequence",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"View",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"RichText",{enumerable:!0,get:function(){return y.default}}),e.default=e.use=e.Sprite=void 0;$(n(1));var i=$(n(23)),o=$(n(9)),r=$(n(0)),l=$(n(3)),a=$(n(7)),s=$(n(49)),c=$(n(50)),u=$(n(6)),f=$(n(51)),h=$(n(12)),d=$(n(13)),p=$(n(14)),g=$(n(15)),v=$(n(16)),m=$(n(18)),y=$(n(17));function $(t){return t&&t.__esModule?t:{default:t}}n(52);var b=u.default;e.Sprite=b;var x={Painter:i.default,ImgLoader:a.default,imgPretreat:s.default,multlineText:c.default,Transition:l.default,tick:o.default,utils:r.default,extend:f.default,class:{sprite:u.default},sprite:u.default,Sprite:b,Button:h.default,Image:d.default,Scroll:p.default,Sequence:g.default,Text:v.default,View:m.default,RichText:y.default},w=x.use=function(t){var e=x.Painter.prototype.$extendList;0<=e.indexOf(t)||(t.onUse&&t.onUse(x),e.push(t))};e.use=w,"undefined"!=typeof window&&(window.Easycanvas?console.warn("[Easycanvas] already loaded, it should be loaded only once."):window.Easycanvas=x);var O=x;e.default=O},function(t,e,n){"use strict";var i=a(n(24)),o=a(n(42)),r=a(n(48)),l=a(n(7));function a(t){return t&&t.__esModule?t:{default:t}}function s(t){for(var e in this.imgLoader=l.default,r.default)this[e]=this[e]||JSON.parse(JSON.stringify(r.default[e]));t&&(t.el||(t={el:t}),t.el&&this.register("string"==typeof t.el?document.querySelector(t.el):t.el,t))}for(var c in s.prototype.$extendList=[],o.default)Object.prototype.hasOwnProperty.call(o.default,c)&&(s.prototype[c]=o.default[c]);for(var u in i.default)Object.prototype.hasOwnProperty.call(i.default,u)&&(s.prototype[u]=i.default[u]);t.exports=s},function(t,e,n){"use strict";var i=d(n(25)),o=d(n(26)),r=d(n(27)),l=d(n(10)),a=d(n(28)),s=d(n(11)),c=d(n(29)),u=d(n(30)),f=d(n(31)),h=(d(n(32)),d(n(6)));function d(t){return t&&t.__esModule?t:{default:t}}var p={start:o.default,paint:r.default,add:h.default.prototype.add,remove:i.default,register:c.default,clear:l.default,setFpsHandler:u.default,setMaxFps:f.default,pause:a.default,on:h.default.prototype.on,off:h.default.prototype.off,trigger:h.default.prototype.trigger,broadcast:h.default.prototype.broadcast,nextTick:s.default,getAllChildren:h.default.prototype.getAllChildren};t.exports=p},function(t,e,n){"use strict";var i,o=(i=n(0))&&i.__esModule?i:{default:i};t.exports=function(t,e){o.default.execFuncs(t.hooks.beforeRemove,t,t.$tickedTimes++),t.style.visible=!1,t.$removing=!0,t.$parent?t.$parent.children=t.$parent.children.filter(function(t){return!0!==t.$removing}):this.children=this.children.filter(function(t){return!0!==t.$removing}),t.$canvas&&(t.$canvas=void 0,t.$parent=void 0,t.$tickedTimes=void 0,t.$cache={},t.$rendered=!1,o.default.execFuncs(t.hooks.removed,t,t.$tickedTimes)),e&&this.children.splice(this.children.indexOf(t),1)}},function(t,e,n){"use strict";var i=r(n(9)),o=r(n(3));function r(t){return t&&t.__esModule?t:{default:t}}function l(){var t=Date.now();o.default.$lastPaintTime=this.$nextTickTime=t,1e3<=t-this.fpsCalculateTime&&(this.fpsCalculateTime=t,this.fpsHandler&&this.fpsHandler.call(this,this.fps),this.lastFps=this.fps,this.fps=0),(0,i.default)(a.bind(this))}var a=function(t){if(this.$rafTime=t,l.call(this),0<this.maxFps&&this.maxFps<60){if(time-this.$lastPaintTime<=1e3/this.maxFps)return;this.$lastPaintTime=time-(time-this.$lastPaintTime)%(1e3/this.maxFps)}else this.$lastPaintTime=Date.now();this.fps++,this.paint()};t.exports=function(){return this.fpsCalculateTime=Date.now(),l.call(this),this}},function(t,e,n){"use strict";var o=i(n(0));i(n(1));function i(t){return t&&t.__esModule?t:{default:t}}t.exports=function(){if(!(this.$pausing||this.$inBrowser&&document.hidden)){var n=this;0,o.default.execFuncs(n.hooks.beforeTick,n,[n.$rafTime]),n.children.forEach(function(t){t.recalculate()}),n.$freezing||(n.$lastTickChildren=n.$children,n.$children=[],this.children.sort(function(t,e){var n=o.default.funcOrValue(t.style.zIndex,t),i=o.default.funcOrValue(e.style.zIndex,e);return n===i?0:i<n?1:-1}).forEach(function(t,e){n.$perPaint(t,e)})),n.$paintContext.clearRect&&n.$paintContext.clearRect(0,0,this.width,this.height),n.$render(),o.default.execFuncs(n.hooks.ticked,n,[n.$rafTime]),n.hooks.nextTick&&(o.default.execFuncs(n.hooks.nextTick,n,[n.$rafTime]),delete n.hooks.nextTick)}}},function(t,e,n){"use strict";t.exports=function(t){this.$pausing=void 0===t||t}},function(t,e,n){"use strict";t.exports=function(e,t){var n=this;var i=t||{};for(var o in e=this.$dom=e||this.$dom,i)this[o]=i[o];if(this.name=i.name||e.id||e.classList&&e.classList[0]||"Unnamed",this.$inBrowser="undefined"!=typeof window,i.fullScreen&&"undefined"!=typeof document&&(e.width=e.style.width=document.body.clientWidth||document.documentElement.clientWidth,e.height=e.style.height=document.body.clientHeight||document.documentElement.clientHeight,i.dpr&&(e.width*=i.dpr,e.height*=i.dpr)),e.width=this.width=this.width||i.width||e.width,e.height=this.height=this.height||i.height||e.height,this.events=i.events||{},this.hooks=i.hooks||{},this.$inBrowser){["contextmenu","mousewheel","click","dblclick","mousedown","mouseup","mousemove","touchstart","touchend","touchmove"].forEach(function(t){e.addEventListener(t,n.$eventHandler.bind(n))})}return function(e){var n=this;this.$extendList.forEach(function(t){t.onCreate&&t.onCreate.call(n,e)})}.call(this,i),this.$paintContext=this.$paintContext||e.getContext("2d"),this}},function(t,e,n){"use strict";t.exports=function(t){this.fpsHandler=t}},function(t,e,n){"use strict";t.exports=function(t){this.maxFps=t||-1}},function(t,e,n){"use strict"},function(t,e,n){"use strict";var i,l=(i=n(0))&&i.__esModule?i:{default:i};t.exports=function(t,n,i){var o=n;if(i){var r=this;(o=function(){var t=Date.now();if(t>o.$lastTriggerTime+i){o.$lastTriggerTime=t;var e=Array.prototype.slice.call(arguments);n.apply(r,e)}}).$lastTriggerTime=-1,o.$handle=n}this.hooks[t]?l.default.isArray(this.hooks[t])?this.hooks[t].push(o):this.hooks[t]=[this.hooks[t],o]:this.hooks[t]=o}},function(t,e,n){"use strict";var i,o=(i=n(0))&&i.__esModule?i:{default:i};t.exports=function(t,e){this.hooks[t]&&(this.hooks[t]!==e&&this.hooks[t].$handle!==e&&e?o.default.isArray(this.hooks[t])&&(0<=this.hooks[t].indexOf(e)?this.hooks[t][this.hooks[t].indexOf(e)]=void 0:0<=this.hooks[t].indexOf(e.$handle)&&(this.hooks[t][this.hooks[t].indexOf(e.$handle)]=void 0)):delete this.hooks[t])}},function(t,e,n){"use strict";var i,o=(i=n(0))&&i.__esModule?i:{default:i};t.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();if(this.hooks[e])return o.default.execFuncs(this.hooks[e],this,t)}},function(t,e,n){"use strict";var i,o=(i=n(0))&&i.__esModule?i:{default:i};t.exports=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();this.hooks[t]&&o.default.execFuncs(this.hooks[t],this,e),e.unshift(t);var n=this.children;n&&n.forEach(function(t){t.broadcast.apply(t,e)})}},function(t,e,n){"use strict";var i;(i=n(0))&&i.__esModule;t.exports=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();e.unshift(t);var n=this.children;n&&n.forEach(function(t){t.broadcast.apply(t,e)})}},function(t,e,n){"use strict";t.exports=function(n,i){var o=this.getRect(n,i);return o.right=o.left+o.width,o.bottom=o.top+o.height,this.children.forEach(function(t){if(!1!==t.$cache.visible){var e=t.getOuterRect(n,i);e.left<o.left&&(o.left=e.left),e.top<o.top&&(o.top=e.top),e.right>o.right&&(o.right=e.right),e.bottom>o.bottom&&(o.bottom=e.bottom),o.width=o.right-o.left,o.height=o.bottom-o.top}}),o}},function(t,e,n){"use strict";var g=i(n(0));i(n(1));function i(t){return t&&t.__esModule?t:{default:t}}t.exports=function(){var d=this,p=this;return 9!==p.$combine?1:(setTimeout(function(){if(9!==p.$combine)return 1;if(!1===p.getStyle("visible"))return 3;var t=d.$canvas,e=p.getRect(!1,!0);if(e.tw>t.width)return 2;if(e.th>t.height)return 2;for(var n,i=p.getAllChildren(!0),o=0;o<i.length;o++){var r=i[o];if(r.content.img&&!r.$render._imgWidth)return 3;if(1!==r.getStyle("scale"))return 3}if("hidden"!==g.default.funcOrValue(p.style.overflow,p)){if((n=p.getOuterRect(!1,!0)).left=Math.floor(n.left),n.top=Math.floor(n.top),n.width=Math.round(n.width),n.height=Math.round(n.height),n.right=Math.round(n.right),n.bottom=Math.round(n.bottom),n.width>t.width)return 2;if(n.height>t.height)return 2}else n=e;p.off("ticked",d.combine);var l=t.$children.filter(function(t){for(var e=0;e<i.length;e++)if(i[e].$id===t.$id)return!0}),a=p.getStyle("opacity");l.forEach(function(t){t.settings&&(t.settings.$combineGlobalAlpha=t.settings.globalAlpha,t.settings.globalAlpha=0<a?t.settings.globalAlpha/a:1,t.props.$moved||(t.props.$moved=!0,t.props.left-=n.left,t.props.top-=n.top))});var s=t.$combinerCanvas;s||((s=t.$combinerCanvas=document.createElement("canvas")).width=t.width,s.height=t.height);var c=s.getContext("2d");c.clearRect(0,0,t.width,t.height),t.$render(c,l,!0),l.forEach(function(t){t.settings&&(t.settings.globalAlpha=t.settings.$combineGlobalAlpha)});var u=document.createElement("canvas");u.width=n.width,u.height=n.height,u.getContext("2d").drawImage(s,0,0,n.width,n.height,0,0,n.width,n.height),p.$combine={content:p.content,children:p.children,style:Object.assign({},p.style)},p.children=[],p.content={img:u};var f=p.getSelfStyle("left")-(Math.floor(e.left)-n.left),h=p.getSelfStyle("top")-(Math.floor(e.top)-n.top);return Object.assign(p.style,{scale:1,left:f,top:h,width:u.width,height:u.height,backgroundColor:void 0}),1}),this)}},function(t,e,n){"use strict";var i;(i=n(1))&&i.__esModule;t.exports=function(){var e=this;this.$combine&&(9!==this.$combine?(this.content=this.$combine.content,this.children=this.$combine.children,Object.keys(this.style).forEach(function(t){e.style[t]=void 0}),Object.keys(this.$combine.style).forEach(function(t){e.style[t]=e.$combine.style[t]}),this.$combine=!1,this.recalculate(!0)):this.$combine=!1)}},function(t,e,n){"use strict";var v=i(n(0)),m=i(n(8)),y=i(n(1));function i(t){return t&&t.__esModule?t:{default:t}}t.exports=function(e){var l=this;if(e||v.default.execFuncs(l.hooks.beforeTick,l,[l.$canvas.$rafTime]),!1===v.default.funcOrValue(l.style.visible,l))return l.$cache.visible=!1,void(e||v.default.execFuncs(l.hooks.ticked,l,[l.$canvas.$rafTime]));l.$cache.visible=!0,e&&(l.$cache={},y.default.styles.forEach(function(t){l.$needUpdate[t]=1,l.$cache[t]=void 0}));var t=Object.keys(l.$needUpdate).length;if(l.$lastUpdate=l.$needUpdate,t){var a={},n=function(e){var t=l.$cache[e];if("function"==typeof l.$style[e])a[e]=1,l.$cache[e]=l.$style[e].call(l);else if("string"==typeof l.$style[e]&&-1<l.$style[e].indexOf("%")){var n=l.$parent&&l.$parent.$cache.width||l.$canvas.width||0,i=l.$parent&&l.$parent.$cache.width||l.$canvas.width||0;"left"===e||"width"===e?l.$cache[e]=Math.floor(parseFloat(l.$style[e])/100*n):"top"===e||"height"===e?l.$cache[e]=Math.floor(parseFloat(l.$style[e])/100*i):"fontSize"===e&&(l.$cache[e]=Math.floor(parseFloat(l.$style[e])/100*l.$canvas.width))}else l.$cache[e]=l.$style[e];if("left"===e||"top"===e){var o=l.$parent;o&&(l.$cache[e]+=o.$cache[e]||0)}else if("opacity"===e||"scale"===e){var r=l.$parent;r&&(l.$cache[e]*=v.default.firstValuable(r.$cache[e],1))}t===l.$cache[e]?delete l.$needUpdate[e]:"left"!==e&&"top"!==e&&"opacity"!==e&&"scale"!==e||t!==l.$cache[e]&&l.children.forEach(function(t){t.$needUpdate[e]=1})};for(var i in l.$needUpdate)n(i);t=Object.keys(l.$needUpdate).length,l.$needUpdate=a}e||v.default.execFuncs(l.hooks.ticked,l,[l.$canvas.$rafTime]);var o=v.default.funcOrValue(l.content.text,l),r=v.default.funcOrValue(l.content.img,l);if(t||l.$cache.text!==o||l.$cache.img!==r||l.content.img&&!l.$render._imgWidth){var s=l.$render;l.$cache.img=s.img=r=v.default.funcOrValue(l.content.img,l),l.$cache.text=s.text=o,"string"==typeof s.img&&(s.img=l.content.img=l.$canvas.imgLoader(s.img)),r&&!1===r._complete&&(r=!1),s.backgroundColor=l.$cache.backgroundColor,s.border=l.$cache.border,s.overflow=l.$cache.overflow,s.overflowX=l.$cache.overflowX,s.overflowY=l.$cache.overflowY,s.locate=l.$cache.locate,s.rotate=l.$cache.rotate,s.scale=l.$cache.scale,s.opacity=l.$cache.opacity,s.$moved=!1,s.childrenInside=(s.overflow||s.overflowX||s.overflowY)&&"visible"!==s.overflow,s.left=l.$cache.left,s.top=l.$cache.top,s.width=l.$cache.width,s.height=l.$cache.height,s._imgWidth=0,s._imgHeight=0,r&&r.width&&(s._imgWidth=r.width||0,s._imgHeight=r.height||0,s.cutLeft=l.$cache.cutLeft||0,s.cutTop=l.$cache.cutTop||0,s.cutWidth=l.$cache.cutWidth||s._imgWidth,s.cutHeight=l.$cache.cutHeight||s._imgHeight,s.cutLeft=Math.round(s.cutLeft),s.cutTop=Math.round(s.cutTop),s.cutWidth=Math.round(s.cutWidth),s.cutHeight=Math.round(s.cutHeight),s.width=s.width||s.cutWidth||0,s.height=s.height||s.cutHeight||0),"lt"===s.locate||("ld"===s.locate?s.top-=s.height:"rt"===s.locate?s.left-=s.width:"rd"===s.locate?(s.left-=s.width,s.top-=s.height):(s.left-=s.width>>1,s.top-=s.height>>1)),s.left=Math.round(s.left),s.top=Math.round(s.top),s.width=Math.round(s.width),s.height=Math.round(s.height);var c=s.settings={};if(c.globalAlpha=v.default.firstValuable(s.opacity,1),s.childrenInside&&(c.clip=!0),1!==l.$cache.scale){var u=s.scale,f=function t(e){if(e)return 1!==v.default.funcOrValue(e.$style.scale,e)?e:t(e.$parent)}(l);if(f){var h=f.$render.left+f.$render.width/2,d=f.$render.top+f.$render.height/2;s.left-=(h-s.left)*(u-1),s.top-=(d-s.top)*(u-1),s.width*=u,s.height*=u}}if((s.fh||s.fv)&&(s.fh=s.fh||0,s.fv=s.fv||0,s.fx=s.fx||0,s.fy=s.fy||0,c.transform={fh:s.fh,fv:s.fv,fx:-(s.top+(s.height>>1))*s.fv+s.fx,fy:-(s.left+(s.width>>1))*s.fh+s.fy}),s.blend&&("string"==typeof s.blend?c.globalCompositeOperation=s.blend:c.globalCompositeOperation=blend[s.blend]),s.backgroundColor&&(c.fillRect=s.backgroundColor),s.border&&(c.line=s.border),s.mirrX?(c.translate=[$canvas.width,0],c.scale=[-1,1],s.left=$canvas.width-s.left-s.width,s.mirrY&&(c.translate=[$canvas.width,$canvas.height],c.scale=[-1,-1],s.top=$canvas.height-s.top-s.height)):s.mirrY&&(c.translate=[0,$canvas.height],c.scale=[1,-1],s.top=$canvas.height-s.top-s.height),s.rotate){s.rx=v.default.firstValuable(v.default.funcOrValue(l.$cache.rx,l),s.left+.5*s.width),s.ry=v.default.firstValuable(v.default.funcOrValue(l.$cache.ry,l),s.top+.5*s.height);var p=v.default.firstValuable(s.rx,s.left+.5*s.width),g=v.default.firstValuable(s.ry,s.top+.5*s.height);c.beforeRotate=[p,g],c.rotate=-s.rotate*Math.PI/180,c.rotate=Number(c.rotate.toFixed(4)),c.afterRotate=[-p,-g]}s.$insight=(0,m.default)(s.left,s.top,s.width,s.height,0,0,l.$canvas.width,l.$canvas.height,c.beforeRotate&&c.beforeRotate[0],c.beforeRotate&&c.beforeRotate[1],s.rotate)}l.children.forEach(function(t){t.recalculate(e)})}},function(t,e,n){"use strict";var i=l(n(43)),o=l(n(45)),r=l(n(46));l(n(47));function l(t){return t&&t.__esModule?t:{default:t}}var a={$render:o.default,$eventHandler:r.default,$perPaint:i.default};t.exports=a},function(t,e,n){"use strict";var S=i(n(0)),T=(i(n(1)),i(n(44)));i(n(8));function i(t){return t&&t.__esModule?t:{default:t}}S.default.blend;t.exports=function(e,t){if((e.$rendered=!1)!==e.$cache.visible){var n=this;(function(){var e=this;this.$canvas.$extendList.forEach(function(t){t.onPaint&&t.onPaint.call(e)})}).call(e);var r=e.$render,l=r.text,i=r.img,o=r.childrenInside;if(i||l||r.backgroundColor||r.border||o){var a=e.children,s=r.settings;if(s.clip){var c={$id:e.$id,type:"clip",props:r};c.$origin=e,n.$children.push(c)}if(a.length&&(0,T.default)(n,a,-1),s.fillRect){e.$rendered=!0;var u={$id:e.$id,type:"fillRect",settings:s,props:r};u.$origin=e,n.$children.push(u)}if(r._imgWidth&&0!==r.opacity&&r.cutWidth&&r.cutHeight){e.$rendered=!0;var f={$id:e.$id,type:"img",settings:s,img:i,props:r};f.$origin=e,n.$children.push(f)}if(l){r.fontSize=e.$cache.fontSize,r.fontFamily=e.$cache.fontFamily,r.color=e.$cache.color,r.textAlign=e.$cache.textAlign,r.textVerticalAlign=e.$cache.textVerticalAlign,e.$rendered=!0;var h=r.left,d=r.top,p=r.align||r.textAlign||"left",g=(r.fontSize||14)+"px "+(r.fontFamily||"serif"),v=parseInt(g),m="top",y=r.lineHeight||v;if("center"===p?h+=r.width/2:"right"===p&&(h+=r.width),"top"===r.textVerticalAlign?m="top":"bottom"===r.textVerticalAlign?(m="bottom",d+=r.height):"middle"===r.textVerticalAlign&&(d+=r.height>>1,m="middle"),"string"==typeof l||"number"==typeof l)n.$children.push({$id:e.$id,type:"text",settings:s,props:{left:h,top:d,content:String(l),fontsize:v,align:p,baseline:m,font:g,color:r.color,type:r.textToppe},$origin:e});else if(l.length)l.forEach(function(t){n.$children.push({$id:e.$id,type:"text",settings:s,props:{left:h+S.default.funcOrValue(t.left,e),top:d+S.default.funcOrValue(t.top,e),content:S.default.funcOrValue(t.content,e),fontsize:v,baseline:m,align:p,font:g,color:r.color,type:r.textToppe},$origin:e})});else if("multline-text"===l.toppe){var $=l.text.split(/\t|\n/),b=[];$.forEach(function(t,e){t=String.prototype.trim.apply(t),l.config.start&&(t=t.replace(l.config.start,""));for(var n,i=0,o=r.width;t.length&&i<t.length;)o<=0&&(o=r.width,b.push(t.substr(0,i)),t=t.substr(i),i=0),o-=v*(n=t[++i],/[^\u4e00-\u9fa5]/.test(n)?.6:1.05);(t||e)&&b.push(t)}),b.forEach(function(t){n.$children.push({$id:e.$id,type:"text",settings:s,props:{left:h,top:d,fontsize:v,content:t,baseline:m,align:p,font:g,color:r.color,type:r.textToppe},$origin:e}),d+=y||v})}}if(i||l||(e.$rendered=void 0),a.length&&(0,T.default)(n,a,1),s.clip){var x={$id:e.$id,type:"clipOver",props:r};x.$origin=e,n.$children.push(x)}if(s.line){e.$rendered=!0;var w={$id:e.$id,type:"line",settings:s,props:r};w.$origin=e,n.$children.push(w)}}else{e.$rendered=void 0;var O=e.children;O.length&&((0,T.default)(n,O,-1),(0,T.default)(n,O,1))}}}},function(t,e,n){"use strict";var i,o=(i=n(0))&&i.__esModule?i:{default:i};t.exports=function(n,t,i){t.filter(function(t){var e=o.default.funcOrValue(t.style.zIndex,t);return i<0?e<0:0<=e}).sort(function(t,e){var n=o.default.funcOrValue(t.style.zIndex,t),i=o.default.funcOrValue(e.style.zIndex,e);return n===i?0:i<n?1:-1}).forEach(function(t,e){n.$perPaint.call(n,t,e)})}},function(t,e,n){"use strict";var i,v=(i=n(0))&&i.__esModule?i:{default:i};t.exports=function(d,t,e){var p=this,g=t||p.$children;e||p.webgl||(g=g.filter(function(t){return!1!==t.props.$insight})),g.forEach(function(t,e){var n,i=t.props;if(i&&"clip"!==t.type&&"text"!==t.type&&"clipOver"!==t.type&&"line"!==t.type&&4e4<(n=i.width*i.height)&&!t.settings.transform&&!t.settings.rotate)for(var o=g.length,r=e+1;r<o;r++){var l=g[r];if(!l.$cannotCover)if("clip"!==l.type){var a=l.settings;if(l.type&&"img"===l.type||"fillRect"===l.type&&-1===a.fillRect.indexOf("rgba")){var s=l.props;if(s.width*s.height<4e4)l.$cannotCover=!0;else if(!(s.width*s.height<n))if(!l.img||l.img.$noAlpha){if(1!==a.globalAlpha||a.globalCompositeOperation||a.transform||a.rotate)l.$cannotCover=!0;else if(v.default.pointInRect(i.left,i.top,s.left,s.left+s.width,s.top,s.top+s.height)&&v.default.pointInRect(i.left+i.width,i.top+i.height,s.left,s.left+s.width,s.top,s.top+s.height))return void 0}else l.$cannotCover=!0}else l.$cannotCover=!0}else for(;r<o&&"clipOver"!==g[++r].type;);}var c=t.settings||{};if(!function(n,i){var o=this,r=!1;return this.$extendList.forEach(function(t){if(t.onRender){var e=t.onRender.call(o,n,i);e&&(r=e)}}),r}.call(p,t,c)){0;var u=d||p.$paintContext;"clip"===t.type&&(u.save(),u.beginPath(),u.moveTo(i.left,i.top),u.lineTo(i.left+i.width,i.top),u.lineTo(i.left+i.width,i.top+i.height),u.lineTo(i.left,i.top+i.height),u.lineTo(i.left,i.top),u.closePath(),u.clip());var f=!1;if(c.globalCompositeOperation&&(f||(u.save(),f=!0),u.globalCompositeOperation=c.globalCompositeOperation),u.$globalAlpha!==c.globalAlpha&&(u.$globalAlpha=u.globalAlpha=c.globalAlpha),c.translate&&(f||(u.save(),f=!0),u.translate(c.translate[0]||0,c.translate[1]||0)),c.rotate&&(f||(u.save(),f=!0),u.translate(c.beforeRotate[0]||0,c.beforeRotate[1]||0),u.rotate(c.rotate||0),u.translate(c.afterRotate[0]||0,c.afterRotate[1]||0)),c.scale&&(f||(u.save(),f=!0),u.scale(c.scale[0]||1,c.scale[1]||1)),c.transform&&(f||(u.save(),f=!0),u.transform(1,c.transform.fh,c.transform.fv,1,c.transform.fx,c.transform.fy)),"img"===t.type)u.drawImage(t.img,i.cutLeft,i.cutTop,i.cutWidth,i.cutHeight,i.left,i.top,i.width,i.height);else if("text"===t.type&&i.content)u.font=i.font,u.fillStyle=i.color||"white",u.textAlign=i.align,u.textBaseline=i.baseline,u[i.type||"fillText"](i.content,i.left,i.top);else if("fillRect"===t.type)u.fillStyle=c.fillRect,u.fillRect(i.left,i.top,i.width,i.height);else if("line"===t.type){u.beginPath();var h=i.border.substr(i.border.indexOf(" "))||"black";u.strokeStyle=h,u.lineWidth=i.border.split(" ")[0]||1,u.moveTo(i.left,i.top),u.lineTo(i.left+i.width,i.top),u.lineTo(i.left+i.width,i.top+i.height),u.lineTo(i.left,i.top+i.height),u.closePath(),u.stroke()}else"clipOver"===t.type&&u.restore();f&&(u.$globalAlpha=!1,u.restore())}})}},function(t,e,n){"use strict";var d=i(n(0));i(n(1));function i(t){return t&&t.__esModule?t:{default:t}}function p(t){return t.sort(function(t,e){return d.default.funcOrValue(d.default.firstValuable(t.events.eIndex,t.style.zIndex),t)<d.default.funcOrValue(d.default.firstValuable(e.events.eIndex,e.style.zIndex),e)?1:-1})}function g(t,e){var n=t.getRect();return d.default.pointInRect(e.canvasX,e.canvasY,n.left,n.left+n.width,n.top,n.top+n.height)}var v,m="undefined"!=typeof wx||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),y=function t(e,n,i){i&&i.push(e),e.events[n.type]&&(e.events[n.type].call(e,n),n.$stopPropagation)||(e.$parent?t(e.$parent,n,i):e.$canvas&&!n.$stopPropagation&&(t(e.$canvas,n),n.stopPropagation()))},$={x:0,y:0,timeStamp:0};v=function(t,e){var n,i,o=this,r=1,l=1;if(!e){i=!t.layerX&&t.targetTouches&&t.targetTouches[0]?(n=t.targetTouches[0].pageX-t.currentTarget.offsetLeft,t.targetTouches[0].pageY-t.currentTarget.offsetTop):!t.layerX&&t.changedTouches&&t.changedTouches[0]?(n=t.changedTouches[0].pageX-t.currentTarget.offsetLeft,t.changedTouches[0].pageY-t.currentTarget.offsetTop):(n=t.layerX,t.layerY);if(this.$dom.getBoundingClientRect){var a=this.$dom.getBoundingClientRect();a.width,a.height,this.width,this.height,r=Math.floor(a.width)/this.width,l=Math.floor(a.height)/this.height}}var s=e||{type:t.type,canvasX:n/r,canvasY:i/l,event:t};if(m&&o.fastclick){if("click"===s.type&&!s.$fakeClick)return;"touchstart"===s.type?($.x=s.canvasX,$.y=s.canvasY,$.timeStamp=Date.now()):"touchend"===s.type&&Math.abs($.x-s.canvasX)<30&&Math.abs($.y-s.canvasY)<30&&Date.now()-$.timeStamp<200&&v.call(this,null,{$fakeClick:!0,type:"click",canvasX:$.x,canvasY:$.y,event:t})}if(s.stopPropagation=function(){s.$stopPropagation=!0},!o.events.interceptor||(s=d.default.firstValuable(o.events.interceptor.call(o,s),s))&&!s.$stopPropagation){var c=[];if(function t(e,n,i){if(e&&e.length&&!n.$stopPropagation)for(var o=e.length,r=0;r<o;r++){var l=e[r];if(!1!==d.default.funcOrValue(l.style.visible,l)&&(!l.events||"none"!==l.events.pointerEvents)){if(g(l,n)){var a=l.events.interceptor;if(a){var s=d.default.firstValuable(a.call(l,n),n);if(!s||s.$stopPropagation)return}}var c=l.$combine&&l.$combine.children?l.$combine.children:l.children;if(c.length&&t(p(c.filter(function(t){return 0<=d.default.funcOrValue(d.default.firstValuable(t.events.eIndex,t.style.zIndex),t)})),n,i),n.$stopPropagation)break;if(g(l,n))return y(l,n,i),void n.stopPropagation();c.length&&t(p(c.filter(function(t){return!(0<=d.default.funcOrValue(d.default.firstValuable(t.events.eIndex,t.style.zIndex),t))})),n,i)}}}(p(o.children),s,c),function(e,n){var i=this;this.$extendList.forEach(function(t){t.onEvent&&t.onEvent.call(i,e,n)})}.call(o,s,c),("mousemove"===s.type||"touchmove"===s.type)&&o.eLastMouseHover&&-1===c.indexOf(o.eLastMouseHover)){var u=o.eLastMouseHover.events.mouseout||o.eLastMouseHover.events.touchout;u&&u.call(o.eLastMouseHover,s)}if(o.eLastMouseHover=c[0],!c.length&&o.eLastMouseHover){var f=o.eLastMouseHover.events.mouseout;f&&f.call(o.eLastMouseHover,s),o.eLastMouseHover=null}var h=o.events[s.type];return h&&!s.$stopPropagation&&h.call(o,s)?!(o.eHoldingFlag=!1):void 0}},t.exports=v},function(t,e,n){"use strict";i(n(0)),i(n(1));function i(t){return t&&t.__esModule?t:{default:t}}t.exports=function(){}},function(t,e,n){"use strict";t.exports={$dom:null,$paintContext:null,$nextTickTime:0,$lastPaintTime:0,$pausing:!1,$freezing:!1,name:"",fps:0,lastFps:0,fpsCalculateTime:0,fpsHandler:null,width:0,height:0,events:{click:null},children:[],eHoldingFlag:!1,eLastMouseHover:null,maxFps:-1,$flags:{}}},function(t,e,n){"use strict";var i=r(n(7)),o=r(n(20));function r(t){return t&&t.__esModule?t:{default:t}}t.exports=function(t,a){var s;return(0,o.default)(t,function(t){return(0,i.default)(t,function(t){for(var e=t.width,n=t.height,i=t.getContext("2d").getImageData(0,0,e,n),o=i.data,r=o.length-1;0<=r;r-=4)if(a&&a.conversion){var l=a.conversion({r:o[r-3],g:o[r-2],b:o[r-1],a:o[r]},(r+1>>2)%e,Math.floor((r+1>>2)/e));o[r-3]=l.r,o[r-2]=l.g,o[r-1]=l.b,o[r-0]=l.a}t.getContext("2d").clearRect(0,0,e,n),t.getContext("2d").putImageData(i,0,0),s=t},{canvas:!0,cacheFlag:Math.random()})}),function(){return s}}},function(t,e,n){"use strict";t.exports=function(t,e){return{type:"multline-text",text:t,config:e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=o.default.prototype.$extendList;if(0<=e.indexOf(t))return;e.push(t)};var i,o=(i=n(6))&&i.__esModule?i:{default:i}},function(t,e,n){"use strict";i(n(1)),i(n(0));function i(t){return t&&t.__esModule?t:{default:t}}},,,,,,,,,,,,,,,,function(t,e,n){t.exports=n(69)},function(t,e,n){"use strict";var i,o=(i=n(22))&&i.__esModule?i:{default:i};function r(t,e){if(c[t])return c[t];var n={width:0,height:0};return c[t]=n,wx.getImageInfo({src:t,success:function(t){n.width=t.width,n.height=t.height,n.url=t.path,e&&e(n)}}),n}function l(t){a=t.touches[0]?t.touches[0].x:a,s=t.touches[0]?t.touches[0].y:s;var e={type:t.type,targetTouches:[{pageX:a,pageY:s}],currentTarget:{offsetLeft:0,offsetTop:0},preventDefault:function(){}};if("touchmove"!==t.type&&"longtap"!==t.type,this.$eventHandler(e),"touchend"===t.type){e={type:"click",targetTouches:[{pageX:a,pageY:s}],currentTarget:{offsetLeft:0,offsetTop:0},preventDefault:function(){!1}};this.$eventHandler(e)}}var a,s,c={};o.default.use({onUse:function(){o.default.ImgLoader=r},onRender:function(t,e){t.img&&(t.img=t.img.url)},onCreate:function(){this.imgLoader=r,this.handle=l}}),t.exports=o.default}]));