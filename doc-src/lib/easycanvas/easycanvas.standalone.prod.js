!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i=e();for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(102)},function(t,e){"use strict";var i={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},funcOrValue:function(t,e){return"function"==typeof t?t.call(e):t},execFuncs:function(t,e,n){t&&(i.isArray(n)||(n=[n])),"function"==typeof t?t.apply(e,n):i.isArray(t)&&t.length&&t.forEach(function(t){t&&t.apply(e,n)})},blend:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],pointInRect:function(t,e,i,n,o,r){return!(t<i||t>n||e<o||e>r)},firstValuable:function(t,e,i){return"undefined"==typeof t?"undefined"==typeof e?i:e:t}};t.exports=i},,function(t,e){"use strict";var i=["cutLeft","cutTop","cutWidth","cutHeight"],n=["left","top","width","height"],o=i.concat(n),r=o.concat(["locate","rx","ry","zIndex","textFont","textAlign","textVerticalAlign","color","rotate","scale","opacity","backgroundColor","border","overflow","overflowX","overflowY"]);t.exports={txywh:n,sxywh:i,xywh:o,styles:r,devFlag:"__EASYCANVAS_DEVTOOL__",version:"0.7.4"}},,function(t,e){"use strict";var i=3.141593;t.exports=function(t,e,n,o,r,a){var l=r?-r/180*i:0,s=t,c=e;return r&&(s=(t-n)*Math.cos(l)-(e-o)*Math.sin(l)+n,c=(t-n)*Math.sin(l)+(e-o)*Math.cos(l)+o),a?[s,c]:{x:s,y:c}}},,function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=i(1),a=n(r),l=i(3),s=n(l),c=i(29),u=n(c),f=i(28),h=n(f),d=i(18),p=n(d),v=i(19),g=n(v),$=i(31),y=n($),m=i(24),b=n(m),x=i(26),w=n(x),k=i(27),T=n(k),O=i(25),M=n(O),A=i(32),_=n(A),V=i(30),C=n(V),E=function t(e){e.children&&e.children.forEach(function(i,n){i.$id||(e.children[n]=new P(i)),e.$id&&!e.$dom?(e.children[n].$canvas=e.$canvas,e.children[n].$parent=e):e.children[n].$canvas=e,t(e.children[n])})},R=function(t,e){var i=t||{};i.$id||(i.$id=Math.random().toString(36).substr(2)),i.$tickedTimes=i.$tickedTimes||0,i.content=i.content||{},i.style=i.style||{},i.style.scale=a.default.firstValuable(i.style.scale,1),i.style.opacity=a.default.firstValuable(i.style.opacity,1),i.style.zIndex=i.style.zIndex||0,i.style.locate=i.style.locate||"center";a.default.funcOrValue(i.content.img);e.$cache={},e.$render={},e.$style={},e.$needUpdate={},i.hooks=i.hooks||{},s.default.styles.concat(["visible"]).forEach(function(t){e.$cache[t]=void 0,e.$style[t]=i.style[t],"function"==typeof i.style[t]&&(e.$style[t]=i.style[t].bind(e)),s.default.xywh.indexOf(t)>-1?e.$style[t]=e.$style[t]||0:["opacity","scale"].indexOf(t)>-1&&(e.$style[t]=a.default.firstValuable(e.$style[t],1)),e.$needUpdate[t]=1,Object.defineProperty(i.style,t,{get:function(){return e.$style[t]},set:function(i){e.$style[t]!==i&&(e.$style[t]=i,e.$needUpdate[t]=1)}})}),i.events=i.events||{};i.events.eIndex=i.events.eIndex;return i.children=i.children||[],E(i),i.$styleCacheTime={},i},S=function(t){var e=this;this.$extendList.forEach(function(i){i.call(e,t)})},P=function(t){var e=R(t,this);for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(this[i]=e[i]);return S.call(this,e),this};P.prototype.$extendList=[],P.prototype.add=function(t){if(t)return this.children.push(t),E(this),this.children[this.children.length-1]},P.prototype.getRect=function(t,e){var i=this,n={};if(s.default.txywh.forEach(function(t){n[t]=i.getStyle(t,e)}),0===n.width&&this.content.img&&!t){var o=a.default.funcOrValue(this.content.img,this);n.width=o.width,n.height=o.height}var r=this.getStyle("locate");return"lt"===r||("ld"===r?n.top-=n.height:"rt"===r?n.left-=n.width:"rd"===r?(n.left-=n.width,n.top-=n.height):(n.left-=n.width>>1,n.top-=n.height>>1)),n.right=this.$canvas.width-n.left-n.width,n.bottom=this.$canvas.height-n.top-n.height,n},P.prototype.getSelfStyle=function(t){var e={};if(t)return a.default.funcOrValue(this.style[t],this);for(var i in this.style)e[i]=a.default.funcOrValue(this.style[i],this);return e},P.prototype.getStyle=function(t,e){var i=this;if(e&&void 0!==i.$cache[t])return i.$cache[t];var n=a.default.funcOrValue(i.$style[t],i);if(i.$parent){var o=i.$parent.getStyle(t);if("left"===t||"top"===t)return o=a.default.firstValuable(o,0),o+a.default.firstValuable(n,0);if("scale"===t||"opacity"===t)return o=a.default.firstValuable(o,1),o*a.default.firstValuable(n,1);if("visible"===t)return o!==!1&&n}return n},P.prototype.remove=function(t){return t?(this.$canvas.remove(t),void a.default.execFuncs(t.hooks.removed,t)):(this.$parent?this.$parent.remove(this):this.$canvas.remove(this),void a.default.execFuncs(this.hooks.removed,this))},P.prototype.update=function(t){if(t){for(var e in t)if("object"===o(t[e]))for(var i in t[e])this[e]||(this[e]={}),this[e][i]=t[e][i];else this[e]=t[e];this.recalculate(!0)}},P.prototype.getAllChildren=function(t){var e=this,i=t?[e]:[];return e.children.forEach(function(t){i=i.concat(t.getAllChildren(!0))}),i},P.prototype.getAllVisibleChildren=function(t){var e=this;if(a.default.funcOrValue(e.style.visible,e)===!1)return[];var i=t?[e]:[];return e.children.forEach(function(t){i=i.concat(t.getAllVisibleChildren(!0))}),i},P.prototype.getOuterRect=T.default,P.prototype.combine=M.default,P.prototype.uncombine=_.default,P.prototype.combineAsync=function(){return this.$combine?this:(this.$combine=9,this.off("ticked",this.combine),this.on("ticked",this.combine,100),this)},P.prototype.recalculate=C.default,P.prototype.refresh=function(){for(var t in $sprite.$style)$sprite.$cache[t]=P.get($sprite.$style[t],$sprite);return this},P.prototype.nextTick=g.default,P.prototype.on=u.default,P.prototype.off=h.default,P.prototype.clear=p.default,P.prototype.trigger=y.default,P.prototype.broadcast=b.default,P.prototype.distribute=w.default,t.exports=P},,,,function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(5),r=(n(o),i(16)),a=n(r);t.exports=function(t,e,i,n,o,r,l,s,c,u,f){if(!f){if(e>r+s)return!1;if(r>e+n)return!1;if(t>o+l)return!1;if(o>t+i)return!1}var h=(0,a.default)(t,e,o,r,l,s,c,u,f)||(0,a.default)(t+i,e,o,r,l,s,c,u,f)||(0,a.default)(t,e+n,o,r,l,s,c,u,f)||(0,a.default)(t+i,e+n,o,r,l,s,c,u,f);if(h)return!0;var d=(0,a.default)(o,r,t,e,i,n,c,u,-f)||(0,a.default)(o+l,r,t,e,i,n,c,u,-f)||(0,a.default)(o,r+s,t,e,i,n,c,u,-f)||(0,a.default)(o+l,r+s,t,e,i,n,c,u,-f);return!!d||(e>r&&e+n<r+s&&t<o&&t+i>o+l||t>o&&t+i<o+l&&e<r&&e+n>r+s)}},,,,,function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(5),r=(n(o),3.141593);t.exports=function(t,e,i,n,o,a,l,s,c){var u=c?-c/180*r:0;return u&&(t=(t-l)*Math.cos(u)-(e-s)*Math.sin(u)+l,e=(t-l)*Math.sin(u)+(e-s)*Math.cos(u)+s),t>=i&&t<=i+o&&e>=n&&e<=n+a}},,function(t,e){"use strict";t.exports=function(){this.children.forEach(function(t){t.remove()}),this.children=[]}},function(t,e){"use strict";t.exports=function(t){var e=function e(){t.apply(this,arguments),this.off("ticked",e)};this.on("ticked",e)}},function(t,e,i){"use strict";var n=i(1),o=Math.PI,r=function(t){return t.$lastPaintTime||Date.now()},a={linear:function(t,e,i){var n=r(this),o=!1,a=void 0,l=function(){var r=this.$lastPaintTime,s=(r-n)/i,c=(e-t)*s+t;if(o)if(e>t)for(;c>e;)c-=e-t;else for(;c<e;)c+=t-e;else e>t&&c>e?(l.$done=!0,c=e):e<t&&c<e&&(l.$done=!0,c=e);return s>=1&&a&&(a.call(this,c),a=null),c}.bind(this);return l.loop=function(){return o=!0,l},l.restart=function(){return n=r(this),l},l.then=function(t){return a=t,l},l},pendulum:function(t,e,i,n){var a=r(this),l=n||{};l.start=l.start||0;var s=!1,c=void 0,u=l.cycle||1,f=function(){var n=r(this),h=(n-a)/i;s?u&&(h%=u):u?h>u&&(h=u,f.$done=!0,h=u):h>1&&(f.$done=!0,h=1);var d=h*o*2-o/2+l.start/360*o,p=(e-t)*(Math.sin(d)+1)/2+t;return h>=u&&c&&(c.call(this,p),c=null),p}.bind(this);return f.loop=function(){return s=!0,f},f.restart=function(){return a=r(this),f},f.then=function(t){return c=t,f},f},ease:function(t,e,i){return this.pendulum(t,e,2*i,{cycle:.5})},oneByOne:function(t){var e=t,i=!1,n=function(){for(var t=0;t<e.length;t++){if(!e[t].$done)return e[t]();if(!e[t].$nextRestart&&(e[t].$nextRestart=!0,e[t+1]))return e[t+1].restart(),e[t+1]()}if(i){for(var n=0;n<e.length;n++)e[n].$done=!1,e[n].$nextRestart=!1,e[n].restart();return e[0]()}return e[e.length-1]()};return n.loop=function(){return i=!0,n},n}},l=function t(e,i,o,r,l){var s=(0,n.funcOrValue)(e[i]);s=s||0,e[i]=a[o].bind(t)(s,r,l)};for(var s in a)l[s]=a[s];t.exports=l},,,,function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(1),r=n(o);t.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();this.hooks[e]&&r.default.execFuncs(this.hooks[e],this,t),t.unshift(e);var i=this.children;i&&i.forEach(function(e){e.broadcast.apply(e,t)})}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r=i(1),a=n(r),l=i(3),s=(n(l),9),c=1,u=2,f=3;t.exports=function(){var t=this,e=this;return e.$combine!==s?c:(setTimeout(function(){if(e.$combine!==s)return c;if(e.getStyle("visible")===!1)return f;var i=t.$canvas,n=e.getRect(!1,!0);if(n.tw>i.width)return u;if(n.th>i.height)return u;for(var r=e.getAllChildren(!0),l=0;l<r.length;l++){var h=r[l];if(h.content.img&&!h.$render._imgWidth)return f;if(1!==h.getStyle("scale"))return f}var d=void 0;if("hidden"!==a.default.funcOrValue(e.style.overflow,e)){if(d=e.getOuterRect(!1,!0),d.left=Math.floor(d.left),d.top=Math.floor(d.top),d.width=Math.round(d.width),d.height=Math.round(d.height),d.right=Math.round(d.right),d.bottom=Math.round(d.bottom),d.width>i.width)return u;if(d.height>i.height)return u}else d=n;e.off("ticked",t.combine);var p=i.$children.filter(function(t){for(var e=0;e<r.length;e++)if(r[e].$id===t.$id)return!0}),v=e.getStyle("opacity");p.forEach(function(t){t.settings&&(t.settings.$combineGlobalAlpha=t.settings.globalAlpha,t.settings.globalAlpha=v>0?t.settings.globalAlpha/v:1,t.props.$moved||(t.props.$moved=!0,t.props.left-=d.left,t.props.top-=d.top))});var g=i.$combinerCanvas;g||(g=i.$combinerCanvas=document.createElement("canvas"),g.width=i.width,g.height=i.height);var $=g.getContext("2d");$.clearRect(0,0,i.width,i.height),i.$render($,p,!0),p.forEach(function(t){t.settings&&(t.settings.globalAlpha=t.settings.$combineGlobalAlpha)});var y=document.createElement("canvas");y.width=d.width,y.height=d.height;var m=y.getContext("2d");m.drawImage(g,0,0,d.width,d.height,0,0,d.width,d.height),e.$combine={content:e.content,children:e.children,style:o({},e.style)},e.children=[],e.content={img:y};var b=e.getSelfStyle("left")-(Math.floor(n.left)-d.left),x=e.getSelfStyle("top")-(Math.floor(n.top)-d.top);return o(e.style,{scale:1,left:b,top:x,width:y.width,height:y.height,backgroundColor:void 0}),c}),this)}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(1);n(o);t.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();t.unshift(e);var i=this.children;i&&i.forEach(function(e){e.broadcast.apply(e,t)})}},function(t,e){"use strict";t.exports=function(t,e){var i=this,n=i.getRect(t,e);return n.right=n.left+n.width,n.bottom=n.top+n.height,this.children.forEach(function(i){if(i.$cache.visible!==!1){var o=i.getOuterRect(t,e);o.left<n.left&&(n.left=o.left),o.top<n.top&&(n.top=o.top),o.right>n.right&&(n.right=o.right),o.bottom>n.bottom&&(n.bottom=o.bottom),n.width=n.right-n.left,n.height=n.bottom-n.top}}),n}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(1),r=n(o);t.exports=function(t,e){this.hooks[t]&&(this.hooks[t]!==e&&this.hooks[t].$handle!==e&&e?r.default.isArray(this.hooks[t])&&(this.hooks[t].indexOf(e)>=0?this.hooks[t][this.hooks[t].indexOf(e)]=void 0:this.hooks[t].indexOf(e.$handle)>=0&&(this.hooks[t][this.hooks[t].indexOf(e.$handle)]=void 0)):delete this.hooks[t])}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(1),r=n(o);t.exports=function(t,e,i){var n=e;if(i){var o=this;n=function(){var t=Date.now();if(t>n.$lastTriggerTime+i){n.$lastTriggerTime=t;var r=Array.prototype.slice.call(arguments);e.apply(o,r)}},n.$lastTriggerTime=-1,n.$handle=e}this.hooks[t]?r.default.isArray(this.hooks[t])?this.hooks[t].push(n):this.hooks[t]=[this.hooks[t],n]:this.hooks[t]=n}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(1),r=n(o),a=i(11),l=n(a),s=i(3),c=n(s),u=function t(e){if(e){var i=r.default.funcOrValue(e.$style.scale,e);return 1!==i?e:t(e.$parent)}};t.exports=function(t){var e=this;if(!t&&r.default.execFuncs(e.hooks.beforeTick,e,[e.$canvas.$rafTime]),r.default.funcOrValue(e.style.visible,e)===!1)return e.$cache.visible=!1,void(!t&&r.default.execFuncs(e.hooks.ticked,e,[e.$canvas.$rafTime]));e.$cache.visible=!0,t&&(e.$cache={},c.default.styles.forEach(function(t){e.$needUpdate[t]=1,e.$cache[t]=void 0}));var i=Object.keys(e.$needUpdate).length;if(e.$lastUpdate=e.$needUpdate,i){var n={},o=function(t){var i=e.$cache[t];if("function"==typeof e.$style[t]?(n[t]=1,e.$cache[t]=e.$style[t].call(e)):e.$cache[t]=e.$style[t],"left"===t||"top"===t){var o=e.$parent;o&&(e.$cache[t]+=o.$cache[t]||0)}else if("opacity"===t||"scale"===t){var a=e.$parent;a&&(e.$cache[t]*=r.default.firstValuable(a.$cache[t],1))}i===e.$cache[t]?delete e.$needUpdate[t]:"left"!==t&&"top"!==t&&"opacity"!==t&&"scale"!==t||i!==e.$cache[t]&&e.children.forEach(function(e){e.$needUpdate[t]=1})};for(var a in e.$needUpdate)o(a);i=Object.keys(e.$needUpdate).length,e.$needUpdate=n}!t&&r.default.execFuncs(e.hooks.ticked,e,[e.$canvas.$rafTime]);var s=r.default.funcOrValue(e.content.text,e),f=r.default.funcOrValue(e.content.img,e);if(i||e.$cache.text!==s||e.$cache.img!==f||e.content.img&&!e.$render._imgWidth){var h=e.$render;e.$cache.img=h.img=f=r.default.funcOrValue(e.content.img,e),e.$cache.text=h.text=s,"string"==typeof h.img&&(h.img=e.content.img=e.$canvas.imgLoader(h.img)),f&&f._complete===!1&&(f=!1),h.backgroundColor=e.$cache.backgroundColor,h.border=e.$cache.border,h.overflow=e.$cache.overflow,h.overflowX=e.$cache.overflowX,h.overflowY=e.$cache.overflowY,h.locate=e.$cache.locate,h.rotate=e.$cache.rotate,h.scale=e.$cache.scale,h.opacity=e.$cache.opacity,h.$moved=!1,h.childrenInside=(h.overflow||h.overflowX||h.overflowY)&&"visible"!==h.overflow,h.left=e.$cache.left,h.top=e.$cache.top,h.width=e.$cache.width,h.height=e.$cache.height,h._imgWidth=0,h._imgHeight=0,f&&f.width&&(h._imgWidth=f.width||0,h._imgHeight=f.height||0,h.cutLeft=e.$cache.cutLeft||0,h.cutTop=e.$cache.cutTop||0,h.cutWidth=e.$cache.cutWidth||h._imgWidth,h.cutHeight=e.$cache.cutHeight||h._imgHeight,h.cutLeft=Math.round(h.cutLeft),h.cutTop=Math.round(h.cutTop),h.cutWidth=Math.round(h.cutWidth),h.cutHeight=Math.round(h.cutHeight),h.width=h.width||h.cutWidth||0,h.height=h.height||h.cutHeight||0),"lt"===h.locate||("ld"===h.locate?h.top-=h.height:"rt"===h.locate?h.left-=h.width:"rd"===h.locate?(h.left-=h.width,h.top-=h.height):(h.left-=h.width>>1,h.top-=h.height>>1)),h.left=Math.round(h.left),h.top=Math.round(h.top),h.width=Math.round(h.width),h.height=Math.round(h.height);var d=h.settings={};if(d.globalAlpha=r.default.firstValuable(h.opacity,1),h.childrenInside&&(d.clip=!0),1!==e.$cache.scale){var p=h.scale,v=u(e);if(v){var g=v.$render.left+v.$render.width/2,$=v.$render.top+v.$render.height/2;h.left-=(g-h.left)*(p-1),h.top-=($-h.top)*(p-1),h.width*=p,h.height*=p}}if((h.fh||h.fv)&&(h.fh=h.fh||0,h.fv=h.fv||0,h.fx=h.fx||0,h.fy=h.fy||0,d.transform={fh:h.fh,fv:h.fv,fx:-(h.top+(h.height>>1))*h.fv+h.fx,fy:-(h.left+(h.width>>1))*h.fh+h.fy}),h.blend&&(d.globalCompositeOperation="string"==typeof h.blend?h.blend:blend[h.blend]),h.backgroundColor&&(d.fillRect=h.backgroundColor),h.border&&(d.line=h.border),h.mirrX?(d.translate=[$canvas.width,0],d.scale=[-1,1],h.left=$canvas.width-h.left-h.width,h.mirrY&&(d.translate=[$canvas.width,$canvas.height],d.scale=[-1,-1],h.top=$canvas.height-h.top-h.height)):h.mirrY&&(d.translate=[0,$canvas.height],d.scale=[1,-1],h.top=$canvas.height-h.top-h.height),h.rotate){h.rx=r.default.firstValuable(r.default.funcOrValue(e.$cache.rx,e),h.left+.5*h.width),h.ry=r.default.firstValuable(r.default.funcOrValue(e.$cache.ry,e),h.top+.5*h.height);var y=r.default.firstValuable(h.rx,h.left+.5*h.width),m=r.default.firstValuable(h.ry,h.top+.5*h.height);d.beforeRotate=[y,m],d.rotate=-h.rotate*Math.PI/180,d.rotate=Number(d.rotate.toFixed(4)),d.afterRotate=[-y,-m]}h.$insight=(0,l.default)(h.left,h.top,h.width,h.height,0,0,e.$canvas.width,e.$canvas.height,d.beforeRotate&&d.beforeRotate[0],d.beforeRotate&&d.beforeRotate[1],h.rotate)}e.children.forEach(function(e){e.recalculate(t)})}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(1),r=n(o);t.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();if(this.hooks[e])return r.default.execFuncs(this.hooks[e],this,t)}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(3);n(o);t.exports=function(){var t=this;if(this.$combine){if(9===this.$combine)return void(this.$combine=!1);this.content=this.$combine.content,this.children=this.$combine.children,Object.keys(this.style).forEach(function(e){t.style[e]=void 0}),Object.keys(this.$combine.style).forEach(function(e){t.style[e]=t.$combine.style[e]}),this.$combine=!1,this.recalculate(!0)}}},,,,function(t,e){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n={},o=[],r=0,a=function t(e,a,l){var s=l||{},c=t.cacheCanvas;if("object"===("undefined"==typeof e?"undefined":i(e))){var u=e;return s.callbackArgs=s.callbackArgs||[],void t(u.shift(),function(e){s.callbackArgs.push(e),u.length>1?t(u,a,s):t(u[0],function(t){s.callbackArgs.push(t),a(s.callbackArgs)},s)},l)}var f=e+"_"+JSON.stringify(l)+"_"+c;if(n[f])return a?void(n[f].width&&a?a(n[f]):setTimeout(function(){t(e,a,l)},100)):n[f];var h=new Image;h._complete=!1,s.block?(h.src=e,r++):0===r?h.src=e:o.push({imgObj:h,src:e}),n[f]=h;var d=void 0;return(s.canvas||s.alphaColor||c)&&(d=document.createElement("canvas"),d.width=d.height||0,n[f]=d),h.onload=function(t){if(h._complete=!0,"jpg"===h.src.substr(-3)||"jpeg"===h.src.substr(-3)||"bmp"===h.src.substr(-3)?h.$noAlpha=!0:0===h.src.indexOf("data:image/jpg;")&&(h.$noAlpha=!0),s.block&&(r--,0===r&&(o.forEach(function(t){t.imgObj.src=t.src}),o.splice(0))),d&&(s.canvas||s.alphaColor||c)){var e=d.getContext("2d");if(d.width=h.width,d.height=h.height,d.$noAlpha=h.$noAlpha,e.drawImage(h,0,0),s.alphaColor){for(var i=e.getImageData(0,0,h.width,h.height),n=0;n<i.data.length;n+=4){var l=i.data[n]+i.data[n+1]+i.data[n+2],u=1;i.data[n]<u&&i.data[n+1]<u&&i.data[n+2]<u&&(i.data[n+3]=Math.floor(l/255))}e.putImageData(i,0,0),d.$noAlpha=!1}h=d}a&&a(h)},h.onerror=function(){n[f]=h},d||h};a.cacheCanvas=!1,t.exports=a},function(t,e){"use strict";function i(t,e){if(t&&t.match(/^data:/))return void(e&&e(t));if(o[t])return void(o[t]!==n?e(o[t]):setTimeout(function(){i(t,e)},100));o[t]=n;var r=new XMLHttpRequest;r.onload=function(){var i=new FileReader;i.onloadend=function(){o[t]=i.result,e&&e(i.result)},i.readAsDataURL(r.response)},r.open("GET",t),r.responseType="blob",r.send()}var n="processing",o={};t.exports=i},,,,,,,,,,,,,,,,,,,,,,function(t,e){"use strict";var i=function(t){setTimeout(t,1e3/60)},n="undefined"!=typeof requestAnimationFrame?requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||i:i;t.exports=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=(Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},i(3)),r=(n(o),i(1));n(r)},,,,,,,,function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(3),r=n(o),a=i(122),l=n(a),s=i(59),c=n(s),u=i(162),f=n(u),h=i(1),d=n(h),p=i(20),v=n(p),g=i(36),$=n(g),y=i(161),m=n(y),b=i(163),x=n(b),w=i(7),k=n(w),T=i(94),O=(n(T),{painter:l.default,imgLoader:$.default,imgPretreat:m.default,multlineText:x.default,transition:v.default,tick:c.default,utils:d.default,mirror:f.default,class:{sprite:k.default},sprite:k.default,$version:r.default.version,env:"production"});O.extend=function(t){var e=O.sprite.prototype.$extendList;e.indexOf(t)>=0||e.push(t)},O.use=function(t){var e=O.painter.prototype.$extendList;e.indexOf(t)>=0||(t.onUse&&t.onUse(O),e.push(t))},O.component=function(t,e){t(O,e)};var M="undefined"!=typeof window;M&&(window.Easycanvas?console.warn("[Easycanvas] already loaded, it should be loaded only once."):window.Easycanvas=O),t.exports=O},,,,,function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(110),r=n(o),a=i(111),l=n(a),s=i(108),c=n(s),u=i(121),f=(n(u),{$render:l.default,$eventHandler:c.default,$perPaint:r.default});t.exports=f},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o,r=i(1),a=n(r),l=i(3),s=(n(l),"undefined"!=typeof wx||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)),c=function(t){return t.sort(function(t,e){return a.default.funcOrValue(a.default.firstValuable(t.events.eIndex,t.style.zIndex),t)<a.default.funcOrValue(a.default.firstValuable(e.events.eIndex,e.style.zIndex),e)?1:-1})},u=function(t,e){var i=t.getRect();return a.default.pointInRect(e.canvasX,e.canvasY,i.left,i.left+i.width,i.top,i.top+i.height)},f=function t(e,i,n){if(e&&e.length&&!i.$stopPropagation)for(var o=e.length,r=0;r<o;r++){var l=e[r];if(a.default.funcOrValue(l.style.visible,l)!==!1&&(!l.events||"none"!==l.events.pointerEvents)){if(u(l,i)){var s=l.events.interceptor;if(s){var f=a.default.firstValuable(s.call(l,i),i);if(!f||f.$stopPropagation)return}}var h=l.$combine&&l.$combine.children?l.$combine.children:l.children;if(h.length&&t(c(h.filter(function(t){return a.default.funcOrValue(a.default.firstValuable(t.events.eIndex,t.style.zIndex),t)>=0})),i,n),i.$stopPropagation)break;if(u(l,i))return d(l,i,n),void i.stopPropagation();h.length&&t(c(h.filter(function(t){return!(a.default.funcOrValue(a.default.firstValuable(t.events.eIndex,t.style.zIndex),t)>=0)})),i,n)}}},h=function(t,e){var i=this;this.$extendList.forEach(function(n){n.onEvent&&n.onEvent.call(i,t,e)})},d=function t(e,i,n){n&&n.push(e),e.events[i.type]&&(e.events[i.type].call(e,i),i.$stopPropagation)||(e.$parent?t(e.$parent,i,n):e.$canvas&&!i.$stopPropagation&&(t(e.$canvas,i),i.stopPropagation()))},p={x:0,y:0,timeStamp:0};o=function(t,e){var i=this,n=void 0,r=void 0,l=1,u=1;if(!e){!t.layerX&&t.targetTouches&&t.targetTouches[0]?(n=t.targetTouches[0].pageX-t.currentTarget.offsetLeft,r=t.targetTouches[0].pageY-t.currentTarget.offsetTop):!t.layerX&&t.changedTouches&&t.changedTouches[0]?(n=t.changedTouches[0].pageX-t.currentTarget.offsetLeft,r=t.changedTouches[0].pageY-t.currentTarget.offsetTop):(n=t.layerX,r=t.layerY);var d=!1;if(this.$dom.getBoundingClientRect){var v=this.$dom.getBoundingClientRect();l=Math.floor(v[d?"height":"width"])/this.width,u=Math.floor(v[d?"width":"height"])/this.height}}var g=e||{type:t.type,canvasX:n/l,canvasY:r/u,event:t};if(s&&i.fastclick){if("click"===g.type&&!g.$fakeClick)return;"touchstart"===g.type?(p.x=g.canvasX,p.y=g.canvasY,p.timeStamp=Date.now()):"touchend"===g.type&&Math.abs(p.x-g.canvasX)<30&&Math.abs(p.y-g.canvasY)<30&&Date.now()-p.timeStamp<200&&o.call(this,null,{$fakeClick:!0,type:"click",canvasX:p.x,canvasY:p.y,event:t})}if(g.stopPropagation=function(){g.$stopPropagation=!0},!i.events.interceptor||(g=a.default.firstValuable(i.events.interceptor.call(i,g),g),g&&!g.$stopPropagation)){var $=[];if(f(c(i.children),g,$),h.call(i,g,$),("mousemove"===g.type||"touchmove"===g.type)&&i.eLastMouseHover&&$.indexOf(i.eLastMouseHover)===-1){var y=i.eLastMouseHover.events.mouseout||i.eLastMouseHover.events.touchout;y&&y.call(i.eLastMouseHover,g)}if(i.eLastMouseHover=$[0],!$.length&&i.eLastMouseHover){var m=i.eLastMouseHover.events.mouseout;m&&m.call(i.eLastMouseHover,g),i.eLastMouseHover=null}var b=i.events[g.type];return b&&!g.$stopPropagation&&b.call(i,g)?(i.eHoldingFlag=!1,!0):void 0}},t.exports=o},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(1),r=n(o);t.exports=function(t,e,i){e.filter(function(t){var e=r.default.funcOrValue(t.style.zIndex,t);return i<0?e<0:e>=0}).sort(function(t,e){var i=r.default.funcOrValue(t.style.zIndex,t),n=r.default.funcOrValue(e.style.zIndex,e);return i===n?0:i>n?1:-1}).forEach(function(e,i){t.$perPaint.call(t,e,i)})}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(1),r=n(o),a=i(3),l=(n(a),i(109)),s=n(l),c=i(11),u=(n(c),function(t){var e=/[^\u4e00-\u9fa5]/;return!e.test(t)}),f=function(){var t=this;this.$canvas.$extendList.forEach(function(e){e.onPaint&&e.onPaint.call(t)})};t.exports=function(t,e){if(t.$rendered=!1,t.$cache.visible!==!1){var i=this;f.call(t);var n=t.$render,o=n.text,a=n.img,l=n.childrenInside;if(!(a||o||n.backgroundColor||n.border||l)){t.$rendered=void 0;var c=t.children;return void(c.length&&((0,s.default)(i,c,-1),(0,s.default)(i,c,1)))}var h=t.children,d=n.settings;if(d.clip){var p={$id:t.$id,type:"clip",props:n};p.$origin=t,i.$children.push(p)}if(h.length&&(0,s.default)(i,h,-1),d.fillRect){t.$rendered=!0;var v={$id:t.$id,type:"fillRect",settings:d,props:n};v.$origin=t,i.$children.push(v)}if(n._imgWidth&&0!==n.opacity&&n.cutWidth&&n.cutHeight){t.$rendered=!0;var g={$id:t.$id,type:"img",settings:d,img:a,props:n};g.$origin=t,i.$children.push(g)}if(o){n.textFont=t.$cache.textFont,n.color=t.$cache.color,n.textAlign=t.$cache.textAlign,n.textVerticalAlign=t.$cache.textVerticalAlign,t.$rendered=!0;var $=n.left,y=n.top,m=n.align||n.textAlign||"left",b=n.textFont||"14px Arial",x=parseInt(b),w="top",k=n.lineHeight||x;if("center"===m?$+=n.width/2:"right"===m&&($+=n.width),"top"===n.textVerticalAlign?w="top":"bottom"===n.textVerticalAlign?(w="bottom",y+=n.height):"middle"===n.textVerticalAlign&&(y+=n.height>>1,w="middle"),"string"==typeof o||"number"==typeof o)i.$children.push({$id:t.$id,type:"text",settings:d,props:{left:$,top:y,content:String(o),fontsize:x,align:m,baseline:w,font:b,color:n.color,type:n.textToppe},$origin:t});else if(o.length)o.forEach(function(e){i.$children.push({$id:t.$id,type:"text",settings:d,props:{left:$+r.default.funcOrValue(e.left,t),top:y+r.default.funcOrValue(e.top,t),content:r.default.funcOrValue(e.content,t),fontsize:x,baseline:w,align:m,font:b,color:n.color,type:n.textToppe},$origin:t})});else if("multline-text"===o.toppe){var T=o.text.split(/\t|\n/),O=[];T.forEach(function(t,e){t=String.prototype.trim.apply(t),o.config.start&&(t=t.replace(o.config.start,""));for(var i=0,r=n.width;t.length&&i<t.length;)r<=0&&(r=n.width,O.push(t.substr(0,i)),t=t.substr(i),i=0),i++,r-=x*(u(t[i])?1.05:.6);(t||e)&&O.push(t)}),O.forEach(function(e){i.$children.push({$id:t.$id,type:"text",settings:d,props:{left:$,top:y,fontsize:x,content:e,baseline:w,align:m,font:b,color:n.color,type:n.textToppe},$origin:t}),y+=k||x})}}if(a||o||(t.$rendered=void 0),h.length&&(0,s.default)(i,h,1),d.clip){var M={$id:t.$id,type:"clipOver",props:n};M.$origin=t,i.$children.push(M)}if(d.line){t.$rendered=!0;var A={$id:t.$id,type:"line",settings:d,props:n};A.$origin=t,i.$children.push(A)}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(1),r=n(o),a=function(t,e){var i=this,n=!1;return this.$extendList.forEach(function(o){if(o.onRender){var r=o.onRender.call(i,t,e);r&&(n=r)}}),n};t.exports=function(t,e,i){var n=this,o=e||n.$children;i||n.webgl||(o=o.filter(function(t){return t.props.$insight!==!1})),o.forEach(function(e,i){var l=e.props,s=void 0;if(l&&"clip"!==e.type&&"text"!==e.type&&"clipOver"!==e.type&&"line"!==e.type&&(s=l.width*l.height,s>4e4&&!e.settings.transform&&!e.settings.rotate))for(var c=o.length,u=i+1;u<c;u++){var f=o[u];if(!f.$cannotCover)if("clip"!==f.type){var h=f.settings;if(f.type&&"img"===f.type||"fillRect"===f.type&&h.fillRect.indexOf("rgba")===-1){var d=f.props;if(d.width*d.height<4e4)f.$cannotCover=!0;else if(!(d.width*d.height<s))if(!f.img||f.img.$noAlpha){if(1!==h.globalAlpha||h.globalCompositeOperation||h.transform||h.rotate)f.$cannotCover=!0;else if(r.default.pointInRect(l.left,l.top,d.left,d.left+d.width,d.top,d.top+d.height)&&r.default.pointInRect(l.left+l.width,l.top+l.height,d.left,d.left+d.width,d.top,d.top+d.height))return}else f.$cannotCover=!0}else f.$cannotCover=!0}else for(;u<c&&"clipOver"!==o[++u].type;);}var p=e.settings||{};if(!a.call(n,e,p)){var v=t||n.$paintContext;"clip"===e.type&&(v.save(),v.beginPath(),v.moveTo(l.left,l.top),v.lineTo(l.left+l.width,l.top),v.lineTo(l.left+l.width,l.top+l.height),v.lineTo(l.left,l.top+l.height),v.lineTo(l.left,l.top),v.closePath(),v.clip());var g=!1;if(p.globalCompositeOperation&&(g||(v.save(),g=!0),v.globalCompositeOperation=p.globalCompositeOperation),v.$globalAlpha!==p.globalAlpha&&(v.$globalAlpha=v.globalAlpha=p.globalAlpha),p.translate&&(g||(v.save(),g=!0),v.translate(p.translate[0]||0,p.translate[1]||0)),p.rotate&&(g||(v.save(),g=!0),v.translate(p.beforeRotate[0]||0,p.beforeRotate[1]||0),v.rotate(p.rotate||0),v.translate(p.afterRotate[0]||0,p.afterRotate[1]||0)),p.scale&&(g||(v.save(),g=!0),v.scale(p.scale[0]||1,p.scale[1]||1)),p.transform&&(g||(v.save(),g=!0),v.transform(1,p.transform.fh,p.transform.fv,1,p.transform.fx,p.transform.fy)),"img"===e.type)v.drawImage(e.img,l.cutLeft,l.cutTop,l.cutWidth,l.cutHeight,l.left,l.top,l.width,l.height);else if("text"===e.type&&l.content)v.font=l.font,v.fillStyle=l.color||"white",v.textAlign=l.align,v.textBaseline=l.baseline,v[l.type||"fillText"](l.content,l.left,l.top);else if("fillRect"===e.type)v.fillStyle=p.fillRect,v.fillRect(l.left,l.top,l.width,l.height);else if("line"===e.type){v.beginPath();var $=l.border.substr(l.border.indexOf(" "))||"black";v.strokeStyle=$,v.lineWidth=l.border.split(" ")[0]||1,v.moveTo(l.left,l.top),v.lineTo(l.left+l.width,l.top),v.lineTo(l.left+l.width,l.top+l.height),v.lineTo(l.left,l.top+l.height),v.closePath(),v.stroke()}else"clipOver"===e.type&&v.restore();g&&(v.$globalAlpha=!1,v.restore())}})}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(116),r=n(o),a=i(120),l=n(a),s=i(113),c=n(s),u=i(18),f=n(u),h=i(114),d=n(h),p=i(19),v=n(p),g=i(115),$=n(g),y=i(117),m=n(y),b=i(118),x=n(b),w=i(119),k=(n(w),i(7)),T=n(k),O={start:l.default,paint:c.default,add:T.default.prototype.add,remove:r.default,register:$.default,clear:f.default,setFpsHandler:m.default,setMaxFps:x.default,pause:d.default,on:T.default.prototype.on,off:T.default.prototype.off,trigger:T.default.prototype.trigger,broadcast:T.default.prototype.broadcast,nextTick:v.default,getAllChildren:T.default.prototype.getAllChildren};t.exports=O},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(1),r=n(o),a=i(3);n(a);t.exports=function(){if(!(this.$pausing||this.$inBrowser&&document.hidden)){var t=this;r.default.execFuncs(t.hooks.beforeTick,t,[t.$rafTime]),
t.children.forEach(function(t){t.recalculate()}),t.$freezing||(t.$lastTickChildren=t.$children,t.$children=[],this.children.sort(function(t,e){var i=r.default.funcOrValue(t.style.zIndex,t),n=r.default.funcOrValue(e.style.zIndex,e);return i===n?0:i>n?1:-1}).forEach(function(e,i){t.$perPaint(e,i)})),t.$paintContext.clearRect?(t.$paintContext.clearRect(0,0,this.width,this.height),t.$render()):t.$render(),r.default.execFuncs(t.hooks.ticked,t,[t.$rafTime]),t.hooks.nextTick&&(r.default.execFuncs(t.hooks.nextTick,t,[t.$rafTime]),delete t.hooks.nextTick)}}},function(t,e){"use strict";t.exports=function(t){this.$pausing=void 0===t||t}},function(t,e,i){"use strict";var n=function(t){var e=this;this.$extendList.forEach(function(i){i.onCreate&&i.onCreate.call(e,t)})};t.exports=function(t,e){var i=this,o=e||{};t=this.$dom=t||this.$dom;for(var r in o)this[r]=o[r];if(this.name=o.name||t.id||t.classList&&t.classList[0]||"Unnamed",this.$inBrowser="undefined"!=typeof window,o.fullScreen&&"undefined"!=typeof document&&(t.width=t.style.width=document.body.clientWidth||document.documentElement.clientWidth,t.height=t.style.height=document.body.clientHeight||document.documentElement.clientHeight),t.width=this.width=this.width||o.width||t.width,t.height=this.height=this.height||o.height||t.height,this.events=o.events||{},this.hooks=o.hooks||{},this.$inBrowser){var a=["contextmenu","mousewheel","click","dblclick","mousedown","mouseup","mousemove","touchstart","touchend","touchmove"];a.forEach(function(e){t.addEventListener(e,i.$eventHandler.bind(i))})}return n.call(this,o),this.$paintContext=this.$paintContext||t.getContext("2d"),this}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(1),r=n(o);t.exports=function(t,e){r.default.execFuncs(t.hooks.beforeRemove,t,t.$tickedTimes++),t.style.visible=!1,t.$removing=!0,t.$parent?t.$parent.children=t.$parent.children.filter(function(t){return t.$removing!==!0}):this.children=this.children.filter(function(t){return t.$removing!==!0}),t.$canvas&&(t.$canvas=void 0,t.$parent=void 0,t.$tickedTimes=void 0,t.$cache={},t.$rendered=!1,r.default.execFuncs(t.hooks.removed,t,t.$tickedTimes)),e&&this.children.splice(this.children.indexOf(t),1)}},function(t,e){"use strict";t.exports=function(t){this.fpsHandler=t}},function(t,e){"use strict";t.exports=function(t){this.maxFps=t||-1}},function(t,e,i){"use strict"},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(59),r=n(o),a=i(20),l=n(a),s=function(){var t=Date.now();l.default.$lastPaintTime=this.$nextTickTime=t,t-this.fpsCalculateTime>=1e3&&(this.fpsCalculateTime=t,this.fpsHandler&&this.fpsHandler.call(this,this.fps),this.lastFps=this.fps,this.fps=0),(0,r.default)(c.bind(this))},c=function(t){if(this.$rafTime=t,s.call(this),this.maxFps>0&&this.maxFps<60){if(time-this.$lastPaintTime<=1e3/this.maxFps)return;this.$lastPaintTime=time-(time-this.$lastPaintTime)%(1e3/this.maxFps)}else this.$lastPaintTime=Date.now();this.fps++,this.paint()};t.exports=function(){return this.fpsCalculateTime=Date.now(),s.call(this),this}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(1),r=(n(o),i(3));n(r);t.exports=function(){}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(112),r=n(o),a=i(107),l=n(a),s=i(123),c=n(s),u=i(36),f=n(u),h=function(t){this.imgLoader=f.default;for(var e in c.default)this[e]=this[e]||JSON.parse(JSON.stringify(c.default[e]));t&&(t.el||(t={el:t}),t.el&&this.register("string"==typeof t.el?document.querySelector(t.el):t.el,t))};h.prototype.$extendList=[];for(var d in l.default)Object.prototype.hasOwnProperty.call(l.default,d)&&(h.prototype[d]=l.default[d]);for(var p in r.default)Object.prototype.hasOwnProperty.call(r.default,p)&&(h.prototype[p]=r.default[p]);t.exports=h},function(t,e){"use strict";var i={$dom:null,$paintContext:null,$nextTickTime:0,$lastPaintTime:0,$pausing:!1,$freezing:!1,name:"",fps:0,lastFps:0,fpsCalculateTime:0,fpsHandler:null,width:0,height:0,events:{click:null},children:[],eHoldingFlag:!1,eLastMouseHover:null,maxFps:-1,$flags:{}};t.exports=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var o=i(36),r=n(o),a=i(37),l=n(a);t.exports=function(t,e){var i;return(0,l.default)(t,function(t){return(0,r.default)(t,function(t){for(var n=t.width,o=t.height,r=t.getContext("2d").getImageData(0,0,n,o),a=r.data,l=a.length-1;l>=0;l-=4)if(e&&e.conversion){var s=e.conversion({r:a[l-3],g:a[l-2],b:a[l-1],a:a[l]},(l+1>>2)%n,Math.floor((l+1>>2)/n));a[l-3]=s.r,a[l-2]=s.g,a[l-1]=s.b,a[l-0]=s.a}t.getContext("2d").clearRect(0,0,n,o),t.getContext("2d").putImageData(r,0,0),i=t},{canvas:!0,cacheFlag:Math.random()})}),function(){return i}}},function(t,e){"use strict";t.exports=function(t){var e=t.width,i=t.height,n=document.createElement("canvas");n.width=e,n.height=i;var o=n.getContext("2d");o.scale(1,-1),o.translate(0,-i),o.drawImage(t,0,0);var r=o.getImageData(0,0,e,i);return{canvas:o,img:r}}},function(t,e){"use strict";t.exports=function(t,e){return{type:"multline-text",text:t,config:e}}}])});