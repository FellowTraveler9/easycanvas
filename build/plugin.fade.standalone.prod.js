!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var r in a)("object"==typeof exports?exports:e)[r]=a[r]}}(this,function(){return function(e){function t(r){if(a[r])return a[r].exports;var o=a[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}({0:function(e,t,a){e.exports=a(43)},1:function(e,t){"use strict";e.exports={funcOrValue:function(e,t){if("function"==typeof e){var a=e.call(t);return a}return e},execFuncs:function(e,t,a){"function"==typeof e?e.apply(t,a):Array.prototype.isPrototypeOf(e)&&e.forEach(function(e){e&&e.apply(t)})},blend:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],pointInRect:function(e,t,a,r,o,n){return!(e<a||e>r||t<o||t>n)},firstValuable:function(e,t){return"undefined"==typeof e?t:e}}},43:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=a(1),n=r(o),i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAJkSURBVHjaxJeJbusgEEW94S1L//83X18M2MSuLd2pbqc4wZGqRLrKBsyZhQHny7Jk73xVL8xpVhWrcmiB5lX+6GJ5YgQ2owbAm8oIwH1VgKZUmGcRqKGGPgtEQQAzGR8hQ59fAmhJHSAagigJ4E7GPWRXOYC6owAd1JM6wDQPADyMWUqZRMqmAojHp1Vn6EQQEgUNMJLnUjMyJsM49wygBkAPw9dVFwXRkncCIIW3GRgoTQUZn6HxCMAFEFd8TwEQ78X4rHbILoAUmeT+RFG4UhQ6MiIAE4W/UsYFjuVjAIa2nIY4q1R0GFtQWG3E84lqw2GO2QOoCKBVu0BAPgDSU0eUDjjQenNkV/AW/pWChhpMTelo1a64AOKM30vk18GzTHXCNtI/Knz3DFBgsUqBGIjTInXRY1yA9xkVoqW5tVq3pDR9A0hfF5BSARmVnh7RMDCaIdcNgbPBkgzn1Bu+SfIEFSpSBmkxyrMicb0fAEuCZrWnN89veA/4XcakrPcjBWzkTuLjlbfTQPOlBhz+HwkqqPXmPQDdrQItxE1moGof1S74j/8txk8EHhTQrAE8qlwfqS5yukm1x/rAJ9Jiaa6nyATqD78aUVBhFo8b1V4DdTXdCW+IxA1zB4JhiOhZMEWO1HqnvdoHZ4FAMIhV9REF8FiUm0jsYPEJx/Fm/N8OhH90HI9YRHesWbXXZwAShU8qThe7H8YAuJmw5yOd989uRINKRTJAhoF8jbqrHKfeCYdIISZfSq26bk/K+yO3YvfKrVgiwQBHnwt8ynPB25+M8hceTt/ybPhnryJ78+tLgAEAuCFyiQgQB30AAAAASUVORK5CYII=",s=new Image;s.src=i;var l={drip:function(e,t,a){t.clearRect(0,0,this.style.tw,this.style.th),t.globalCompositeOperation="source-over",t.globalAlpha=1,t.drawImage(s,(this.style.tw>>1)-(this.style.tw>>1)*e.progress*2,(this.style.th>>1)-(this.style.th>>1)*e.progress*2,this.style.tw*e.progress*2,this.style.th*e.progress*2),t.globalCompositeOperation="source-out",t.globalAlpha=Math.max(1-e.progress,0),t.drawImage(n.default.funcOrValue(this.$fade.originImg,this),0,0,this.style.tw,this.style.th)},flow:function(e,t,a){var r=this;if(!e.particleData.length)for(var o=0;o<this.style.tw/50;o++)e.particleData.push({x:-100+50*o+40*Math.random()-20,y:200*-Math.random()-300,extra:20*Math.random()});a.fillStyle="rgba(0, 0, 0, 0.01)",a.fillRect(0,0,this.style.tw,this.style.th),e.particleData.forEach(function(t){a.drawImage(s,t.x,t.y,200,200),t.y+=1/e.ticks*r.style.th+t.extra}),t.globalCompositeOperation="source-over",t.clearRect(0,0,this.style.tw,this.style.th),t.drawImage(a.$canvas,0,0),t.globalCompositeOperation="source-out",t.drawImage(n.default.funcOrValue(this.$fade.originImg,this),0,0,this.style.tw,this.style.th)}};window.Easycanvas.class.sprite.prototype.fade=function(e){var t=e.type,a=e.ticks,r=this;r.$fade||(r.$fade={originImg:r.content.img,filterCanvas:document.createElement("canvas"),middlewareCanvas:document.createElement("canvas")},r.$fade.filterCanvas.width=r.$fade.middlewareCanvas.width=r.style.tw,r.$fade.filterCanvas.height=r.$fade.middlewareCanvas.height=r.style.th,r.$fade.filterCxt=r.$fade.filterCanvas.getContext("2d"),r.$fade.middlewareCxt=r.$fade.middlewareCanvas.getContext("2d"),r.$fade.filterCxt.$canvas=r.$fade.filterCanvas,r.$fade.middlewareCxt.$canvas=r.$fade.middlewareCanvas);var o={ticks:0,progress:0,callback:!1,particleData:[]};o.ticks=a||60;var i=document.createElement("canvas");i.width=n.default.funcOrValue(r.style.tw,r),i.height=n.default.funcOrValue(r.style.th,r);var s=i.getContext("2d");return s.drawImage(r.$canvas.$dom,r.$cache.tx,r.$cache.ty),r.$fade.originImg=i,r.children=[],r.content.img=r.$fade.filterCanvas,r.on("beforeTick",function e(){if(r.$fade)return l[t||"drip"].call(r,o,r.$fade.filterCxt,r.$fade.middlewareCxt),o.progress>1?(r.off("beforeTick",e),delete r.$fade,void(o.callback&&r.$canvas.nextTick(function(){o.callback(r)}))):void(o.progress+=1/(a||100))}),{then:function(e){o.callback=e}}}}})});