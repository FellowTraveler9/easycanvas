!function(t,e){for(var s in e)t[s]=e[s]}(exports,function(t){var e={};function s(i){if(e[i])return e[i].exports;var h=e[i]={i,l:!1,exports:{}};return t[i].call(h.exports,h,h.exports,s),h.l=!0,h.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var h in t)s.d(i,h,function(e){return t[e]}.bind(null,h));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=62)}({62:function(t,e,s){t.exports=s(63)},63:function(t,e,s){"use strict";var i,h=new Image;h.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAJkSURBVHjaxJeJbusgEEW94S1L//83X18M2MSuLd2pbqc4wZGqRLrKBsyZhQHny7Jk73xVL8xpVhWrcmiB5lX+6GJ5YgQ2owbAm8oIwH1VgKZUmGcRqKGGPgtEQQAzGR8hQ59fAmhJHSAagigJ4E7GPWRXOYC6owAd1JM6wDQPADyMWUqZRMqmAojHp1Vn6EQQEgUNMJLnUjMyJsM49wygBkAPw9dVFwXRkncCIIW3GRgoTQUZn6HxCMAFEFd8TwEQ78X4rHbILoAUmeT+RFG4UhQ6MiIAE4W/UsYFjuVjAIa2nIY4q1R0GFtQWG3E84lqw2GO2QOoCKBVu0BAPgDSU0eUDjjQenNkV/AW/pWChhpMTelo1a64AOKM30vk18GzTHXCNtI/Knz3DFBgsUqBGIjTInXRY1yA9xkVoqW5tVq3pDR9A0hfF5BSARmVnh7RMDCaIdcNgbPBkgzn1Bu+SfIEFSpSBmkxyrMicb0fAEuCZrWnN89veA/4XcakrPcjBWzkTuLjlbfTQPOlBhz+HwkqqPXmPQDdrQItxE1moGof1S74j/8txk8EHhTQrAE8qlwfqS5yukm1x/rAJ9Jiaa6nyATqD78aUVBhFo8b1V4DdTXdCW+IxA1zB4JhiOhZMEWO1HqnvdoHZ4FAMIhV9REF8FiUm0jsYPEJx/Fm/N8OhH90HI9YRHesWbXXZwAShU8qThe7H8YAuJmw5yOd989uRINKRTJAhoF8jbqrHKfeCYdIISZfSq26bk/K+yO3YvfKrVgiwQBHnwt8ynPB25+M8hceTt/ybPhnryJ78+tLgAEAuCFyiQgQB30AAAAASUVORK5CYII=";var a={drip:function(t,e,s){var a=t.subtype||1;e.clearRect(0,0,this.style.width,this.style.height),e.globalCompositeOperation="source-over",e.globalAlpha=1,1===a&&e.drawImage(h,(this.style.width>>1)-(this.style.width>>1)*t.progress*2,(this.style.height>>1)-(this.style.height>>1)*t.progress*2,this.style.width*t.progress*2,this.style.height*t.progress*2),1!==a&&e.drawImage(h,(this.style.width>>1)-(this.style.width>>1)*(1-t.progress)*2,(this.style.height>>1)-(this.style.height>>1)*(1-t.progress)*2,this.style.width*(1-t.progress)*2,this.style.height*(1-t.progress)*2),e.globalCompositeOperation=1===a?"source-out":"source-in",e.globalAlpha=Math.max(1-t.progress,0),e.drawImage(i.funcOrValue(this.$fade.originImg,this),0,0,this.style.width,this.style.height)},door:function(t,e,s){var h=t.subtype||1,a=0,r=0;1===h?a=this.style.width/2:2===h?(a=this.style.width,r=this.style.height/2):3===h?(a=this.style.width/2,r=this.style.height):4===h&&(r=this.style.height/2),e.clearRect(0,0,this.style.width,this.style.height),e.save(),e.translate(a,r),e.rotate(90*(h<3?1:-1)*3.14/180*t.progress),e.translate(-a,-r),e.drawImage(i.funcOrValue(this.$fade.originImg,this),0,0,a||this.style.width,this.style.height-r||r,0,0,a||this.style.width,this.style.height-r||r),e.restore(),e.save(),e.translate(a,r),e.rotate(90*(h<3?-1:1)*3.14/180*t.progress),e.translate(-a,-r),e.drawImage(i.funcOrValue(this.$fade.originImg,this),h<4?this.style.width-a:0,h<3?r:h<4?0:r,this.style.width-a||a,this.style.height-r||r,h<4?this.style.width-a:0,h<3?r:h<4?0:r,this.style.width-a||a,this.style.height-r||r),e.restore()},rotate:function(t,e,s){var h=t.subtype||1,a=0,r=0;1===h?a=this.style.width:2===h?(a=this.style.width,r=this.style.height):3===h&&(r=this.style.height),e.clearRect(0,0,this.style.width,this.style.height),e.save(),e.translate(a,r),e.rotate(1.57*t.progress),e.translate(-a,-r),e.drawImage(i.funcOrValue(this.$fade.originImg,this),0,0,this.style.width,this.style.height),e.restore()},print:function(t,e,s){e.drawImage(i.funcOrValue(this.$fade.originImg,this),0,0);var h=t.subtype||1;1===h&&e.clearRect(0,0,this.style.width,t.progress*this.style.height),2===h&&e.clearRect(0,0,t.progress*this.style.width,this.style.height),3===h&&e.clearRect(0,(1-t.progress)*this.style.height,this.style.width,this.style.height),4===h&&e.clearRect((1-t.progress)*this.style.width,0,this.style.width,this.style.height)},"switch":function(t,e,s){var h=1.3*t.progress;0===h&&(s.fillStyle="rgba(0, 0, 0, 1)",s.globalAlpha=.2);var a=t.subtype||1;1===a&&s.fillRect(0,0,this.style.width,h*this.style.height),2===a&&s.fillRect(0,0,h*this.style.width,this.style.height),3===a&&s.fillRect(0,(1-h)*this.style.height,this.style.width,this.style.height),4===a&&s.fillRect((1-h)*this.style.width,0,this.style.width,this.style.height),e.globalCompositeOperation="source-over",e.clearRect(0,0,this.style.width,this.style.height),e.drawImage(s.$canvas,0,0),e.globalCompositeOperation="source-out",e.drawImage(i.funcOrValue(this.$fade.originImg,this),0,0)},sweep:function(t,e,s){if(!t.particleData.length)for(var a=t.subtype||1,r=this.style.height/this.style.width,l=0;l<this.style.width/50;l++)1===a&&t.particleData.push({x:50*l+Math.random()*this.style.width/5/2-this.style.width/5,y:50*r*l+Math.random()*this.style.height/5/2-this.style.height/5,size:100-l}),2===a&&t.particleData.push({x:this.style.width-(50*l+Math.random()*this.style.width/5/2-this.style.width/5),y:50*r*l+Math.random()*this.style.height/5/2-this.style.height/5,size:100-l}),3===a&&t.particleData.push({x:this.style.width/2,y:50*r*l+Math.random()*this.style.height/5/2-this.style.height/5,size:100-l}),4===a&&t.particleData.push({x:50*r*l+Math.random()*this.style.width/5/2-this.style.width/5,y:this.style.height/2,size:100-l});s.fillStyle="rgba(0, 0, 0, 0.005)",s.fillRect(0,0,this.style.width,this.style.height),s.globalAlpha=t.progress*t.progress,t.particleData.forEach(function(e,i){e.size>t.size+t.minsize||(s.drawImage(h,e.x-e.size/2,e.y-e.size/2,e.size,e.size),e.size=t.progress*t.size*1.3)}),e.globalCompositeOperation="source-over",e.clearRect(0,0,this.style.width,this.style.height),e.drawImage(s.$canvas,0,0),e.globalCompositeOperation="source-out",e.drawImage(i.funcOrValue(this.$fade.originImg,this),0,0,this.style.width,this.style.height)},flow:function(t,e,s){var a=this;if(!t.particleData.length)for(var r=0;r<this.style.width/50;r++)t.particleData.push({x:50*r-100+40*Math.random()-20,y:200*-Math.random()-300,extra:20*Math.random()});s.fillStyle="rgba(0, 0, 0, 0.01)",s.fillRect(0,0,this.style.width,this.style.height),t.particleData.forEach(function(e){s.drawImage(h,e.x,e.y,200,200),e.y+=1/t.ticks*a.style.height+e.extra}),e.globalCompositeOperation="source-over",e.clearRect(0,0,this.style.width,this.style.height),e.drawImage(s.$canvas,0,0),e.globalCompositeOperation="source-out",e.drawImage(i.funcOrValue(this.$fade.originImg,this),0,0,this.style.width,this.style.height)},spiral:function(t,e,s){t.subtype;s.translate(this.style.width/2,this.style.height/2),s.rotate(360/t.ticks*3*3.14/180*t.progress),s.translate(-this.style.width/2,-this.style.height/2),s.globalAlpha=t.progress*t.progress,s.fillStyle="rgba(0, 0, 0, 1)",s.fillRect(this.style.width/2-t.size*t.progress/2,this.style.height/2-t.size*t.progress/2,t.size*t.progress,t.size*t.progress),e.globalCompositeOperation="source-over",e.clearRect(0,0,this.style.width,this.style.height),e.drawImage(s.$canvas,0,0),e.globalCompositeOperation="source-out",e.drawImage(i.funcOrValue(this.$fade.originImg,this),0,0)}};t.exports=function(t){for(var e in i=t.utils,t.Sprite.prototype.fade=function(t){var e=t.type,s=t.ticks,h=t.subtype,r=this;r.$fade||(r.$fade={originImg:r.content.img,filterCanvas:document.createElement("canvas"),middlewareCanvas:document.createElement("canvas")},r.$fade.filterCanvas.width=r.$fade.middlewareCanvas.width=r.style.width,r.$fade.filterCanvas.height=r.$fade.middlewareCanvas.height=r.style.height,r.$fade.filterCxt=r.$fade.filterCanvas.getContext("2d"),r.$fade.middlewareCxt=r.$fade.middlewareCanvas.getContext("2d"),r.$fade.filterCxt.$canvas=r.$fade.filterCanvas,r.$fade.middlewareCxt.$canvas=r.$fade.middlewareCanvas);var l={ticks:0,progress:0,callback:!1,particleData:[]};l.ticks=s||60,l.subtype=h,l.size=Math.max(r.style.width,r.style.height),l.minsize=Math.min(r.style.width,r.style.height);var o=document.createElement("canvas");return o.width=i.funcOrValue(r.style.width,r),o.height=i.funcOrValue(r.style.height,r),o.getContext("2d").drawImage(r.$canvas.$dom,r.$props.tx,r.$props.ty,r.$props.tw,r.$props.th,0,0,r.$props.tw,r.$props.th),r.$fade.originImg=o,r.children=[],r.content.img=r.$fade.filterCanvas,r.on("beforeTick",function n(){if(r.$fade){if(a[e||"drip"].call(r,l,r.$fade.filterCxt,r.$fade.middlewareCxt),l.progress>1)return r.off("beforeTick",n),r.style.opacity=0,delete r.$fade,void(l.callback&&r.$canvas.nextTick(function(){l.callback.call(r)}));l.progress+=1/(s||100)}}),{then:function(t){l.callback=t}}},t.Sprite.prototype.fade.types=[],a)t.Sprite.prototype.fade.types.push(e)}}}));