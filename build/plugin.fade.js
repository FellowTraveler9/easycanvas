!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var s=e();for(var i in s)("object"==typeof exports?exports:t)[i]=s[i]}}(this,function(){return function(t){function e(i){if(s[i])return s[i].exports;var h=s[i]={exports:{},id:i,loaded:!1};return t[i].call(h.exports,h,h.exports,e),h.loaded=!0,h.exports}var s={};return e.m=t,e.c=s,e.p="",e(0)}({0:function(t,e,s){t.exports=s(151)},151:function(t,e){"use strict";var s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAJkSURBVHjaxJeJbusgEEW94S1L//83X18M2MSuLd2pbqc4wZGqRLrKBsyZhQHny7Jk73xVL8xpVhWrcmiB5lX+6GJ5YgQ2owbAm8oIwH1VgKZUmGcRqKGGPgtEQQAzGR8hQ59fAmhJHSAagigJ4E7GPWRXOYC6owAd1JM6wDQPADyMWUqZRMqmAojHp1Vn6EQQEgUNMJLnUjMyJsM49wygBkAPw9dVFwXRkncCIIW3GRgoTQUZn6HxCMAFEFd8TwEQ78X4rHbILoAUmeT+RFG4UhQ6MiIAE4W/UsYFjuVjAIa2nIY4q1R0GFtQWG3E84lqw2GO2QOoCKBVu0BAPgDSU0eUDjjQenNkV/AW/pWChhpMTelo1a64AOKM30vk18GzTHXCNtI/Knz3DFBgsUqBGIjTInXRY1yA9xkVoqW5tVq3pDR9A0hfF5BSARmVnh7RMDCaIdcNgbPBkgzn1Bu+SfIEFSpSBmkxyrMicb0fAEuCZrWnN89veA/4XcakrPcjBWzkTuLjlbfTQPOlBhz+HwkqqPXmPQDdrQItxE1moGof1S74j/8txk8EHhTQrAE8qlwfqS5yukm1x/rAJ9Jiaa6nyATqD78aUVBhFo8b1V4DdTXdCW+IxA1zB4JhiOhZMEWO1HqnvdoHZ4FAMIhV9REF8FiUm0jsYPEJx/Fm/N8OhH90HI9YRHesWbXXZwAShU8qThe7H8YAuJmw5yOd989uRINKRTJAhoF8jbqrHKfeCYdIISZfSq26bk/K+yO3YvfKrVgiwQBHnwt8ynPB25+M8hceTt/ybPhnryJ78+tLgAEAuCFyiQgQB30AAAAASUVORK5CYII=",i=new Image;i.src=s;var h,a={drip:function(t,e,s){var a=t.subtype||1;e.clearRect(0,0,this.style.width,this.style.height),e.globalCompositeOperation="source-over",e.globalAlpha=1,1===a&&e.drawImage(i,(this.style.width>>1)-(this.style.width>>1)*t.progress*2,(this.style.height>>1)-(this.style.height>>1)*t.progress*2,this.style.width*t.progress*2,this.style.height*t.progress*2),1!==a&&e.drawImage(i,(this.style.width>>1)-(this.style.width>>1)*(1-t.progress)*2,(this.style.height>>1)-(this.style.height>>1)*(1-t.progress)*2,this.style.width*(1-t.progress)*2,this.style.height*(1-t.progress)*2),e.globalCompositeOperation=1===a?"source-out":"source-in",e.globalAlpha=Math.max(1-t.progress,0),e.drawImage(h.funcOrValue(this.$fade.originImg,this),0,0,this.style.width,this.style.height)},door:function(t,e,s){var i=t.subtype||1,a=0,r=0;1===i?a=this.style.width/2:2===i?(a=this.style.width,r=this.style.height/2):3===i?(a=this.style.width/2,r=this.style.height):4===i&&(r=this.style.height/2),e.clearRect(0,0,this.style.width,this.style.height),e.save(),e.translate(a,r),e.rotate(90*(3>i?1:-1)*3.14/180*t.progress),e.translate(-a,-r),e.drawImage(h.funcOrValue(this.$fade.originImg,this),0,0,a||this.style.width,this.style.height-r||r,0,0,a||this.style.width,this.style.height-r||r),e.restore(),e.save(),e.translate(a,r),e.rotate(90*(3>i?-1:1)*3.14/180*t.progress),e.translate(-a,-r),e.drawImage(h.funcOrValue(this.$fade.originImg,this),4>i?this.style.width-a:0,3>i?r:4>i?0:r,this.style.width-a||a,this.style.height-r||r,4>i?this.style.width-a:0,3>i?r:4>i?0:r,this.style.width-a||a,this.style.height-r||r),e.restore()},rotate:function(t,e,s){var i=t.subtype||1,a=0,r=0;1===i?a=this.style.width:2===i?(a=this.style.width,r=this.style.height):3===i&&(r=this.style.height),e.clearRect(0,0,this.style.width,this.style.height),e.save(),e.translate(a,r),e.rotate(1.57*t.progress),e.translate(-a,-r),e.drawImage(h.funcOrValue(this.$fade.originImg,this),0,0,this.style.width,this.style.height),e.restore()},print:function(t,e,s){e.drawImage(h.funcOrValue(this.$fade.originImg,this),0,0);var i=t.subtype||1;1===i&&e.clearRect(0,0,this.style.width,t.progress*this.style.height),2===i&&e.clearRect(0,0,t.progress*this.style.width,this.style.height),3===i&&e.clearRect(0,(1-t.progress)*this.style.height,this.style.width,this.style.height),4===i&&e.clearRect((1-t.progress)*this.style.width,0,this.style.width,this.style.height)},switch:function(t,e,s){var i=1.3*t.progress;0===i&&(s.fillStyle="rgba(0, 0, 0, 1)",s.globalAlpha=.2);var a=t.subtype||1;1===a&&s.fillRect(0,0,this.style.width,i*this.style.height),2===a&&s.fillRect(0,0,i*this.style.width,this.style.height),3===a&&s.fillRect(0,(1-i)*this.style.height,this.style.width,this.style.height),4===a&&s.fillRect((1-i)*this.style.width,0,this.style.width,this.style.height),e.globalCompositeOperation="source-over",e.clearRect(0,0,this.style.width,this.style.height),e.drawImage(s.$canvas,0,0),e.globalCompositeOperation="source-out",e.drawImage(h.funcOrValue(this.$fade.originImg,this),0,0)},sweep:function(t,e,s){if(!t.particleData.length)for(var a=t.subtype||1,r=this.style.height/this.style.width,l=0;this.style.width/50>l;l++)1===a&&t.particleData.push({x:50*l+Math.random()*this.style.width/5/2-this.style.width/5,y:50*r*l+Math.random()*this.style.height/5/2-this.style.height/5,size:100-l}),2===a&&t.particleData.push({x:this.style.width-(50*l+Math.random()*this.style.width/5/2-this.style.width/5),y:50*r*l+Math.random()*this.style.height/5/2-this.style.height/5,size:100-l}),3===a&&t.particleData.push({x:this.style.width/2,y:50*r*l+Math.random()*this.style.height/5/2-this.style.height/5,size:100-l}),4===a&&t.particleData.push({x:50*r*l+Math.random()*this.style.width/5/2-this.style.width/5,y:this.style.height/2,size:100-l});s.fillStyle="rgba(0, 0, 0, 0.005)",s.fillRect(0,0,this.style.width,this.style.height),s.globalAlpha=t.progress*t.progress,t.particleData.forEach(function(e,h){e.size>t.size+t.minsize||(s.drawImage(i,e.x-e.size/2,e.y-e.size/2,e.size,e.size),e.size=t.progress*t.size*1.3)}),e.globalCompositeOperation="source-over",e.clearRect(0,0,this.style.width,this.style.height),e.drawImage(s.$canvas,0,0),e.globalCompositeOperation="source-out",e.drawImage(h.funcOrValue(this.$fade.originImg,this),0,0,this.style.width,this.style.height)},flow:function(t,e,s){var a=this;if(!t.particleData.length)for(var r=0;this.style.width/50>r;r++)t.particleData.push({x:-100+50*r+40*Math.random()-20,y:200*-Math.random()-300,extra:20*Math.random()});s.fillStyle="rgba(0, 0, 0, 0.01)",s.fillRect(0,0,this.style.width,this.style.height),t.particleData.forEach(function(e){s.drawImage(i,e.x,e.y,200,200),e.y+=1/t.ticks*a.style.height+e.extra}),e.globalCompositeOperation="source-over",e.clearRect(0,0,this.style.width,this.style.height),e.drawImage(s.$canvas,0,0),e.globalCompositeOperation="source-out",e.drawImage(h.funcOrValue(this.$fade.originImg,this),0,0,this.style.width,this.style.height)},spiral:function(t,e,s){s.translate(this.style.width/2,this.style.height/2),s.rotate(360/t.ticks*3*3.14/180*t.progress),s.translate(-this.style.width/2,-this.style.height/2),s.globalAlpha=t.progress*t.progress,s.fillStyle="rgba(0, 0, 0, 1)",s.fillRect(this.style.width/2-t.size*t.progress/2,this.style.height/2-t.size*t.progress/2,t.size*t.progress,t.size*t.progress),e.globalCompositeOperation="source-over",e.clearRect(0,0,this.style.width,this.style.height),e.drawImage(s.$canvas,0,0),e.globalCompositeOperation="source-out",e.drawImage(h.funcOrValue(this.$fade.originImg,this),0,0)}},r=function(t){h=t.utils,t.class.sprite.prototype.fade=function(t){var e=t.type,s=t.ticks,i=t.subtype,r=this;r.$fade||(r.$fade={originImg:r.content.img,filterCanvas:document.createElement("canvas"),middlewareCanvas:document.createElement("canvas")},r.$fade.filterCanvas.width=r.$fade.middlewareCanvas.width=r.style.width,r.$fade.filterCanvas.height=r.$fade.middlewareCanvas.height=r.style.height,r.$fade.filterCxt=r.$fade.filterCanvas.getContext("2d"),r.$fade.middlewareCxt=r.$fade.middlewareCanvas.getContext("2d"),r.$fade.filterCxt.$canvas=r.$fade.filterCanvas,r.$fade.middlewareCxt.$canvas=r.$fade.middlewareCanvas);var l={ticks:0,progress:0,callback:!1,particleData:[]};l.ticks=s||60,l.subtype=i,l.size=Math.max(r.style.width,r.style.height),l.minsize=Math.min(r.style.width,r.style.height);var o=document.createElement("canvas");o.width=h.funcOrValue(r.style.width,r),o.height=h.funcOrValue(r.style.height,r);var d=o.getContext("2d");return d.drawImage(r.$canvas.$dom,r.$props.tx,r.$props.ty,r.$props.tw,r.$props.th,0,0,r.$props.tw,r.$props.th),r.$fade.originImg=o,r.children=[],r.content.img=r.$fade.filterCanvas,r.on("beforeTick",function t(){if(r.$fade)return a[e||"drip"].call(r,l,r.$fade.filterCxt,r.$fade.middlewareCxt),l.progress>1?(r.off("beforeTick",t),r.style.opacity=0,delete r.$fade,void(l.callback&&r.$canvas.nextTick(function(){l.callback.call(r)}))):void(l.progress+=1/(s||100))}),{then:function(t){l.callback=t}}},t.class.sprite.prototype.fade.types=[];for(var e in a)t.class.sprite.prototype.fade.types.push(e)};t.exports=r}})});