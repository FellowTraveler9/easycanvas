!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(32)},function(t,e){"use strict";var n={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},funcOrValue:function(t,e){if("function"==typeof t){var n=t.call(e);return n}return t},execFuncs:function(t,e,r){if(t&&(n.isArray(r)||(r=[r])),"function"==typeof t)return t.apply(e,r);if(n.isArray(t)){var i=[];return t.forEach(function(t){i.push(t&&t.apply(e,r))}),i}},blend:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],pointInRect:function(t,e,n,r,i,a){return!(t<n||t>r||e<i||e>a)},firstValuable:function(t,e,n){return"undefined"==typeof t?"undefined"==typeof e?n:e:t}};t.exports=n},function(t,e){"use strict";var n=3.141593;t.exports=function(t,e,r,i,a,o){var s=a?-a/180*n:0,u=t,l=e;return a&&(u=(t-r)*Math.cos(s)-(e-i)*Math.sin(s)+r,l=(t-r)*Math.sin(s)+(e-i)*Math.cos(s)+i),o?[u,l]:{x:u,y:l}}},function(t,e){"use strict";t.exports={xywh:["sx","sy","sw","sh","tx","ty","tw","th"],txywh:["tx","ty","tw","th"],sxywh:["sx","sy","sw","sh"],devFlag:"__EASYCANVAS_DEVTOOL__",version:"0.5.10"}},,,function(t,e){"use strict";function n(t,e){if(t&&t.match(/^data:/))return void(e&&e(t));if(i[t])return void(i[t]!==r?e(i[t]):setTimeout(function(){n(t,e)},100));i[t]=r;var a=new XMLHttpRequest;a.onload=function(){var n=new FileReader;n.onloadend=function(){i[t]=n.result,e&&e(n.result)},n.readAsDataURL(a.response)},a.open("GET",t),a.responseType="blob",a.send()}var r="processing",i={};t.exports=n},,,,function(t,e){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r={},i=[],a=0,o=function t(e,o,s){var u=s||{},l=t.cacheCanvas;if("object"===("undefined"==typeof e?"undefined":n(e))){var c=e;return u.callbackArgs=u.callbackArgs||[],void t(c.shift(),function(e){u.callbackArgs.push(e),c.length>1?t(c,o,u):t(c[0],function(t){u.callbackArgs.push(t),o(u.callbackArgs)},u)},s)}var f=e+"_"+JSON.stringify(s)+"_"+l;if(r[f])return o&&o(r[f]),r[f];var d=new Image;u.block?(d.src=e,a++):0===a?d.src=e:i.push({imgObj:d,src:e}),r[f]=d;var h=void 0;return(u.canvas||u.alphaColor||l)&&(h=document.createElement("canvas"),h.width=h.height||0,r[f]=h),d.onload=function(){if("jpg"===d.src.substr(-3)||"jpeg"===d.src.substr(-3)||"bmp"===d.src.substr(-3)?d.$noAlpha=!0:0===d.src.indexOf("data:image/jpg;")&&(d.$noAlpha=!0),u.block&&(a--,0===a&&(i.forEach(function(t){t.imgObj.src=t.src}),i.splice(0))),h&&(u.canvas||u.alphaColor||l)){var t=h.getContext("2d");if(h.width=d.width,h.height=d.height,h.$noAlpha=d.$noAlpha,t.drawImage(d,0,0),u.alphaColor){for(var e=t.getImageData(0,0,d.width,d.height),n=0;n<e.data.length;n+=4){var r=e.data[n]+e.data[n+1]+e.data[n+2],s=1;e.data[n]<s&&e.data[n+1]<s&&e.data[n+2]<s&&(e.data[n+3]=Math.floor(r/255))}t.putImageData(e,0,0),h.$noAlpha=!1}d=h}o&&o(d)},d.onerror=function(){r[f]=d},h||d};o.cacheCanvas=!1,t.exports=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(2);r(i);t.exports=function(t,e,n,r,i,a,o,s,u){return u&&(t=(t-o)*Math.cos(u)-(e-s)*Math.sin(u)+o,e=(t-o)*Math.sin(u)+(e-s)*Math.cos(u)+s),t>=n&&t<=n+i&&e>=r&&e<=r+a}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(2),a=(r(i),n(11)),o=r(a);t.exports=function(t,e,n,r,i,a,s,u,l,c,f){var d=(0,o.default)(t,e,i,a,s,u,l,c,f)||(0,o.default)(t+n,e,i,a,s,u,l,c,f)||(0,o.default)(t,e+r,i,a,s,u,l,c,f)||(0,o.default)(t+n,e+r,i,a,s,u,l,c,f);if(d)return!0;var h=(0,o.default)(i,a,t,e,n,r,l,c,-f)||(0,o.default)(i+s,a,t,e,n,r,l,c,-f)||(0,o.default)(i,a+u,t,e,n,r,l,c,-f)||(0,o.default)(i+s,a+u,t,e,n,r,l,c,-f);return!!h||(e>a&&e+r<a+u&&t<i&&t+n>i+s||t>i&&t+n<i+s&&e<a&&e+r>a+u)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=n(1),o=r(a),s=n(3),u=r(s),l=n(19),c=r(l),f=n(18),d=r(f),h=n(16),p=r(h),v=n(17),g=r(v),y=n(20),x=r(y),m=n(15),$=r(m),w=n(14),b=(r(w),function t(e){e.children&&e.children.forEach(function(n,r){n.$id||(e.children[r]=new M(n)),e.$id&&!e.$dom?(e.children[r].$canvas=e.$canvas,e.children[r].$parent=e):e.children[r].$canvas=e,t(e.children[r])})}),T=function(t){var e=t||{};e.$id||(e.$id=Math.random().toString(36).substr(2)),e.$tickedTimes=e.$tickedTimes||0,e.content=e.content||{},e.style=e.style||{},e.style.zIndex=e.style.zIndex||0,e.style.mirrX=e.style.mirrX||0,e.style.opacity=o.default.firstValuable(e.style.opacity,1),e.style.locate=e.style.locate||"center",e.style.scale=e.style.scale||1;o.default.funcOrValue(e.content.img);u.default.xywh.forEach(function(t){e.style[t]=e.style[t]||0}),e.inherit=e.inherit,e.drag=e.drag||{},e.events=e.events||{};e.events.eIndex=e.events.eIndex,e.hooks=e.hooks||{};return e.children=e.children||[],b(e),e.$cache={},e.$styleCacheTime={},e},k=function(t){var e=this;this.$extendList.forEach(function(n){n.call(e,t)})},M=function(t){var e=T(t);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this[n]=e[n]);return k.call(this,e),this};M.prototype.$extendList=[],M.prototype.add=function(t){if(t)return this.children.push(t),b(this),this.children[this.children.length-1]},M.prototype.getRect=function(){var t=this,e={};if(u.default.txywh.forEach(function(n){e[n]=t.getStyle(n)}),0===e.tw&&this.content.img){var n=o.default.funcOrValue(this.content.img,this);e.tw=n.width,e.th=n.height}var r=this.getStyle("locate");return"lt"===r||("ld"===r?e.ty-=e.th:"rt"===r?e.tx-=e.tw:"rd"===r?(e.tx-=e.tw,e.ty-=e.th):(e.tx-=e.tw>>1,e.ty-=e.th>>1)),e},M.prototype.getSelfStyle=function(t){var e={};if(t)return o.default.funcOrValue(this.style[t],this);for(var n in this.style)e[n]=o.default.funcOrValue(this.style[n],this);return e},M.prototype.getStyle=function(t){var e=this;if(e.$styleCacheTime[t]===e.$canvas.$lastPaintTime)return e.$cache[t];var n=o.default.funcOrValue(e.style[t],e);if(e.$parent){var r=void 0;if(r=e.inherit?e.inherit.indexOf(t)>=0:"tx"===t||"ty"===t||"scale"===t||"opacity"===t){if("opacity"===t||"scale"===t){var i=o.default.firstValuable(e.$parent.getStyle(t),1);return e.$parent.$styleCacheTime[t]=e.$canvas.$lastPaintTime,e.$parent.$cache[t]=i,i*o.default.firstValuable(n,1)}var i=o.default.firstValuable(e.$parent.getStyle(t),0);return e.$parent.$styleCacheTime[t]=e.$canvas.$lastPaintTime,e.$parent.$cache[t]=i,i+o.default.firstValuable(n,0)}}return n},M.prototype.remove=function(t){return t?(this.$canvas.remove(t),void o.default.execFuncs(t.hooks.removed,t)):(this.$parent?this.$parent.remove(this):this.$canvas.remove(this),void o.default.execFuncs(this.hooks.removed,this))},M.prototype.update=function(t){if(t)for(var e in t)if("object"===i(t[e]))for(var n in t[e])this[e][n]=t[e][n];else this[e]=t[e]},M.prototype.nextTick=g.default,M.prototype.on=c.default,M.prototype.off=d.default,M.prototype.clear=p.default,M.prototype.trigger=x.default,M.prototype.broadcast=$.default,t.exports=M},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=(r(i),!1),o=function(t,e){t.drag.draggingFlag=e,a=e},s=function(t,e,n,r){return t?t.call(e,n):!!r&&"drag"},u="undefined"!=typeof wx||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);t.exports={bind:function(t){var e={x:0,y:0};t.drag=t.drag||{},t.drag.draggingFlag=!1;var n=t.events.mousedown||t.events.touchstart;t.events[u?"touchstart":"mousedown"]=function(r){if(t.drag.dragable){o(t,!0);r.canvasX-this.getStyle("tx"),r.canvasY-this.getStyle("ty");e.x=r.canvasX,e.y=r.canvasY}return s(n,t,r,t.drag.dragable)}.bind(t);var r=t.events.mousemove||t.events.touchmove;t.events[u?"touchmove":"mousemove"]=function(n){var i=t.drag.draggingFlag&&t.drag.dragable;return i&&(this.style.tx+=n.canvasX-e.x,this.style.ty+=n.canvasY-e.y,this.$canvas.$flags.dragging=this,e.x=n.canvasX,e.y=n.canvasY),s(r,t,n,i)}.bind(t);var i=t.events.mouseup||t.events.touchend;t.events[u?"touchend":"mouseup"]=function(e){var n=t.drag.draggingFlag&&t.drag.dragable;return this.$canvas.$flags.dragging=void 0,t.drag.draggingFlag&&t.drag.dragable&&o(t,!1),s(i,t,e,n)};var a=t.events.mouseout;t.events.mouseout=function(e){var n=t.drag.draggingFlag&&t.drag.dragable;return o(t,!1),s(a,t,e,n)};var l=t.events.click;t.events.click=function(e){var n=t.drag.dragable;if(n){e.canvasX-t.getStyle("tx"),e.canvasY-t.getStyle("ty");return!l||l.call(t,e)}return s(l,t,e,n)}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i);t.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();this.hooks[e]&&a.default.execFuncs(this.hooks[e],this,t),t.unshift(e),this.children&&this.children.forEach(function(e){e.broadcast.apply(e,t)})}},function(t,e){"use strict";t.exports=function(){this.children.forEach(function(t){t.remove()}),this.children=[]}},function(t,e){"use strict";t.exports=function(t){var e=function e(){t.apply(this,arguments),this.off("ticked",e)};this.on("ticked",e)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i);t.exports=function(t,e){this.hooks[t]&&(this.hooks[t]!==e&&e?a.default.isArray(this.hooks[t])&&(this.hooks[t][this.hooks[t].indexOf(e)]=void 0):delete this.hooks[t])}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i);t.exports=function(t,e,n){var r=e;if(n){var i=this;r=function(){var t=Date.now();if(t>r.$lastTriggerTime+n){r.$lastTriggerTime=t;var a=Array.prototype.slice.call(arguments);e.apply(i,a)}},r.$lastTriggerTime=-1}this.hooks[t]?a.default.isArray(this.hooks[t])?this.hooks[t].push(r):this.hooks[t]=[this.hooks[t],r]:this.hooks[t]=r}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i);t.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();if(this.hooks[e])return a.default.execFuncs(this.hooks[e],this,t)}},,,,,,,,function(t,e){"use strict";var n=function(t){setTimeout(t,1e3/60)},r="undefined"!=typeof requestAnimationFrame?requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||n:n;t.exports=r},function(t,e,n){"use strict";var r=n(1),i=3.141593,a=function(t){return t.$lastPaintTime||Date.now()},o={linear:function(t,e,n){var r=a(this),i=!1,o=void 0,s=function(){var a=this.$lastPaintTime,u=(a-r)/n,l=(e-t)*u+t;if(i)if(e>t)for(;l>e;)l-=e-t;else for(;l<e;)l+=t-e;else e>t&&l>e?(s.$done=!0,l=e):e<t&&l<e&&(s.$done=!0,l=e);return u>=1&&o&&(o.call(this,l),o=null),l}.bind(this);return s.loop=function(){return i=!0,s},s.restart=function(){return r=a(this),s},s.then=function(t){return o=t,s},s},pendulum:function(t,e,n,r){var o=a(this),s=r||{};s.start=s.start||0;var u=!1,l=void 0,c=s.cycle||1,f=function(){var r=a(this),d=(r-o)/n;u?c&&(d%=c):c?d>c&&(d=c,f.$done=!0,d=c):d>1&&(f.$done=!0,d=1);var h=d*i*2-i/2+s.start/360*i,p=(e-t)*(Math.sin(h)+1)/2+t;return d>=c&&l&&(l.call(this,p),l=null),p}.bind(this);return f.loop=function(){return u=!0,f},f.restart=function(){return o=a(this),f},f.then=function(t){return l=t,f},f},ease:function(t,e,n){return this.pendulum(t,e,2*n,{cycle:.5})},oneByOne:function(t){var e=t,n=!1,r=function(){for(var t=0;t<e.length;t++){if(!e[t].$done)return e[t]();if(!e[t].$nextRestart&&(e[t].$nextRestart=!0,e[t+1]))return e[t+1].restart(),e[t+1]()}if(n){for(var r=0;r<e.length;r++)e[r].$done=!1,e[r].$nextRestart=!1,e[r].restart();return e[0]()}return e[e.length-1]()};return r.loop=function(){return n=!0,r},r}},s=function t(e,n,i,a,s){var u=(0,r.funcOrValue)(e[n]);u=u||0,e[n]=o[i].bind(t)(u,a,s)};for(var u in o)s[u]=o[u];t.exports=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=(Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n(3)),a=(r(i),n(1));r(a)},,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(3),a=r(i),o=n(54),s=r(o),u=n(28),l=r(u),c=n(96),f=r(c),d=n(1),h=r(d),p=n(29),v=r(p),g=n(10),y=r(g),x=n(95),m=r(x),$=n(97),w=r($),b=n(13),T=r(b),k=n(30),M=(r(k),{painter:s.default,imgLoader:y.default,imgPretreat:m.default,multlineText:w.default,transition:v.default,tick:l.default,utils:h.default,mirror:f.default,class:{sprite:T.default},sprite:T.default,$version:a.default.version,env:"production"});M.extend=function(t){var e=M.sprite.prototype.$extendList;e.indexOf(t)>=0||e.push(t)},M.use=function(t){var e=M.painter.prototype.$extendList;e.indexOf(t)>=0||(t.onUse&&t.onUse(M),e.push(t))},M.component=function(t,e){t(M,e)};var O="undefined"!=typeof window;O&&(window.Easycanvas?console.warn("[Easycanvas] already loaded, it should be loaded only once."):window.Easycanvas=M),t.exports=M},,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(41),a=r(i),o=n(43),s=r(o),u=n(37),l=r(u),c=n(14),f=r(c),d=n(42),h=r(d),p=n(53),v=(r(p),{$render:s.default,$eventHandler:l.default,$perPaint:a.default,$bindDrag:f.default,$rAFer:h.default});t.exports=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i),o=n(3),s=(r(o),function(t){return t.sort(function(t,e){return a.default.funcOrValue(a.default.firstValuable(t.events.eIndex,t.style.zIndex),t)<a.default.funcOrValue(a.default.firstValuable(e.events.eIndex,e.style.zIndex),e)?1:-1})}),u=function t(e){return!(e.$parent&&!t(e.$parent))&&a.default.funcOrValue(e.style.visible,e)!==!1},l=function(t,e){if(u(t)===!1)return!1;var n=t.getRect();return a.default.pointInRect(e.canvasX,e.canvasY,n.tx,n.tx+n.tw,n.ty,n.ty+n.th)},c=function t(e,n,r){if(e&&e.length)for(var i=e.length,o=0;o<i;o++){var u=e[o];if(l(u,n)&&u.events.interceptor){var c=a.default.firstValuable(u.events.interceptor.call(u,n),n);if(!c||c.$stopPropagation)continue}u.children.length&&t(s(u.children.filter(function(t){return a.default.funcOrValue(a.default.firstValuable(t.events.eIndex,t.style.zIndex),t)>=0})),n,r),l(u,n)&&r.push(u),u.children.length&&t(s(u.children.filter(function(t){return!(a.default.funcOrValue(a.default.firstValuable(t.events.eIndex,t.style.zIndex),t)>=0)})),n,r)}},f=function(t,e){var n=this;this.$extendList.forEach(function(r){r.onEvent&&r.onEvent.call(n,t,e)})};t.exports=function(t){var e=this;!t.layerX&&t.targetTouches&&t.targetTouches[0]&&(t.layerX=t.targetTouches[0].pageX-t.currentTarget.offsetLeft,t.layerY=t.targetTouches[0].pageY-t.currentTarget.offsetTop),!t.layerX&&t.changedTouches&&t.changedTouches[0]&&(t.layerX=t.changedTouches[0].pageX-t.currentTarget.offsetLeft,t.layerY=t.changedTouches[0].pageY-t.currentTarget.offsetTop);var n=!1,r=1,i=1;this.$dom.getBoundingClientRect&&(this.$dom.getBoundingClientRect().width>this.$dom.getBoundingClientRect().height!=this.width>this.height,r=Math.floor(this.$dom.getBoundingClientRect()[n?"height":"width"])/this.width,i=Math.floor(this.$dom.getBoundingClientRect()[n?"width":"height"])/this.height);var o={type:t.type,canvasX:t.layerX/r,canvasY:t.layerY/i,event:t};if(!e.events.interceptor||(o=a.default.firstValuable(e.events.interceptor.call(e,o),o),o&&!o.$stopPropagation)){var u=[];e.$flags.dragging&&e.$flags.dragging.$id&&u.push(e.$flags.dragging),c(s(e.children),o,u),f.call(e,o,u);e.eHoldingFlag||"mousedown"!==o.type&&"touchstart"!==o.type?!e.eHoldingFlag||"mouseup"!==o.type&&"touchend"!==o.type?!e.eHoldingFlag||"mousemove"!==o.type&&"touchmove"!==o.type||(e.eHoldingFlag=t):e.eHoldingFlag=!1:e.eHoldingFlag=t;for(var l=0;l<u.length;l++){if(("mousemove"===o.type||"touchmove"===o.type)&&e.eLastMouseHover&&e.eLastMouseHover!==u[l]&&u.indexOf(e.eLastMouseHover)===-1){var d=e.eLastMouseHover.events.mouseout||e.eLastMouseHover.events.touchout;d&&d.call(e.eLastMouseHover,o)}if(u[l].events){var h=u[l].events[o.type];if(h){e.eLastMouseHover=u[l];var p=h.call(u[l],o);if(p===!0)return e.eHoldingFlag=!1,p;if("drag"===p)return e.eHoldingFlag=!1,p}if(u[l].events.through===!1)return}}if(!u.length&&e.eLastMouseHover){var v=e.eLastMouseHover.events.mouseout;v&&v.call(e.eLastMouseHover,o),e.eLastMouseHover=null}var g=e.events[o.type];return g&&g.call(e,o)?(e.eHoldingFlag=!1,!0):void 0}}},function(t,e){"use strict";t.exports=function(t,e,n,r){if(e.sx<0&&e.sw){var i=-e.sx/e.sw;e.tx+=e.tw*i,e.sx=0}if(e.sy<0&&e.sh){var a=-e.sy/e.sh;e.ty+=e.th*a,e.sy=0}if(n&&e.sx+e.sw>n){var o=(e.sx+e.sw-n)/e.sw;e.sw-=e.sw*o,e.tw-=e.tw*o}if(r&&e.sy+e.sh>r){var s=(e.sy+e.sh-r)/e.sh;e.sh-=e.sh*s,e.th-=e.th*s}if(e.tx<0&&e.tw>-e.tx){var u=-e.tx/e.tw;e.sx+=e.sw*u,e.sw-=e.sw*u,e.tw=e.tw+e.tx,e.tx=0}if(e.ty<0&&e.th>-e.ty){var l=-e.ty/e.th;e.sy+=e.sh*l,e.sh-=e.sh*l,e.th=e.th+e.ty,e.ty=0}if(e.tx+e.tw>t.width&&e.tw){var c=(e.tx+e.tw-t.width)/e.tw;e.tw-=e.tw*c,e.sw-=e.sw*c}if(e.ty+e.th>t.height&&e.th){var f=(e.ty+e.th-t.height)/e.th;e.th-=e.th*f,e.sh-=e.sh*f}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i);t.exports=function(t,e,n){e&&e.filter(function(t){var e=a.default.funcOrValue(t.style.zIndex,t);return n<0?e<0:e>=0}).sort(function(t,e){var n=a.default.funcOrValue(t.style.zIndex,t),r=a.default.funcOrValue(e.style.zIndex,e);return n===r?0:n>r?1:-1}).forEach(function(e,n){t.$perPaint.call(t,e,n)})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i),o=n(3),s=(r(o),["tx","ty","scale","opacity"]);t.exports=function(t,e){var n={};for(var r in t.content)n[r]=a.default.funcOrValue(t.content[r],t);"string"==typeof n.img&&(n.img=t.content.img=e.imgLoader(n.img));for(var i in t.style)n[i]=t.getStyle(i);if(t.inherit?t.inherit.forEach(function(e){n[e]=t.getStyle(e)}):s.forEach(function(e){"undefined"==typeof n[e]&&(n[e]=t.getStyle(e))}),n.sequence){var o=n.img,u=n.sequence;n.sequence.index=n.sequence.index||0;var l=n.sequence.index||0;l<0&&(l=0);var c=void 0,f=void 0;if(u.w||u.h){c=u.w<0?o.width/(0-u.w):u.w>0?u.w:o.width,f=u.h<0?o.height/(0-u.h):u.h>0?u.h:o.height;var d=Math.floor(o.width/c),h=Math.floor(o.height/f);n.sx=l%d*c,n.sy=Math.floor(l/d)%h*f}!u.loop&&l>0&&0===n.sx&&0===n.sy&&(n.img=void 0,u.onOver?u.onOver.call(t):t.remove()),n.sequence.lastTickTime=n.sequence.lastTickTime||0,e.$nextTickTime-n.sequence.lastTickTime>=a.default.funcOrValue(n.sequence.interval,t)&&(u.lastTickTime=e.$nextTickTime,n.sequence.index++,n.sequence.lastTickTime=e.$nextTickTime),n.sw=n.sw||c,n.sh=n.sh||f,n.tw=n.tw||c,n.th=n.th||f}return n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i),o=n(6),s=(r(o),n(3)),u=r(s),l=n(40),c=r(l),f=n(38),d=r(f),h=n(39),p=r(h),v=n(12),g=r(v),y=a.default.blend,x=function(t){var e=/[^\u4e00-\u9fa5]/;return!e.test(t)},m=function(){var t=this;this.$canvas.$extendList.forEach(function(e){e.onPaint&&e.onPaint.call(t)})};t.exports=function(t,e){if(t.$rendered=!1,a.default.funcOrValue(t.style.visible,t)===!1)return a.default.execFuncs(t.hooks.beforeTick,t,t.$tickedTimes),void a.default.execFuncs(t.hooks.ticked,t,++t.$tickedTimes);a.default.execFuncs(t.hooks.beforeTick,t,t.$tickedTimes);var n=this;m.call(t);var r=(0,c.default)(t,n),i={globalAlpha:a.default.firstValuable(r.opacity,1)},o=r.text,s=r.img,l=a.default.funcOrValue(t.children,t),f=s?s.width||0:0,h=s?s.height||0:0;if(r.tw=r.tw||r.sw||f,r.th=r.th||r.sh||h,r.sw=r.sw||f,r.sh=r.sh||h,"lt"===r.locate||("ld"===r.locate?r.ty-=r.th:"rt"===r.locate?r.tx-=r.tw:"rd"===r.locate?(r.tx-=r.tw,r.ty-=r.th):(r.tx-=r.tw>>1,r.ty-=r.th>>1)),(r.fh||r.fv)&&(r.fh=r.fh||0,r.fv=r.fv||0,r.fx=r.fx||0,r.fy=r.fy||0,i.transform={fh:r.fh,fv:r.fv,fx:-(r.ty+(r.th>>1))*r.fv+r.fx,fy:-(r.tx+(r.tw>>1))*r.fh+r.fy}),r.blend&&(i.globalCompositeOperation="string"==typeof r.blend?r.blend:y[r.blend]),r.rotate){var v=a.default.firstValuable(r.rx,r.tx+.5*r.tw),$=a.default.firstValuable(r.ry,r.ty+.5*r.th);i.beforeRotate=[v,$],i.rotate=-r.rotate*Math.PI/180,i.rotate=Number(i.rotate.toFixed(4)),i.afterRotate=[-v,-$]}if(r.backgroundColor&&(i.fillRect=r.backgroundColor),1!==r.scale){var w=r.scale;r.tx-=(w-1)*r.tw>>1,r.ty-=(w-1)*r.th>>1,r.tw*=w,r.th*=w}r.mirrX?(i.translate=[n.width,0],i.scale=[-1,1],r.tx=n.width-r.tx-r.tw,r.mirrY&&(i.translate=[n.width,n.height],i.scale=[-1,-1],r.ty=n.height-r.ty-r.th)):r.mirrY&&(i.translate=[0,n.height],i.scale=[1,-1],r.ty=n.height-r.ty-r.th);if(!r.rotate&&!o&&f&&s.src&&(0,d.default)(n,r,f,h),f>10&&h>10&&u.default.xywh.forEach(function(t){r[t]=Math.round(r[t])}),(0,p.default)(n,l,-1),i.fillRect){var b=(0,g.default)(r.tx,r.ty,r.tw,r.th,0,0,n.width,n.height,i.beforeRotate&&i.beforeRotate[0],i.beforeRotate&&i.beforeRotate[1],r.rotate);if(b){t.$rendered=!0;var T={$id:t.$id,type:"fillRect",settings:i,props:[s,r.sx,r.sy,r.sw,r.sh,r.tx,r.ty,r.tw,r.th]};T.$origin=t,n.$children.push(T)}}if(s&&f&&0!==r.opacity&&r.sw&&r.sh){var b=(0,g.default)(r.tx,r.ty,r.tw,r.th,0,0,n.width,n.height,i.beforeRotate&&i.beforeRotate[0],i.beforeRotate&&i.beforeRotate[1],r.rotate);if(b){t.$rendered=!0;var k={$id:t.$id,type:"img",settings:i,props:[s,r.sx,r.sy,r.sw,r.sh,r.tx,r.ty,r.tw,r.th]};k.$origin=t,n.$children.push(k)}}if(o){t.$rendered=!0;var M=r.tx,O=r.ty,F=r.align||r.textAlign||"left",_=r.textFont||"14px Arial",A=parseInt(_),R=r.lineHeight||A;if("center"===F?M+=r.tw/2:"right"===F&&(M+=r.tw),"top"===r.textVerticalAlign?i.textBaseline="top":"bottom"===r.textVerticalAlign?(i.textBaseline="bottom",O+=r.th):"middle"===r.textVerticalAlign&&(O+=r.th>>1,i.textBaseline="middle"),"string"==typeof o||"number"==typeof o)O+2*A>0&&O-2*A<n.height&&n.$children.push({$id:t.$id,type:"text",settings:i,props:{tx:M,ty:O,content:String(o),align:F,font:_,color:r.color,type:r.textType}});else if(o.length)o.forEach(function(e){n.$children.push({$id:t.$id,type:"text",settings:i,props:{tx:M+a.default.funcOrValue(e.tx,t),ty:O+a.default.funcOrValue(e.ty,t),content:a.default.funcOrValue(e.content,t),align:F,font:_,color:r.color,type:r.textType}})});else if("multline-text"===o.type){var C=o.text.split(/\t|\n/),V=[];C.forEach(function(t,e){t=String.prototype.trim.apply(t),o.config.start&&(t=t.replace(o.config.start,""));for(var n=0,i=r.tw;t.length&&n<t.length;)i<=0&&(i=r.tw,V.push(t.substr(0,n)),t=t.substr(n),n=0),n++,i-=A*(x(t[n])?1.05:.6);(t||e)&&V.push(t)}),V.forEach(function(e){n.$children.push({$id:t.$id,type:"text",settings:i,props:{tx:M,ty:O,content:e,align:F,font:_,color:r.color,type:r.textType}}),O+=R||A})}}s||o||(t.$rendered=void 0),(0,p.default)(n,l,1),a.default.execFuncs(t.hooks.ticked,t,++t.$tickedTimes)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(28),a=r(i),o=n(29),s=r(o);t.exports=function(t){var e=Date.now();s.default.$lastPaintTime=this.$nextTickTime=e,e-this.fpsCalculateTime>=1e3&&(this.fpsCalculateTime=e,this.fpsHandler&&this.fpsHandler.call(this,this.fps),this.lastFps=this.fps,this.fps=0),(0,a.default)(function(n){if(this.$rafTime=n,this.$rAFer(t),this.maxFps>0&&this.maxFps<60){if(e-this.$lastPaintTime<=1e3/this.maxFps)return;this.$lastPaintTime=e-(e-this.$lastPaintTime)%(1e3/this.maxFps)}else this.$lastPaintTime=Date.now();t()}.bind(this))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i),o=function(t,e){var n=this,r=!1;return this.$extendList.forEach(function(i){if(i.onRender){var a=i.onRender.call(n,t,e);a&&(r=a)}}),r},s=function(t,e){var n=this,r=t.props;if("img"===t.type||"fillRect"===t.type){var i=r[7]*r[8],s=n.$children;if(i>4e4&&!t.settings.transform&&!t.settings.rotate)for(var u=s.length-1;u>e;u--){var l=s[u];if(!l.$cannotCover){var c=l.props;if("text"!==t.type&&t.type){if(!(c[7]*c[8]<i))if(!c[0]||c[0].$noAlpha){var f=l.settings;if(1!==f.globalAlpha||f.globalCompositeOperation||f.transform||f.rotate)l.$cannotCover=!0;else if(a.default.pointInRect(r[5],r[6],c[5],c[7],c[6],c[8])&&a.default.pointInRect(r[5]+r[7],r[6]+r[8],c[5],c[7],c[6],c[8]))return}else l.$cannotCover=!0}else l.$cannotCover=!0}}}var d=t.settings||{};if(!o.call(n,t,d)){var h=!1,p=n.$paintContext;d.globalCompositeOperation&&(h||(p.save(),h=!0),p.globalCompositeOperation=d.globalCompositeOperation),1===d.globalAlpha||isNaN(d.globalAlpha)||(h||(p.save(),h=!0),p.globalAlpha=d.globalAlpha),d.textBaseline&&(h||(p.save(),h=!0),p.textBaseline=d.textBaseline),d.translate&&(h||(p.save(),h=!0),p.translate(d.translate[0]||0,d.translate[1]||0)),d.rotate&&(h||(p.save(),h=!0),p.translate(d.beforeRotate[0]||0,d.beforeRotate[1]||0),p.rotate(d.rotate||0),p.translate(d.afterRotate[0]||0,d.afterRotate[1]||0)),d.scale&&(h||(p.save(),h=!0),p.scale(d.scale[0]||1,d.scale[1]||1)),d.transform&&(h||(p.save(),h=!0),p.transform(1,d.transform.fh,d.transform.fv,1,d.transform.fx,d.transform.fy)),"img"===t.type?p.drawImage(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8]):"text"===t.type&&r.content?(p.font=r.font,p.fillStyle=p.strokeStyle=r.color||"white",p.textAlign=r.align,p[r.type||"fillText"](r.content,r.tx,r.ty)):"fillRect"===t.type&&(p.fillStyle=d.fillRect,p.fillRect(r[5],r[6],r[7],r[8])),h&&p.restore()}};t.exports=function(){var t=this;t.$children.forEach(s.bind(t))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(45),a=r(i),o=n(49),s=r(o),u=n(52),l=r(u),c=n(46),f=r(c),d=n(16),h=r(d),p=n(47),v=r(p),g=n(19),y=r(g),x=n(18),m=r(x),$=n(20),w=r($),b=n(15),T=r(b),k=n(17),M=r(k),O=n(48),F=r(O),_=n(50),A=r(_),R=n(51),C=r(R),V={start:l.default,paint:f.default,add:a.default,remove:s.default,register:F.default,clear:h.default,setFpsHandler:A.default,setMaxFps:C.default,pause:v.default,on:y.default,off:m.default,trigger:w.default,broadcast:T.default,nextTick:M.default};t.exports=V},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(13),a=r(i);t.exports=a.default.prototype.add},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i);t.exports=function(){if(!(this.$pausing||this.$inBrowser&&document.hidden)){var t=this;a.default.execFuncs(t.hooks.beforeTick,t,[t.$rafTime]),t.$paintContext.clearRect&&t.$paintContext.clearRect(0,0,this.width,this.height),t.$freezing||(t.$children=[],this.children.sort(function(t,e){var n=a.default.funcOrValue(t.style.zIndex,t),r=a.default.funcOrValue(e.style.zIndex,e);return n===r?0:n>r?1:-1}).forEach(function(e,n){t.$perPaint(e,n)})),t.$render(),this.fps++,a.default.execFuncs(t.hooks.ticked,t,[t.$rafTime]),t.hooks.nextTick&&(a.default.execFuncs(t.hooks.nextTick,t,[t.$rafTime]),delete t.hooks.nextTick)}}},function(t,e){"use strict";t.exports=function(t){this.$pausing=void 0===t||t}},function(t,e,n){"use strict";var r=function(t){var e=this;this.$extendList.forEach(function(n){n.onCreate&&n.onCreate.call(e,t)})};t.exports=function(t,e){var n=this,i=e||{};t=this.$dom=t||this.$dom;for(var a in i)this[a]=i[a];if(this.name=i.name||t.id||t.classList&&t.classList[0]||"Unnamed",this.$inBrowser="undefined"!=typeof window,i.fullScreen&&"undefined"!=typeof document&&(t.width=t.style.width=document.body.clientWidth||document.documentElement.clientWidth,t.height=t.style.height=document.body.clientHeight||document.documentElement.clientHeight),t.width=this.width=this.width||i.width||t.width,t.height=this.height=this.height||i.height||t.height,this.events=i.events||{},this.hooks=i.hooks||{},this.$inBrowser){var o=["contextmenu","mousewheel","click","dblclick","mousedown","mouseup","mousemove","touchstart","touchend","touchmove"];o.forEach(function(e){t.addEventListener(e,n.$eventHandler.bind(n))})}return r.call(this,i),this.$paintContext=this.$paintContext||t.getContext("2d"),this}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=r(i);t.exports=function(t,e){var n=this;a.default.execFuncs(t.hooks.beforeRemove,t,t.$tickedTimes++),t.style.visible=!1,t.$removing=!0,setTimeout(function(){t.$parent?t.$parent.children=t.$parent.children.filter(function(t){return t.$removing!==!0}):n.children=n.children.filter(function(t){return t.$removing!==!0}),t.$canvas&&(t.$canvas=void 0,t.$parent=void 0,t.$tickedTimes=void 0,t.$cache=void 0,t.$rendered=!1,a.default.execFuncs(t.hooks.removed,t,t.$tickedTimes))}),e&&this.children.splice(this.children.indexOf(t),1)}},function(t,e){"use strict";t.exports=function(t){this.fpsHandler=t}},function(t,e){"use strict";t.exports=function(t){this.maxFps=t||-1}},function(t,e){"use strict";t.exports=function(){var t=this;return this.fpsCalculateTime=Date.now(),this.$rAFer(this.paint.bind(this)),setInterval(function(){if(t.eHoldingFlag){var e=t.eHoldingFlag;t.$eventHandler.call(t,{layerX:e.layerX,layerY:e.layerY,screenX:e.screenX||e.layerX,screenY:e.screenY||e.layerY,type:"hold"})}},40),this}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(1),a=(r(i),n(3));r(a);t.exports=function(){}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(44),a=r(i),o=n(36),s=r(o),u=n(55),l=r(u),c=n(10),f=r(c),d=function(t){this.imgLoader=f.default;for(var e in l.default)this[e]=this[e]||JSON.parse(JSON.stringify(l.default[e]));t&&(t.el||(t={el:t}),t.el&&this.register("string"==typeof t.el?document.querySelector(t.el):t.el,t))};d.prototype.$extendList=[];for(var h in s.default)Object.prototype.hasOwnProperty.call(s.default,h)&&(d.prototype[h]=s.default[h]);for(var p in a.default)Object.prototype.hasOwnProperty.call(a.default,p)&&(d.prototype[p]=a.default[p]);t.exports=d},function(t,e){"use strict";var n={$dom:null,$paintContext:null,$nextTickTime:0,$lastPaintTime:0,$pausing:!1,$freezing:!1,name:"",fps:0,lastFps:0,fpsCalculateTime:0,fpsHandler:null,width:0,height:0,events:{click:null},children:[],eHoldingFlag:!1,eLastMouseHover:null,maxFps:-1,$flags:{dragging:!1}};t.exports=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(10),a=r(i),o=n(6),s=r(o);t.exports=function(t,e){var n;return(0,s.default)(t,function(t){return(0,a.default)(t,function(t){for(var r=t.width,i=t.height,a=t.getContext("2d").getImageData(0,0,r,i),o=a.data,s=o.length-1;s>=0;s-=4)if(e&&e.conversion){var u=e.conversion({r:o[s-3],g:o[s-2],b:o[s-1],a:o[s]},(s+1>>2)%r,Math.floor((s+1>>2)/r));o[s-3]=u.r,o[s-2]=u.g,o[s-1]=u.b,o[s-0]=u.a}t.getContext("2d").clearRect(0,0,r,i),t.getContext("2d").putImageData(a,0,0),n=t},{canvas:!0,cacheFlag:Math.random()})}),function(){return n}}},function(t,e){"use strict";t.exports=function(t){var e=t.width,n=t.height,r=document.createElement("canvas");r.width=e,r.height=n;var i=r.getContext("2d");i.scale(1,-1),i.translate(0,-n),i.drawImage(t,0,0);var a=i.getImageData(0,0,e,n);return{canvas:i,img:a}}},function(t,e){"use strict";t.exports=function(t,e){return{type:"multline-text",text:t,config:e}}}])});