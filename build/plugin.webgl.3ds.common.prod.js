!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=73)}({73:function(t,e,n){t.exports=n(74)},74:function(t,e,n){"use strict";var i,r=(i=n(75))&&i.__esModule?i:{"default":i};function s(t,e){var n=new XMLHttpRequest;n.overrideMimeType&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.onreadystatechange=function(){if(4==n.readyState&&(0==n.status||200==n.status)){var t=new r["default"](!1,!1);t.readFile(n.responseText);for(var i=[],s=0;s<t.meshes.length;s++){for(var o=[],a=[],f=[],h=t.meshes[s],u=0;u<h.points;u++){var l=h.pointL[u];o.push(l[0]),o.push(l[1]),o.push(l[2])}for(u=0;u<h.faces;u++){var d=h.faceL[u],c=d.points[0],p=d.points[1],y=d.points[2];a.push(c),a.push(p),a.push(y)}for(u=0;u<h.texels;u++){var g=h.texelL[u],w=g[0],b=g[1];f.push(w),f.push(1-b)}i.push({vertices:o,indices:a,textures:f,img:h.faceL[0]&&h.faceL[0].material})}e(i,t)}},n.open("GET",t,!0),n.send(null)}var o=function(t){if(t.webgl&&t.webgl._3ds){var e=t.webgl._3ds,n=t.webgl._3dsImg,i=(t.webgl.cache,this);s(e,function(e){i.webgl={},delete t.webgl._3ds,delete t.webgl.cache,e.forEach(function(e){var r=n&&n[e.img];i.add({name:e.img,webgl:Object.assign(window.Easycanvas.webglShapes.custom({vertices:e.vertices,indices:e.indices,img:!(r instanceof Array)&&r,textures:e.textures,colors:r instanceof Array&&r}),t.webgl)})}),i.trigger("webgl-3ds-loaded")})}};"undefined"!=typeof window&&window.Easycanvas?(window.Easycanvas.loader3DS=s,Easycanvas.extend(o)):t.exports={loader3DS:s,classInit:o}},75:function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r,s,o=function(t,e){this.element=t,this.debug=e!=undefined&&e,this.position=0,this.meshes=[],this.materials={}};!function(t){var e=this,n={ArrayBuffer:"undefined"!=typeof ArrayBuffer,DataView:"undefined"!=typeof DataView&&("getFloat64"in DataView.prototype||"getFloat64"in new DataView(new ArrayBuffer(1))),NodeBuffer:"undefined"!=typeof Buffer&&"readInt16LE"in Buffer.prototype},s={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8},o={Int8:"Int8",Int16:"Int16",Int32:"Int32",Uint8:"UInt8",Uint16:"UInt16",Uint32:"UInt32",Float32:"Float",Float64:"Double"};(r=function(t,i,a,f){if(!(this instanceof r))throw new Error("jDataView constructor may not be called as a function");if(this.buffer=t=r.wrapBuffer(t),this._isArrayBuffer=n.ArrayBuffer&&t instanceof ArrayBuffer,this._isDataView=n.DataView&&this._isArrayBuffer,this._isNodeBuffer=n.NodeBuffer&&t instanceof Buffer,!(this._isNodeBuffer||this._isArrayBuffer||t instanceof Array))throw new TypeError("jDataView buffer has an incompatible type");this._littleEndian=Boolean(f);var h=this._isArrayBuffer?t.byteLength:t.length;if(i===undefined&&(i=0),this.byteOffset=i,a===undefined&&(a=h-i),this.byteLength=a,!this._isDataView){if("number"!=typeof i)throw new TypeError("jDataView byteOffset is not a number");if("number"!=typeof a)throw new TypeError("jDataView byteLength is not a number");if(i<0)throw new Error("jDataView byteOffset is negative");if(a<0)throw new Error("jDataView byteLength is negative")}if(this._isDataView&&(this._view=new DataView(t,i,a)),this._start=i,i+a>h)throw new Error("jDataView (byteOffset + byteLength) value is out of bounds");if(this._offset=0,this._isDataView)for(var u in s)s.hasOwnProperty(u)&&function(t,e){var n=s[t];e["get"+t]=function(i,r){return r===undefined&&(r=e._littleEndian),i===undefined&&(i=e._offset),e._offset=i+n,e._view["get"+t](i,r)},e["set"+t]=function(i,r,s){s===undefined&&(s=e._littleEndian),i===undefined&&(i=e._offset),e._offset=i+n,e._view["set"+t](i,r,s)}}(u,this);else if(this._isNodeBuffer)for(var u in s)s.hasOwnProperty(u)&&function(t,e){var n=s[t];e["get"+t]=function(i,r){var s;return r===undefined&&(r=e._littleEndian),i===undefined&&(i=e._offset),s="Int8"===t||"Uint8"===t?"read"+o[t]:r?"read"+o[t]+"LE":"read"+o[t]+"BE",e._offset=i+n,e.buffer[s](e._start+i)},e["set"+t]=function(i,r,s){var a;s===undefined&&(s=e._littleEndian),i===undefined&&(i=e._offset),a="Int8"===t||"Uint8"===t?"write"+o[t]:s?"write"+o[t]+"LE":"write"+o[t]+"BE",e._offset=i+n,e.buffer[a](r,e._start+i)}}(u,this);else if(this._isArrayBuffer)for(var u in s)s.hasOwnProperty(u)&&function(t,n){var i=s[t];n["get"+t]=function(r,s){var o,a;return s===undefined&&(s=n._littleEndian),r===undefined&&(r=n._offset),1===i||(n._start+r)%i==0&&s?(o=n.buffer,a=n._start+r,n._offset=r+i):(o=new Uint8Array(n.getBytes(i,r,s)).buffer,a=0),new e[t+"Array"](o,a,1)[0]},n["set"+t]=function(r,s,o){o===undefined&&(o=n._littleEndian),r===undefined&&(r=n._offset);var a=e[t+"Array"];if(1===i||(n._start+r)%i==0&&o)new a(n.buffer,n._start+r,1)[0]=s,n._offset=r+i;else{var f=new Uint8Array(i);new a(f.buffer,0,1)[0]=s,n.setBytes(r,f,o)}}}(u,this);else for(var u in s)s.hasOwnProperty(u)&&function(t,e){var n=s[t];e["get"+t]=function(i,r){if(r===undefined&&(r=e._littleEndian),i===undefined&&(i=e._offset),"number"!=typeof i)throw new TypeError("jDataView byteOffset is not a number");if(i+n>e.byteLength)throw new Error("jDataView (byteOffset + size) value is out of bounds");return e["_get"+t](i,r)},e["set"+t]=function(i,r,s){if(s===undefined&&(s=e._littleEndian),i===undefined&&(i=e._offset),e._offset=i+n,"number"!=typeof i)throw new TypeError("jDataView byteOffset is not a number");if(i+n>e.byteLength)throw new Error("jDataView (byteOffset + size) value is out of bounds");e["_set"+t.replace("Uint","Int")](i,r,s)}}(u,this);for(var u in s)s.hasOwnProperty(u)&&function(t,e){e["write"+t]=function(e,n){this["set"+t](undefined,e,n)}}(u,this)}).wrapBuffer=function(t){switch(i(t)){case"string":t=Array.prototype.map.call(t,function(t){return 255&t.charCodeAt(0)});break;case"number":t={length:t}}if("length"in t&&!(n.NodeBuffer&&t instanceof Buffer||n.ArrayBuffer&&t instanceof ArrayBuffer))if(n.NodeBuffer)t=new Buffer(t);else if(n.ArrayBuffer){t=(t instanceof Uint8Array?t:new Uint8Array(t)).buffer}else{t instanceof Array||(t=Array.prototype.slice.call(t));for(var e=0,r=t.length;e<r;e++)t[e]&=255}return t},r.createBuffer=function(){return r.wrapBuffer(arguments)},r.prototype={compatibility:n,_getBytes:function(t,e,n){var i;if(n===undefined&&(n=this._littleEndian),e===undefined&&(e=this._offset),t===undefined&&(t=this.byteLength-e),"number"!=typeof e)throw new TypeError("jDataView byteOffset is not a number");if(t<0||e+t>this.byteLength)throw new Error("jDataView length or (byteOffset+length) value is out of bounds");return e+=this._start,i=this._isArrayBuffer?new Uint8Array(this.buffer,e,t):this.buffer.slice(e,e+t),!n&&t>1&&(i instanceof Array||(i=Array.prototype.slice.call(i)),i.reverse()),this._offset=e-this._start+t,i},getBytes:function(t,e,n){var i=this._getBytes.apply(this,arguments);return i instanceof Array||(i=Array.prototype.slice.call(i)),i},setBytes:function(t,e,n){var i=e.length;if(n===undefined&&(n=this._littleEndian),t===undefined&&(t=this._offset),"number"!=typeof t)throw new TypeError("jDataView byteOffset is not a number");if(i<0||t+i>this.byteLength)throw new Error("jDataView length or (byteOffset+length) value is out of bounds");if(!n&&i>1&&(e=Array.prototype.slice.call(e).reverse()),t+=this._start,this._isArrayBuffer)new Uint8Array(this.buffer,t,i).set(e);else if(this._isNodeBuffer)new Buffer(e).copy(this.buffer,t);else for(var r=0;r<i;r++)this.buffer[t+r]=e[r];this._offset=t-this._start+i},writeBytes:function(t,e){this.setBytes(undefined,t,e)},getString:function(t,e){return String.fromCharCode.apply(null,this._getBytes(t,e,!0))},setString:function(t,e){this.setBytes(t,Array.prototype.map.call(e,function(t){return 255&t.charCodeAt(0)}),!0)},writeString:function(t){this.setString(undefined,t)},getChar:function(t){return this.getString(1,t)},setChar:function(t,e){this.setString.apply(this,arguments)},writeChar:function(t){this.setChar(undefined,t)},tell:function(){return this._offset},seek:function(t){if("number"!=typeof t)throw new TypeError("jDataView byteOffset is not a number");if(t<0||t>this.byteLength)throw new Error("jDataView byteOffset value is out of bounds");return this._offset=t},slice:function(t,e,n){return n?new r(this.getBytes(e-t,t),undefined,undefined,!0):new r(this.buffer,this._start+t,e-t,this._littleEndian)},_getFloat64:function(t,e){var n=this._getBytes(8,t,e),i=1-2*(n[7]>>7),r=((n[7]<<1&255)<<3|n[6]>>4)-1023,s=(15&n[6])*Math.pow(2,48)+n[5]*Math.pow(2,40)+n[4]*Math.pow(2,32)+n[3]*Math.pow(2,24)+n[2]*Math.pow(2,16)+n[1]*Math.pow(2,8)+n[0];return 1024===r?0!==s?NaN:i*Infinity:-1023===r?i*s*Math.pow(2,-1074):i*(1+s*Math.pow(2,-52))*Math.pow(2,r)},_getFloat32:function(t,e){var n=this._getBytes(4,t,e),i=1-2*(n[3]>>7),r=(n[3]<<1&255|n[2]>>7)-127,s=(127&n[2])<<16|n[1]<<8|n[0];return 128===r?0!==s?NaN:i*Infinity:-127===r?i*s*Math.pow(2,-149):i*(1+s*Math.pow(2,-23))*Math.pow(2,r)},_getInt32:function(t,e){var n=this._getBytes(4,t,e);return n[3]<<24|n[2]<<16|n[1]<<8|n[0]},_getUint32:function(t,e){return this._getInt32(t,e)>>>0},_getInt16:function(t,e){return this._getUint16(t,e)<<16>>16},_getUint16:function(t,e){var n=this._getBytes(2,t,e);return n[1]<<8|n[0]},_getInt8:function(t){return this._getUint8(t)<<24>>24},_getUint8:function(t){return this._getBytes(1,t)[0]},_setBinaryFloat:function(t,e,n,i,r){var s,o,a=e<0?1:0,f=~(-1<<i-1),h=1-f;e<0&&(e=-e),0===e?(s=h-1,o=0):isNaN(e)?(s=f+1,o=1):e===Infinity?(s=f+1,o=0):(s=Math.floor(Math.log(e)/Math.LN2))>h&&s<=f?o=Math.floor((e*Math.pow(2,-s)-1)*Math.pow(2,n)):(o=Math.floor(e*Math.pow(2,n-h)),s=h-1),s+=f;for(var u=[];n>=8;)u.push(o%256),o=Math.floor(o/256),n-=8;for(s=s<<n|o,i+=n;i>=8;)u.push(255&s),s>>>=8,i-=8;u.push(a<<i|s),this.setBytes(t,u,r)},_setFloat32:function(t,e,n){this._setBinaryFloat(t,e,23,8,n)},_setFloat64:function(t,e,n){this._setBinaryFloat(t,e,52,11,n)},_setInt32:function(t,e,n){this.setBytes(t,[255&e,e>>>8&255,e>>>16&255,e>>>24],n)},_setInt16:function(t,e,n){this.setBytes(t,[255&e,e>>>8],n)},_setInt8:function(t,e){this.setBytes(t,[e])}}}(),(s=o.prototype).readFile=function(t){this.position=0,this.meshes=[],this.materials={};var e=new r(t,0,undefined,!0),n=this.readChunk(e),i=0;switch(n.id){case 15786:case 49725:case 19789:for(i=this.nextChunk(e,n);0!=i;){switch(i){case 2:this.mesh_version=this.readDWord(e),this.log("M3D_VERSION "+this.mesh_version);break;case 15677:this.resetPosition(e),this.log("MDATA"),this.readMDATA(e);break;case 45056:default:this.log("Unknown chunk: "+i.toString(16))}i=this.nextChunk(e,n)}break;default:this.log("Unknown main chunk: "+i.toString(16))}this.log("parsed #"+this.meshes.length+" meshes!")},s.readMDATA=function(t){for(var e=this.readChunk(t),n=this.nextChunk(t,e);0!=n;){switch(n){case 15678:this.mesh_version=this.readInt(t),this.log("MESH_VERSION: "+this.mesh_version);break;case 256:this.master_scale=this.readFloat(t),this.log("MASTER_SCALE: "+this.master_scale);break;case 16384:this.resetPosition(t),this.log("NAMED OBJECT"),this.readNamedObject(t);break;case 45055:this.resetPosition(t),this.log("MATERIAL ENTRY"),this.readMaterialEntry(t);break;default:this.log("Unknown MDATA chunk: "+n.toString(16))}n=this.nextChunk(t,e)}},s.readMaterialEntry=function(t){for(var e=this.readChunk(t),n=this.nextChunk(t,e),i=new u;0!=n;){switch(n){case 40960:i.name=this.readString(t,64),this.log(" -> name: "+i.name);break;case 40976:i.ambientColor=this.readColor(t),this.log(" -> ambientColor: "+i.ambientColor.toString(16));break;case 40992:i.diffuseColor=this.readColor(t),this.log(" -> diffuseColor: "+i.diffuseColor.toString(16));break;case 41008:i.specularColor=this.readColor(t),this.log(" -> specularColor: "+i.specularColor.toString(16));break;default:this.log(" -> Unknown material chunk: "+n.toString(16))}n=this.nextChunk(t,e)}this.endChunk(e),this.materials[i.name]=i},s.readColor=function(t){var e=this.readChunk(t),n=0;switch(e.id){case 17:case 18:n=(i=this.readByte(t))<<16|(r=this.readByte(t))<<8|(s=this.readByte(t));break;case 16:case 19:var i=this.readFloat(t),r=this.readFloat(t),s=this.readFloat(t);n=Math.floor(255*i)<<16|Math.floor(255*r)<<8|Math.floor(255*s);break;default:this.log("Unknown color chunk: "+c.toString(16))}return this.endChunk(e),n},s.readMesh=function(t){for(var e,n,i=this.readChunk(t),r=this.nextChunk(t,i),s=new h;0!=r;){switch(r){case 16741:s.color=this.readByte(t),this.log(" -> color: "+s.color);break;case 16656:for(s.points=this.readWord(t),s.pointL=[],this.log(" -> #points: "+s.points+" "+this.position),e=0;e<s.points;e++){var o=[];for(n=0;n<3;n++)o.push(this.readFloat(t));s.pointL.push(o)}break;case 16672:this.resetPosition(t),this.readFaceArray(t,s);break;case 16704:for(s.texels=this.readWord(t),s.texelL=[],this.log(" -> #texels: "+s.texels),e=0;e<s.texels;e++)s.texelL.push([this.readFloat(t),this.readFloat(t)]);break;case 16736:case 16657:case 16752:default:this.log(" -> Unknown mesh chunk: "+r.toString(16))}r=this.nextChunk(t,i)}return this.endChunk(i),s},s.readFaceArray=function(t,e){var n,i=this.readChunk(t);for(e.faces=this.readWord(t),e.faceL=[],this.log(" -> #faces: "+e.faces),n=0;n<e.faces;++n)(o=new f).points=[],o.points.push(this.readWord(t)),o.points.push(this.readWord(t)),o.points.push(this.readWord(t)),o.flags=this.readWord(t),e.faceL.push(o);for(;this.position<i.end;){switch((i=this.readChunk(t)).id){case 16688:this.log(" -> MATERIAL_GROUP"),this.resetPosition(t);var r=this.readMaterialGroup(t),s=r.faceIdxs;for(n=0;n<s.length;n++){var o;(o=e.faceL[s[n]]).material=r.name}break;case 16720:default:this.log(" -> Unknown face array chunk: "+c.toString(16))}this.endChunk(i)}this.endChunk(i)},s.readMaterialGroup=function(t){this.readChunk(t);var e=this.readString(t,64),n=this.readWord(t);this.log(" --\x3e material name: "+e),this.log(" --\x3e num faces: "+n);for(var i=[],r=0;r<n;++r)i.push(this.readWord(t));return{name:e,faceIdxs:i}},s.readNamedObject=function(t){var e=this.readChunk(t),n=this.readString(t,64);this.log(" -> "+n),e.cur=this.position;for(var i=this.nextChunk(t,e);0!=i;){switch(i){case 16640:this.resetPosition(t);var r=this.readMesh(t);this.meshes.push(r);break;default:this.log("Unknown named object chunk: "+i.toString(16))}i=this.nextChunk(t,e)}this.endChunk(e)},s.readChunk=function(t){var e=new a;return e.cur=this.position,e.id=this.readWord(t),e.size=this.readDWord(t),e.end=e.cur+e.size,e.cur+=6,e},s.endChunk=function(t){this.position=t.end},s.nextChunk=function(t,e){if(e.cur>=e.end)return 0;this.position=e.cur;try{var n=this.readChunk(t);return e.cur+=n.size,n.id}catch(i){return this.log("Unable to read chunk at "+this.position),0}},s.resetPosition=function(t,e){this.position-=6},s.readByte=function(t){var e=t.getUint8(this.position);return this.position+=1,e},s.readFloat=function(t){try{var e=t.getFloat32(this.position);return this.position+=4,e}catch(n){this.log(n+" "+this.position+" "+t.byteLength)}},s.readInt=function(t){var e=t.getInt32(this.position);return this.position+=4,e},s.readShort=function(t){var e=t.getInt16(this.position);return this.position+=2,e},s.readDWord=function(t){var e=t.getUint32(this.position);return this.position+=4,e},s.readWord=function(t){var e=t.getUint16(this.position);return this.position+=2,e},s.readString=function(t,e){for(var n="",i=0;i<e;i++){var r=this.readByte(t);if(!r)break;n+=String.fromCharCode(r)}return n},s.log=function(t){this.debug&&(console.log(t),this.element&&(this.element.innerHTML+=t+"<br/>"))};var a=function(){this.cur=0,this.id=0,this.size=0,this.end=0},f=function(){this.flags=0,this.points=[],this.material=""},h=function(){this.next=null,this.matrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.name="",this.color=0,this.points=0,this.pointL=[],this.flags=0,this.flagL=[],this.texels=0,this.texelL=[],this.faces=0,this.faceL=[]},u=function(){this.name="",this.ambientColor=0,this.diffuseColor=0,this.spectralColor=0};t.exports=o}}));