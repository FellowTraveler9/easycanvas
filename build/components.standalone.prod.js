!function(t,e){for(var o in e)t[o]=e[o]}(window,function(t){var e={};function o(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=54)}({28:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n={},r="\n".slice(0,1),i=function(t,e){var o,i=String(t),s=i+JSON.stringify(e);if(e.fontSize=e.fontSize||16,n[s])return n[s];e.padding?((o=(o=e.padding.split(" ")).map(function(t){return parseInt(t)}))[1]=Number(o[1]||o[0]),o[2]=Number(o[2]||o[0]),o[3]=Number(o[3]||o[1])):o=[0,0,0,0];var a=e.minWidth||e.width||e.fontSize*i.length+o[1]+o[3]+100,l=i.split("\n").length,d=e.fontSize*(Math.round(i.length)/a+l-1)*(e.lineHeight||e.fontSize)+o[0]+o[2]+100,c=document.createElement("canvas");c.width=a,c.height=d;var h=c.getContext("2d");window.tempCanvas=c,window.tempCtx=h,h.textBaseline="middle",h.font=(e.fontStyle?e.fontStyle+" ":"")+e.fontSize+"px "+(e.family||"serif"),h.fillStyle=e.color||"#000",h.textAlign=e.textAlign||"left";for(var u=e.lineHeight?(e.lineHeight-e.fontSize)/2:0,f=0,_=1,p=0,v=0,g=1;;)if((v=h.measureText(i.slice(f,_)).width)>e.width){if("ellipsis"===e.textOverflow){_-=2,h.fillText(i.slice(f,_)+"...",0,u+e.fontSize/2),u+=e.fontSize+(e.lineHeight?(e.lineHeight-e.fontSize)/2:0),g++,p=e.width-o[1]-o[3];break}_-=1,h.fillText(i.slice(f,_),0,u+e.fontSize/2),_=(f=_)+1,u+=e.fontSize+(e.lineHeight?(e.lineHeight-e.fontSize)/2:10),g++}else{if(_>i.length-1){v>p&&(p=v),h.fillText(i.slice(f,_),0,u+e.fontSize/2),u+=e.fontSize+(e.lineHeight?(e.lineHeight-e.fontSize)/2:0);break}i.slice(_,_+1)===r&&(h.fillText(i.slice(f,_),0,u+e.fontSize/2),_=(f=_+=1)+1,u+=e.fontSize+(e.lineHeight?(e.lineHeight-e.fontSize)/2:10),g++),v>p&&(p=v),_++}var w=document.createElement("canvas");w.lastLineLeft=v,w.lineCount=g,w.width=Math.max(p+o[1]+o[3],e.minWidth||0),w.height=u+o[0]+o[2];var b=w.getContext("2d");if(e.backgroundColor&&(b.fillStyle=e.backgroundColor,b.fillRect(0,0,w.width,w.height)),b.drawImage(c,(w.width-p)/2,o[0]),e.border){var m=e.border.split(" "),y=m.pop();"solid"===m[m.length-1]&&m.pop();var S=m[0],x=m[1]||S,C=m[2]||S,I=m[3]||x||S;S=parseInt(S),x=parseInt(x),C=parseInt(C),I=parseInt(I);var $=e.borderRadius||0;if(b.beginPath(),b.strokeStyle=y,S&&(b.lineWidth=S,b.moveTo(I?$:0,0),b.lineTo(w.width-(x?$:0),0)),x&&(b.lineWidth=x,b.moveTo(w.width,S?$:0),b.lineTo(w.width,w.height-(C?$:0))),C&&(b.lineWidth=C,b.moveTo(I?$:0,w.height),b.lineTo(w.width-(x?$:0),w.height)),I&&(b.lineWidth=I,b.moveTo(0,S?$:0),b.lineTo(0,w.height-(C?$:0))),b.stroke(),$){var H=document.createElement("canvas"),O=Math.min(w.width,w.height);H.width=H.height=O;var T=H.getContext("2d");T.beginPath(),T.strokeStyle=y,T.arc(O>>1,O>>1,(O>>1)-1,0,2*Math.PI),T.stroke(),S&&x&&b.drawImage(H,O>>1,0,O>>1,O>>1,w.width-$,0,$,$),C&&x&&b.drawImage(H,O>>1,O>>1,O>>1,O>>1,w.width-$,w.height-$,$,$),S&&I&&b.drawImage(H,0,0,O>>1,O>>1,0,0,$,$),C&&I&&b.drawImage(H,0,O>>1,O>>1,O>>1,0,w.height-$,$,$)}}return n[s]=w,w};e["default"]=i},29:function(t,e,o){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var r=function(t,e){var o,n=t||{};return n.name=n.name||"Image",(o=new e.Sprite(n)).content.img=n.src,Object.defineProperty(o,"src",{get:function(){return o.content.img?o.content.img.src:""},set:function(t){o.content.img=t}}),o};(0,((n=o(3))&&n.__esModule?n:{"default":n})["default"])(r,"Image");var i=r;e["default"]=i},3:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n="undefined"!=typeof window;e["default"]=function(t,e){n&&window.Easycanvas&&(Easycanvas[e]=function(e){return t(e,Easycanvas)})}},54:function(t,e,o){t.exports=o(55)},55:function(t,e,o){"use strict";n(o(56)),n(o(29)),n(o(57)),n(o(58)),n(o(59)),n(o(60)),n(o(61)),n(o(63)),n(o(64));function n(t){return t&&t.__esModule?t:{"default":t}}},56:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=i(o(28)),r=i(o(3));function i(t){return t&&t.__esModule?t:{"default":t}}var s={padding:0,width:300,family:'"Helvetica Neue",Helvetica,Arial,sans-serif'},a=function(t,e){t.buttonStyleNormal=Object.assign(s,{minWidth:e.style.width,lineHeight:e.style.height,padding:0},e.props.normal),t.buttonStyleHovered=Object.assign({},t.buttonStyleNormal,e.props.hovered),t.buttonStylePressed=Object.assign({},t.buttonStyleNormal,e.props.pressed),t.imageNormal=(0,n["default"])(e.props.text||"",t.buttonStyleNormal),t.imageHovered=e.props.hovered&&(0,n["default"])(e.props.text||"",t.buttonStyleHovered),t.imagePressed=e.props.pressed&&(0,n["default"])(e.props.text||"",t.buttonStylePressed)},l=function(t,e){var o;t.props=t.props||{};var n={buttonStyleNormal:undefined,buttonStyleHovered:undefined,buttonStylePressed:undefined,imageNormal:undefined,imageHovered:undefined,imagePressed:undefined};a(n,t);var r={};return t.events=t.events||{},r.touchmove=r.mousemove=function(){o.content.img=n.imageHovered||n.imageNormal},r.touchstart=r.mousedown=function(){o.content.img=n.imagePressed||n.imageHovered||n.imageNormal},r.touchend=r.touchout=r.mouseout=function(){o.content.img=n.imageNormal},r.mouseup=function(){o.content.img=n.imageHovered||n.imageNormal},r.click=function(e){t.events.click&&t.events.click.call(o,e)},(o=new e.Sprite({name:t.name||"Button_"+t.props.text,content:{img:n.imageNormal},style:t.style,props:t.props,events:r,hooks:t.hooks})).update=function(e){this.__proto__.update.call(this,e),a(n,t),o.content.img=n.imageNormal},o};(0,r["default"])(l,"Button");var d=l;e["default"]=d},57:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n,r,i,s,a=(n=o(3))&&n.__esModule?n:{"default":n};var l=function(t,e){return Math.abs(t)<Math.abs(e)?t:e},d=function(t){t.$scroll.touching=!1},c=function(t){if(t.$scroll&&t.$scroll.$scrolling){if(Math.abs(t.$scroll.speedX)>1?t.$scroll.speedX*=t.scroll.smooth||.8:t.$scroll.speedX=0,Math.abs(t.$scroll.speedY)>1?t.$scroll.speedY*=t.scroll.smooth||.8:t.$scroll.speedY=0,Math.abs(t.$scroll.speedX)<=1&&Math.abs(t.$scroll.speedY)<=1)return t.$scroll.$scrolling=!1,void(t.$scroll.$wheeling=!1);if(!t.$scroll.touching){if(t.scroll.scrollY-=t.$scroll.speedY,t.scroll.scrollX-=t.$scroll.speedX,!t.$scroll.touching&&!t.$scroll.$wheeling&&Math.abs(t.$scroll.speedY)<50&&t.scroll.anchors&&t.scroll.anchors.length)for(var e=t.scroll.anchorsRange||400,o=0;o<t.scroll.anchors.length;o++){var n=t.scroll.anchors[o],i=t.scroll.scrollY-n;if(i>0&&i<e&&t.$scroll.speedY>0||i<0&&i>-e&&t.$scroll.speedY<0){t.trigger("scrollTo",n,200),t.$scroll.speedY=0;break}}var s=r(t.scroll.minScrollX,t),a=r(t.scroll.maxScrollX,t),l=r(t.scroll.minScrollY,t),d=r(t.scroll.maxScrollY,t);!isNaN(l)&&t.scroll.scrollY<l?t.scroll.scrollY=l:!isNaN(d)&&t.scroll.scrollY>d&&(t.scroll.scrollY=d,t.trigger("reachBottom"),t.$scroll.speedY=0),!isNaN(s)&&t.scroll.scrollX<s?t.scroll.scrollX=s:!isNaN(a)&&t.scroll.scrollX>a&&(t.scroll.scrollX=a)}}},h=function(t,e){var o=Date.now();if(t.$scroll.$wheeling=!1,t.$scroll.touching){t.$scroll.$scrolling=!0;var n=t.$scroll.startPos.x-e.canvasX,i=t.$scroll.startPos.y-e.canvasY,s=o-t.$scroll.touching;t.$scroll.touching=o;var a=r(t.scroll.minScrollX,t),d=r(t.scroll.maxScrollX,t),c=r(t.scroll.minScrollY,t),h=r(t.scroll.maxScrollY,t);if((t.scroll.scrollX+n<a||t.scroll.scrollX+n>d)&&(t.scroll.flexible||t.scroll.flexibleX?n>>=3:n=0),(t.scroll.scrollY+i<c||t.scroll.scrollY+i>h)&&(t.scroll.flexible||t.scroll.flexibleY?i>>=3:i=0),r(t.scroll.scrollableX,t)&&Math.abs(n)>=1&&s>1){var u=(e.canvasX-t.$scroll.startPos.x)/s*25;t.$scroll.lastScrollSpeed*u>0&&Math.abs(u)>15&&(u+=l(u,t.$scroll.lastScrollSpeed)),t.$scroll.speedX=(t.$scroll.lastTouchSpeed+u)/(t.$scroll.lastTouchSpeed?2:1),t.$scroll.lastTouchSpeed=u,t.scroll.scrollX+=n}if(r(t.scroll.scrollableY,t)&&Math.abs(i)>=1&&s>1){var f=(e.canvasY-t.$scroll.startPos.y)/s*25;t.$scroll.lastScrollSpeed*f>0&&Math.abs(f)>15&&(f+=l(f,t.$scroll.lastScrollSpeed)),t.$scroll.speedY=(t.$scroll.lastTouchSpeed+f)/(t.$scroll.lastTouchSpeed?2:1),t.$scroll.lastTouchSpeed=f,t.scroll.scrollY+=i}if(t.$scroll.startPos.x=e.canvasX,t.$scroll.startPos.y=e.canvasY,Math.abs(n)>Math.abs(i)+1)return 1;if(Math.abs(n)<Math.abs(i)-1)return 2}else t.$scroll.touching=o,t.$scroll.quickTouch=o,t.$scroll.lastTouchSpeed=0,t.$scroll.startPos.x=e.canvasX,t.$scroll.startPos.y=e.canvasY,t.$scroll.lastScrollSpeed=t.$scroll.speedX||t.$scroll.speedY,t.$scroll.speedX=0,t.$scroll.speedY=0},u=function(t,e){t.$scroll.speedX=r(t.scroll.scrollableX,t)?e.event.wheelDeltaX:0,t.$scroll.speedY=r(t.scroll.scrollableY,t)?e.event.wheelDeltaY:0,t.$scroll.$scrolling=!0,t.$scroll.$wheeling=!0,e.stopPropagation()},f=function(t,e){r=e.utils.funcOrValue,i=e.Transition;var o=!1,n=!1,a=t||{};a.scroll=Object.assign({scrollX:0,scrollY:0,scrollableX:function(){return"visible"!==(this.style.overflowX||this.style.overflow)},scrollableY:function(){return"visible"!==(this.style.overflowY||this.style.overflow)},minScrollX:0,maxScrollX:function(){var t=this,e=0;return this.getChildren().forEach(function(o){var n=o.getSelfStyle("left")+o.getSelfStyle("width")-t.getStyle("width");n>e&&(e=n)}),e},minScrollY:0,maxScrollY:function(){var t=this,e=0;return this.getChildren().forEach(function(o){var n=o.getSelfStyle("top")+o.getSelfStyle("height")-t.getStyle("height");n>e&&(e=n)}),e},propagationX:!1,propagationY:!1},t.scroll);var l=function v(){o&&(_.scroll.scrollX=o()),n&&(_.scroll.scrollY=n()),o||n||_.off("ticked",v)},f=!1;a.events=Object.assign({touchstart:function(t){d(this),f=!0,s=!1,h(this,t),_.scroll.propagationX||_.scroll.propagationY||t.stopPropagation()},touchmove:function(t){if(f&&(!s||this===s)){var e=h(this,t);1===e&&_.scroll.propagationY?(t.stopPropagation(),s=this):2===e&&_.scroll.propagationX&&(t.stopPropagation(),s=this)}},mousewheel:function(t){f=!0,u(this,t),t.stopPropagation()},touchend:function(){f=!1,d(this)},mouseup:function(){f=!1,d(this)}},a.events||{}),a.scroll.capture&&(a.events.interceptor=function(t){return _.events[t.type]?(_.events[t.type].call(_,t),!1):t});var _=new e.Sprite(a);_.on("ticked",function(){c(_)}),_.scrollTo=function(t,e,r){var s;return o=i.ease(_.scroll.scrollY,t,r||200,{cycle:.5}).then(function(){o=!1,s&&s(),s=!1}),n=i.ease(_.scroll.scrollY,e,r||200,{cycle:.5}).then(function(){n=!1,s&&s(),s=!1}),_.on("ticked",l),{then:function(t){s=t}}},_.$scroll={speedX:0,speedY:0,touching:!1,startPos:{},lastTouchSpeed:0,lastScrollSpeed:0};var p=_.add({name:"scrolling-element",style:{left:function(){return-this.$parent.scroll.scrollX},top:function(){return-this.$parent.scroll.scrollY}}});return _.add=p.add.bind(p),_.clear=p.clear.bind(p),_.getChildren=function(){return p.children},_};(0,a["default"])(f,"Scroll");var _=f;e["default"]=_},58:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=i(o(3)),r=i(o(29));function i(t){return t&&t.__esModule?t:{"default":t}}var s=function(t,e){var o=e.utils.funcOrValue,n=new r["default"](t,e);return n.index=t.index||0,n.on("beforeTick",function(){var t=o(this.content.img,this);if(t&&t.width){var e,n,r=this.index||0;if(r<0&&(r=0),this.frameWidth||this.frameHeight){e=this.frameWidth<0?t.width/-this.frameWidth:this.frameWidth,n=this.frameHeight<0?t.height/-this.frameHeight:this.frameHeight;var i=Math.floor(t.width/e),s=Math.floor(t.height/n);this.style.cutLeft=r%i*e,this.style.cutTop=Math.floor(r/i)%s*n}if(!this.loop&&r>0&&0===this.style.cutLeft&&0===this.style.cutTop)return this.style.img=undefined,void this.remove();this.$lastFrameTime=this.$lastFrameTime||0,this.$canvas.$nextTickTime-this.$lastFrameTime>=o(this.interval,this)&&(this.$lastFrameTime=this.$canvas.$nextTickTime,this.index++),this.style.cutWidth=this.style.cutWidth||e,this.style.cutHeight=this.style.cutHeight||n,this.style.width=this.style.width||e,this.style.height=this.style.height||n}}),n};(0,n["default"])(s,"Sequence");var a=s;e["default"]=a},59:function(t,e,o){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var r=function(t,e){var o,n=t||{};return n.name=n.name||"Text",n.content=n.content||{},n.content.text=n.text,o=new e.Sprite(n),Object.defineProperty(o,"text",{get:function(){return o.content.text||""},set:function(t){o.content.text=t}}),o};(0,((n=o(3))&&n.__esModule?n:{"default":n})["default"])(r,"Text");var i=r;e["default"]=i},60:function(t,e,o){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var r=function(t,e){var o=t||{};return o.name=o.name||"View",new e.Sprite(o)};(0,((n=o(3))&&n.__esModule?n:{"default":n})["default"])(r,"View");var i=r;e["default"]=i},61:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=i(o(3)),r=i(o(62));function i(t){return t&&t.__esModule?t:{"default":t}}function s(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)}return o}function a(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}r["default"].prototype._mousePos=function(t){return{x:t.x,y:t.y}};var l=function(t,e){var o,n=t||{};n.name=n.name||"Input";var i=function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(o,!0).forEach(function(e){a(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):s(o).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}({canvas:document.createElement("canvas")},n,{},n.style,{fontColor:n.style.color});n.style.width=n.style.width-2*(n.style.borderWidth||0)-2*(n.style.padding||0),n.style.height=n.style.height-2*(n.style.borderWidth||0)-2*(n.style.padding||0);var l=new r["default"](i);return n.style.borderWidth=0,n.style.borderColor=undefined,n.style.width=n.style.height=undefined,(o=new e.Sprite(n)).$canvasInput=l,o.content.img=l._renderCanvas,o.addEventListener("interceptor",function(t){t.stopPropagation();var e={type:t.type,x:t.canvasX-o.getStyle("left"),y:t.canvasY-o.getStyle("top")};if(l[t.type]&&l[t.type](e,l),"click"===t.type){o.$canvas.addEventListener("interceptor",function t(e){"click"===e.type&&o.$canvas.removeEventListener("interceptor",t)})}}),o};(0,n["default"])(l,"Input");var d=l;e["default"]=d},62:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;
/*!
 *  CanvasInput v1.2.7
 *  http://goldfirestudios.com/blog/108/CanvasInput-HTML5-Canvas-Text-Input
 *
 *  (c) 2013-2017, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
var n=[],r=function(t){var e=this;t=t||{},e._canvas=t.canvas||null,e._ctx=e._canvas?e._canvas.getContext("2d"):null,e._x=t.x||0,e._y=t.y||0,e._extraX=t.extraX||0,e._extraY=t.extraY||0,e._fontSize=t.fontSize||14,e._fontFamily=t.fontFamily||"Arial",e._fontColor=t.fontColor||"#000",e._placeHolderColor=t.placeHolderColor||"#bfbebd",e._fontWeight=t.fontWeight||"normal",e._fontStyle=t.fontStyle||"normal",e._fontShadowColor=t.fontShadowColor||"",e._fontShadowBlur=t.fontShadowBlur||0,e._fontShadowOffsetX=t.fontShadowOffsetX||0,e._fontShadowOffsetY=t.fontShadowOffsetY||0,e._readonly=t.readonly||!1,e._maxlength=t.maxlength||null,e._width=t.width||150,e._height=t.height||e._fontSize,e._padding=t.padding>=0?t.padding:5,e._borderWidth=t.borderWidth>=0?t.borderWidth:1,e._borderColor=t.borderColor||"#959595",e._borderRadius=t.borderRadius>=0?t.borderRadius:3,e._backgroundImage=t.backgroundImage||"",e._boxShadow=t.boxShadow||"1px 1px 0px rgba(255, 255, 255, 1)",e._innerShadow=t.innerShadow||"0px 0px 4px rgba(0, 0, 0, 0.4)",e._selectionColor=t.selectionColor||"rgba(179, 212, 253, 0.8)",e._placeHolder=t.placeHolder||"",e._value=(t.value||e._placeHolder)+"",e._onsubmit=t.onsubmit||function(){},e._onkeydown=t.onkeydown||function(){},e._onkeyup=t.onkeyup||function(){},e._onfocus=t.onfocus||function(){},e._onblur=t.onblur||function(){},e._cursor=!1,e._cursorPos=0,e._hasFocus=!1,e._selection=[0,0],e._wasOver=!1,e.boxShadow(e._boxShadow,!0),e._calcWH(),e._renderCanvas=document.createElement("canvas"),e._renderCanvas.setAttribute("width",e.outerW),e._renderCanvas.setAttribute("height",e.outerH),e._renderCtx=e._renderCanvas.getContext("2d"),e._shadowCanvas=document.createElement("canvas"),e._shadowCanvas.setAttribute("width",e._width+2*e._padding),e._shadowCanvas.setAttribute("height",e._height+2*e._padding),e._shadowCtx=e._shadowCanvas.getContext("2d"),"undefined"!=typeof t.backgroundGradient?(e._backgroundColor=e._renderCtx.createLinearGradient(0,0,0,e.outerH),e._backgroundColor.addColorStop(0,t.backgroundGradient[0]),e._backgroundColor.addColorStop(1,t.backgroundGradient[1])):e._backgroundColor=t.backgroundColor||"#fff",e._canvas&&(e._canvas.addEventListener("mousemove",function(t){t=t||window.event,e.mousemove(t,e)},!1),e._canvas.addEventListener("mousedown",function(t){t=t||window.event,e.mousedown(t,e)},!1),e._canvas.addEventListener("mouseup",function(t){t=t||window.event,e.mouseup(t,e)},!1));var o=function(t){t=t||window.event,e._hasFocus&&!e._mouseDown&&e.blur()};window.addEventListener("mouseup",o,!0),window.addEventListener("touchend",o,!0),e._hiddenInput=document.createElement("input"),e._hiddenInput.type="text",e._hiddenInput.style.position="absolute",e._hiddenInput.style.opacity=0,e._hiddenInput.style.pointerEvents="none",e._hiddenInput.style.zIndex=0,e._hiddenInput.style.transform="scale(0)",e._updateHiddenInput(),e._maxlength&&(e._hiddenInput.maxLength=e._maxlength),document.body.appendChild(e._hiddenInput),e._hiddenInput.value=e._value,e._hiddenInput.addEventListener("keydown",function(t){t=t||window.event,e._hasFocus&&(window.focus(),e._hiddenInput.focus(),e.keydown(t,e))}),e._hiddenInput.addEventListener("keyup",function(t){t=t||window.event,e._value=e._hiddenInput.value,e._cursorPos=e._hiddenInput.selectionStart,e._selection=[e._hiddenInput.selectionStart,e._hiddenInput.selectionEnd],e.render(),e._hasFocus&&e._onkeyup(t,e)}),n.push(e),e._inputsIndex=n.length-1,e.render()};r.prototype={canvas:function(t){return void 0!==t?(this._canvas=t,this._ctx=this._canvas.getContext("2d"),this.render()):this._canvas},x:function(t){return void 0!==t?(this._x=t,this._updateHiddenInput(),this.render()):this._x},y:function(t){return void 0!==t?(this._y=t,this._updateHiddenInput(),this.render()):this._y},extraX:function(t){return void 0!==t?(this._extraX=t,this._updateHiddenInput(),this.render()):this._extraX},extraY:function(t){return void 0!==t?(this._extraY=t,this._updateHiddenInput(),this.render()):this._extraY},fontSize:function(t){return void 0!==t?(this._fontSize=t,this.render()):this._fontSize},fontFamily:function(t){return void 0!==t?(this._fontFamily=t,this.render()):this._fontFamily},fontColor:function(t){return void 0!==t?(this._fontColor=t,this.render()):this._fontColor},placeHolderColor:function(t){return void 0!==t?(this._placeHolderColor=t,this.render()):this._placeHolderColor},fontWeight:function(t){return void 0!==t?(this._fontWeight=t,this.render()):this._fontWeight},fontStyle:function(t){return void 0!==t?(this._fontStyle=t,this.render()):this._fontStyle},fontShadowColor:function(t){return void 0!==t?(this._fontShadowColor=t,this.render()):this._fontShadowColor},fontShadowBlur:function(t){return void 0!==t?(this._fontShadowBlur=t,this.render()):this._fontShadowBlur},fontShadowOffsetX:function(t){return void 0!==t?(this._fontShadowOffsetX=t,this.render()):this._fontShadowOffsetX},fontShadowOffsetY:function(t){return void 0!==t?(this._fontShadowOffsetY=t,this.render()):this._fontShadowOffsetY},width:function(t){return void 0!==t?(this._width=t,this._calcWH(),this._updateCanvasWH(),this._updateHiddenInput(),this.render()):this._width},height:function(t){return void 0!==t?(this._height=t,this._calcWH(),this._updateCanvasWH(),this._updateHiddenInput(),this.render()):this._height},padding:function(t){return void 0!==t?(this._padding=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._padding},borderWidth:function(t){return void 0!==t?(this._borderWidth=t,this._calcWH(),this._updateCanvasWH(),this.render()):this._borderWidth},borderColor:function(t){return void 0!==t?(this._borderColor=t,this.render()):this._borderColor},borderRadius:function(t){return void 0!==t?(this._borderRadius=t,this.render()):this._borderRadius},backgroundColor:function(t){return void 0!==t?(this._backgroundColor=t,this.render()):this._backgroundColor},backgroundGradient:function(t){return void 0!==t?(this._backgroundColor=this._renderCtx.createLinearGradient(0,0,0,this.outerH),this._backgroundColor.addColorStop(0,t[0]),this._backgroundColor.addColorStop(1,t[1]),this.render()):this._backgroundColor},boxShadow:function(t,e){if(void 0===t)return this._boxShadow;var o=t.split("px ");return this._boxShadow={x:"none"===this._boxShadow?0:parseInt(o[0],10),y:"none"===this._boxShadow?0:parseInt(o[1],10),blur:"none"===this._boxShadow?0:parseInt(o[2],10),color:"none"===this._boxShadow?"":o[3]},this._boxShadow.x<0?(this.shadowL=Math.abs(this._boxShadow.x)+this._boxShadow.blur,this.shadowR=this._boxShadow.blur+this._boxShadow.x):(this.shadowL=Math.abs(this._boxShadow.blur-this._boxShadow.x),this.shadowR=this._boxShadow.blur+this._boxShadow.x),this._boxShadow.y<0?(this.shadowT=Math.abs(this._boxShadow.y)+this._boxShadow.blur,this.shadowB=this._boxShadow.blur+this._boxShadow.y):(this.shadowT=Math.abs(this._boxShadow.blur-this._boxShadow.y),this.shadowB=this._boxShadow.blur+this._boxShadow.y),this.shadowW=this.shadowL+this.shadowR,this.shadowH=this.shadowT+this.shadowB,this._calcWH(),e?void 0:(this._updateCanvasWH(),this.render())},innerShadow:function(t){return void 0!==t?(this._innerShadow=t,this.render()):this._innerShadow},selectionColor:function(t){return void 0!==t?(this._selectionColor=t,this.render()):this._selectionColor},placeHolder:function(t){return void 0!==t?(this._placeHolder=t,this.render()):this._placeHolder},value:function(t){return void 0!==t?(this._value=t+"",this._hiddenInput.value=t+"",this._cursorPos=this._clipText().length,this.render(),this):this._value===this._placeHolder?"":this._value},onsubmit:function(t){if(void 0!==t)return this._onsubmit=t,this;this._onsubmit()},onkeydown:function(t){if(void 0!==t)return this._onkeydown=t,this;this._onkeydown()},onkeyup:function(t){if(void 0!==t)return this._onkeyup=t,this;this._onkeyup()},focus:function(t){var e=this;if(!e._hasFocus){e._onfocus(e);for(var o=0;o<n.length;o++)n[o]._hasFocus&&n[o].blur()}e._selectionUpdated?delete e._selectionUpdated:e._selection=[0,0],e._hasFocus=!0,e._readonly?e._hiddenInput.readOnly=!0:(e._hiddenInput.readOnly=!1,e._cursorPos="number"==typeof t?t:e._clipText().length,e._placeHolder===e._value&&(e._value="",e._hiddenInput.value=""),e._cursor=!0,e._cursorInterval&&clearInterval(e._cursorInterval),e._cursorInterval=setInterval(function(){e._cursor=!e._cursor,e.render()},500));var r=e._selection[0]>0||e._selection[1]>0;return e._hiddenInput.focus(),e._hiddenInput.selectionStart=r?e._selection[0]:e._cursorPos,e._hiddenInput.selectionEnd=r?e._selection[1]:e._cursorPos,e.render()},blur:function(t){var e=t||this;return e._onblur(e),e._cursorInterval&&clearInterval(e._cursorInterval),e._hasFocus=!1,e._cursor=!1,e._selection=[0,0],e._hiddenInput.blur(),""===e._value&&(e._value=e._placeHolder),e.render()},keydown:function(t,e){var o=t.which;t.shiftKey;if(!e._readonly&&e._hasFocus){if(e._onkeydown(t,e),65===o&&(t.ctrlKey||t.metaKey))return e.selectText(),t.preventDefault(),e.render();if(17===o||t.metaKey||t.ctrlKey)return e;if(13===o)t.preventDefault(),e._onsubmit(t,e);else if(9===o&&(t.preventDefault(),n.length>1)){var r=n[e._inputsIndex+1]?e._inputsIndex+1:0;e.blur(),setTimeout(function(){n[r].focus()},10)}return e._value=e._hiddenInput.value,e._cursorPos=e._hiddenInput.selectionStart,e._selection=[0,0],e.render()}},click:function(t,e){var o=e._mousePos(t),n=o.x,r=o.y;return e._endSelection?(delete e._endSelection,void delete e._selectionUpdated):e._canvas&&e._overInput(n,r)||!e._canvas?e._mouseDown?(e._mouseDown=!1,e.click(t,e),e.focus(e._clickPos(n,r))):void 0:e.blur()},mousemove:function(t,e){var o=e._mousePos(t),n=o.x,r=o.y,i=e._overInput(n,r);if(i&&e._canvas?(e._canvas.style.cursor="text",e._wasOver=!0):e._wasOver&&e._canvas&&(e._canvas.style.cursor="default",e._wasOver=!1),e._hasFocus&&e._selectionStart>=0){var s=e._clickPos(n,r),a=Math.min(e._selectionStart,s),l=Math.max(e._selectionStart,s);if(!i)return e._selectionUpdated=!0,e._endSelection=!0,delete e._selectionStart,void e.render();e._selection[0]===a&&e._selection[1]===l||(e._selection=[a,l],e.render())}},mousedown:function(t,e){var o=e._mousePos(t),n=o.x,r=o.y,i=e._overInput(n,r);e._mouseDown=i,e._hasFocus&&i&&(e._selectionStart=e._clickPos(n,r))},mouseup:function(t,e){var o=e._mousePos(t),n=o.x,r=o.y,i=e._clickPos(n,r)!==e._selectionStart;e._hasFocus&&e._selectionStart>=0&&e._overInput(n,r)&&i?(e._selectionUpdated=!0,delete e._selectionStart,e.render()):delete e._selectionStart,e.click(t,e)},selectText:function(t){var e=this;t=t||[0,e._value.length];return setTimeout(function(){e._selection=[t[0],t[1]],e._hiddenInput.selectionStart=t[0],e._hiddenInput.selectionEnd=t[1],e.render()},1),e},renderCanvas:function(){return this._renderCanvas},render:function(){var t=this,e=t._renderCtx,o=t.outerW,n=t.outerH,r=t._borderRadius,i=t._borderWidth,s=t.shadowW,a=t.shadowH;e&&(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.shadowOffsetX=t._boxShadow.x,e.shadowOffsetY=t._boxShadow.y,e.shadowBlur=t._boxShadow.blur,e.shadowColor=t._boxShadow.color,t._borderWidth>0&&(e.fillStyle=t._borderColor,t._roundedRect(e,t.shadowL,t.shadowT,o-s,n-a,r),e.fill(),e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0),t._drawTextBox(function(){e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0;var l=t._clipText(),d=t._padding+t._borderWidth+t.shadowT;if(t._selection[1]>0){var c=t._textWidth(l.substring(0,t._selection[0])),h=t._textWidth(l.substring(t._selection[0],t._selection[1]));e.fillStyle=t._selectionColor,e.fillRect(d+c,d,h,t._height)}if(t._cursor){var u=t._textWidth(l.substring(0,t._cursorPos));e.fillStyle=t._fontColor,e.fillRect(d+u,d,1,t._height)}var f=t._padding+t._borderWidth+t.shadowL,_=Math.round(d+t._height/2);l=""===l&&t._placeHolder?t._placeHolder:l,e.fillStyle=""!==t._value&&t._value!==t._placeHolder?t._fontColor:t._placeHolderColor,e.font=t._fontStyle+" "+t._fontWeight+" "+t._fontSize+"px "+t._fontFamily,e.shadowColor=t._fontShadowColor,e.shadowBlur=t._fontShadowBlur,e.shadowOffsetX=t._fontShadowOffsetX,e.shadowOffsetY=t._fontShadowOffsetY,e.textAlign="left",e.textBaseline="middle",e.fillText(l,f,_);var p=t._innerShadow.split("px "),v="none"===t._innerShadow?0:parseInt(p[0],10),g="none"===t._innerShadow?0:parseInt(p[1],10),w="none"===t._innerShadow?0:parseInt(p[2],10),b="none"===t._innerShadow?"":p[3];if(w>0){var m=t._shadowCtx,y=m.canvas.width,S=m.canvas.height;m.clearRect(0,0,y,S),m.shadowBlur=w,m.shadowColor=b,m.shadowOffsetX=0,m.shadowOffsetY=g,m.fillRect(-1*o,-100,3*o,100),m.shadowOffsetX=v,m.shadowOffsetY=0,m.fillRect(y,-1*n,100,3*n),m.shadowOffsetX=0,m.shadowOffsetY=g,m.fillRect(-1*o,S,3*o,100),m.shadowOffsetX=v,m.shadowOffsetY=0,m.fillRect(-100,-1*n,100,3*n),t._roundedRect(e,i+t.shadowL,i+t.shadowT,o-2*i-s,n-2*i-a,r),e.clip(),e.drawImage(t._shadowCanvas,0,0,y,S,i+t.shadowL,i+t.shadowT,y,S)}return t._ctx&&(t._ctx.clearRect(t._x,t._y,e.canvas.width,e.canvas.height),t._ctx.drawImage(t._renderCanvas,t._x,t._y)),t}))},destroy:function(){var t=n.indexOf(this);-1!=t&&n.splice(t,1),this._hasFocus&&this.blur(),document.body.removeChild(this._hiddenInput),this._renderCanvas=null,this._shadowCanvas=null,this._renderCtx=null},_drawTextBox:function(t){var e=this,o=e._renderCtx,n=e.outerW,r=e.outerH,i=e._borderRadius,s=e._borderWidth,a=e.shadowW,l=e.shadowH;if(""===e._backgroundImage)o.fillStyle=e._backgroundColor,e._roundedRect(o,s+e.shadowL,s+e.shadowT,n-2*s-a,r-2*s-l,i),o.fill(),t();else{var d=new Image;d.src=e._backgroundImage,d.onload=function(){o.drawImage(d,0,0,d.width,d.height,s+e.shadowL,s+e.shadowT,n,r),t()}}},_clearSelection:function(){if(this._selection[1]>0){var t=this._selection[0],e=this._selection[1];return this._value=this._value.substr(0,t)+this._value.substr(e),this._cursorPos=t,this._cursorPos=this._cursorPos<0?0:this._cursorPos,this._selection=[0,0],!0}return!1},_clipText:function(t){t=void 0===t?this._value:t;var e=this._textWidth(t)/(this._width-this._padding);return(e>1?t.substr(-1*Math.floor(t.length/e)):t)+""},_textWidth:function(t){var e=this._renderCtx;return e.font=this._fontStyle+" "+this._fontWeight+" "+this._fontSize+"px "+this._fontFamily,e.textAlign="left",e.measureText(t).width},_calcWH:function(){this.outerW=this._width+2*this._padding+2*this._borderWidth+this.shadowW,this.outerH=this._height+2*this._padding+2*this._borderWidth+this.shadowH},_updateCanvasWH:function(){var t=this._renderCanvas.width,e=this._renderCanvas.height;this._renderCanvas.setAttribute("width",this.outerW),this._renderCanvas.setAttribute("height",this.outerH),this._shadowCanvas.setAttribute("width",this._width+2*this._padding),this._shadowCanvas.setAttribute("height",this._height+2*this._padding),this._ctx&&this._ctx.clearRect(this._x,this._y,t,e)},_updateHiddenInput:function(){this._hiddenInput.style.left=this._x+this._extraX+(this._canvas?this._canvas.offsetLeft:0)+"px",this._hiddenInput.style.top=this._y+this._extraY+(this._canvas?this._canvas.offsetTop:0)+"px",this._hiddenInput.style.width=this._width+2*this._padding+"px",this._hiddenInput.style.height=this._height+2*this._padding+"px"},_roundedRect:function(t,e,o,n,r,i){n<2*i&&(i=n/2),r<2*i&&(i=r/2),t.beginPath(),t.moveTo(e+i,o),t.lineTo(e+n-i,o),t.quadraticCurveTo(e+n,o,e+n,o+i),t.lineTo(e+n,o+r-i),t.quadraticCurveTo(e+n,o+r,e+n-i,o+r),t.lineTo(e+i,o+r),t.quadraticCurveTo(e,o+r,e,o+r-i),t.lineTo(e,o+i),t.quadraticCurveTo(e,o,e+i,o),t.closePath()},_overInput:function(t,e){var o=t>=this._x+this._extraX,n=t<=this._x+this._extraX+this._width+2*this._padding,r=e>=this._y+this._extraY,i=e<=this._y+this._extraY+this._height+2*this._padding;return o&&n&&r&&i},_clickPos:function(t,e){var o=this._value;this._value===this._placeHolder&&(o="");var n=this._clipText(o),r=0,i=n.length;if(t-(this._x+this._extraX)<this._textWidth(n))for(var s=0;s<n.length;s++)if((r+=this._textWidth(n[s]))>=t-(this._x+this._extraX)){i=s;break}return i},_mousePos:function(t){var e=t.target,o=t.pageX,n=t.pageY;t.touches&&t.touches.length?(e=t.touches[0].target,o=t.touches[0].pageX,n=t.touches[0].pageY):t.changedTouches&&t.changedTouches.length&&(e=t.changedTouches[0].target,o=t.changedTouches[0].pageX,n=t.changedTouches[0].pageY);var r=document.defaultView.getComputedStyle(e,undefined),i=parseInt(r.paddingLeft,10)||0,s=parseInt(r.paddingLeft,10)||0,a=parseInt(r.borderLeftWidth,10)||0,l=parseInt(r.borderLeftWidth,10)||0,d=document.body.parentNode.offsetTop||0,c=document.body.parentNode.offsetLeft||0,h=0,u=0;if("undefined"!=typeof e.offsetParent)do{h+=e.offsetLeft,u+=e.offsetTop}while(e=e.offsetParent);return{x:o-(h+=i+a+c),y:n-(u+=s+l+d)}}};var i=r;e["default"]=i},63:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n=i(o(3)),r=i(o(28));function i(t){return t&&t.__esModule?t:{"default":t}}var s={padding:0,width:300,lineHeight:100,family:'"Helvetica Neue",Helvetica,Arial,sans-serif'},a=function(t){t.content.img=t.text?(0,r["default"])(t.text,Object.assign({},s,{lineHeight:t.style.fontSize,textAlign:"left"},t.style)):undefined},l=function(t,e){var o;return t.name=t.name||"Text",o=new e.Sprite(t),a(o),Object.defineProperty(o,"text",{get:function(){return o.content.text},set:function(t){o.content.img=text}}),o.update=function(t){this.__proto__.update.call(this,t),a(this)},o};(0,n["default"])(l,"RichText");var d=l;e["default"]=d},64:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=void 0;var n,r=(n=o(3))&&n.__esModule?n:{"default":n};var i={left:0,top:0},s={left:0,top:0},a=function(t,e){t.onDragStep?t.onDragStep({left:s.left+e.canvasX-i.left,top:s.top+e.canvasY-i.top}):(t.style.left=s.left+e.canvasX-i.left,t.style.top=s.top+e.canvasY-i.top)},l=function(t,e){var o;return t.name=t.name||"Draggable",(o=new e.Sprite(t)).addEventListener("mousedown",function(t){i.left=t.canvasX,i.top=t.canvasY,s.left=o.getSelfStyle("left"),s.top=o.getSelfStyle("top");o.$canvas.addEventListener("interceptor",function e(t){"mousemove"===t.type?a(o,t):"mouseup"===t.type&&(o.$canvas.removeEventListener("interceptor",e),o.onDragEnd&&o.onDragEnd({left:s.left+t.canvasX-i.left,top:s.top+t.canvasY-i.top}))})}),o.addEventListener("touchstart",function(t){i.left=t.canvasX,i.top=t.canvasY,s.left=o.getSelfStyle("left"),s.top=o.getSelfStyle("top");o.$canvas.addEventListener("interceptor",function e(t){"touchmove"===t.type?a(o,t):"touchend"===t.type&&o.$canvas.removeEventListener("interceptor",e)})}),o};(0,r["default"])(l,"Draggable");var d=l;e["default"]=d}}));