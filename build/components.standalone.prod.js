!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o=e();for(var r in o)("object"==typeof exports?exports:t)[r]=o[r]}}(this,function(){return function(t){function e(r){if(o[r])return o[r].exports;var i=o[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){t.exports=o(95)},function(t,e){"use strict";var o={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},funcOrValue:function(t,e){return"function"==typeof t?t.call(e):t},execFuncs:function(t,e,r){t&&(o.isArray(r)||(r=[r])),"function"==typeof t?t.apply(e,r):o.isArray(t)&&t.length&&t.forEach(function(t){t&&t.apply(e,r)})},blend:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],pointInRect:function(t,e,o,r,i,n){return!(t<o||t>r||e<i||e>n)},firstValuable:function(t,e,o){return"undefined"==typeof t?"undefined"==typeof e?o:e:t}};t.exports=o},,function(t,e){"use strict";var o=["cutLeft","cutTop","cutWidth","cutHeight"],r=["left","top","width","height"],i=o.concat(r),n=i.concat(["locate","rx","ry","zIndex","textFont","textAlign","textVerticalAlign","color","rotate","scale","opacity","backgroundColor","border","overflow","overflowX","overflowY"]);t.exports={txywh:r,sxywh:o,xywh:i,styles:n,devFlag:"__EASYCANVAS_DEVTOOL__",version:"0.7.4"}},,function(t,e){"use strict";var o=3.141593;t.exports=function(t,e,r,i,n,l){var a=n?-n/180*o:0,s=t,c=e;return n&&(s=(t-r)*Math.cos(a)-(e-i)*Math.sin(a)+r,c=(t-r)*Math.sin(a)+(e-i)*Math.cos(a)+i),l?[s,c]:{x:s,y:c}}},,function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=o(1),l=r(n),a=o(3),s=r(a),c=o(29),h=r(c),u=o(28),f=r(u),d=o(18),p=r(d),v=o(19),g=r(v),y=o(31),$=r(y),m=o(24),b=r(m),w=o(26),x=r(w),S=o(27),k=r(S),O=o(25),M=r(O),T=o(32),_=r(T),Y=o(30),V=r(Y),X=function t(e){e.children&&e.children.forEach(function(o,r){o.$id||(e.children[r]=new P(o)),e.$id&&!e.$dom?(e.children[r].$canvas=e.$canvas,e.children[r].$parent=e):e.children[r].$canvas=e,t(e.children[r])})},H=function(t,e){var o=t||{};o.$id||(o.$id=Math.random().toString(36).substr(2)),o.$tickedTimes=o.$tickedTimes||0,o.content=o.content||{},o.style=o.style||{},o.style.scale=l.default.firstValuable(o.style.scale,1),o.style.opacity=l.default.firstValuable(o.style.opacity,1),o.style.zIndex=o.style.zIndex||0,o.style.locate=o.style.locate||"center";l.default.funcOrValue(o.content.img);e.$cache={},e.$render={},e.$style={},e.$needUpdate={},o.hooks=o.hooks||{},s.default.styles.concat(["visible"]).forEach(function(t){e.$cache[t]=void 0,e.$style[t]=o.style[t],"function"==typeof o.style[t]&&(e.$style[t]=o.style[t].bind(e)),s.default.xywh.indexOf(t)>-1?e.$style[t]=e.$style[t]||0:["opacity","scale"].indexOf(t)>-1&&(e.$style[t]=l.default.firstValuable(e.$style[t],1)),e.$needUpdate[t]=1,Object.defineProperty(o.style,t,{get:function(){return e.$style[t]},set:function(o){e.$style[t]!==o&&(e.$style[t]=o,e.$needUpdate[t]=1)}})}),o.events=o.events||{};o.events.eIndex=o.events.eIndex;return o.children=o.children||[],X(o),o.$styleCacheTime={},o},E=function(t){var e=this;this.$extendList.forEach(function(o){o.call(e,t)})},P=function(t){var e=H(t,this);for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(this[o]=e[o]);return E.call(this,e),this};P.prototype.$extendList=[],P.prototype.add=function(t){if(t)return this.children.push(t),X(this),this.children[this.children.length-1]},P.prototype.getRect=function(t,e){var o=this,r={};if(s.default.txywh.forEach(function(t){r[t]=o.getStyle(t,e)}),0===r.width&&this.content.img&&!t){var i=l.default.funcOrValue(this.content.img,this);r.width=i.width,r.height=i.height}var n=this.getStyle("locate");return"lt"===n||("ld"===n?r.top-=r.height:"rt"===n?r.left-=r.width:"rd"===n?(r.left-=r.width,r.top-=r.height):(r.left-=r.width>>1,r.top-=r.height>>1)),r.right=this.$canvas.width-r.left-r.width,r.bottom=this.$canvas.height-r.top-r.height,r},P.prototype.getSelfStyle=function(t){var e={};if(t)return l.default.funcOrValue(this.style[t],this);for(var o in this.style)e[o]=l.default.funcOrValue(this.style[o],this);return e},P.prototype.getStyle=function(t,e){var o=this;if(e&&void 0!==o.$cache[t])return o.$cache[t];var r=l.default.funcOrValue(o.$style[t],o);if(o.$parent){var i=o.$parent.getStyle(t);if("left"===t||"top"===t)return i=l.default.firstValuable(i,0),i+l.default.firstValuable(r,0);if("scale"===t||"opacity"===t)return i=l.default.firstValuable(i,1),i*l.default.firstValuable(r,1);if("visible"===t)return i!==!1&&r}return r},P.prototype.remove=function(t){return t?(this.$canvas.remove(t),void l.default.execFuncs(t.hooks.removed,t)):(this.$parent?this.$parent.remove(this):this.$canvas.remove(this),void l.default.execFuncs(this.hooks.removed,this))},P.prototype.update=function(t){if(t){for(var e in t)if("object"===i(t[e]))for(var o in t[e])this[e]||(this[e]={}),this[e][o]=t[e][o];else this[e]=t[e];this.recalculate(!0)}},P.prototype.getAllChildren=function(t){var e=this,o=t?[e]:[];return e.children.forEach(function(t){o=o.concat(t.getAllChildren(!0))}),o},P.prototype.getAllVisibleChildren=function(t){var e=this;if(l.default.funcOrValue(e.style.visible,e)===!1)return[];var o=t?[e]:[];return e.children.forEach(function(t){o=o.concat(t.getAllVisibleChildren(!0))}),o},P.prototype.getOuterRect=k.default,P.prototype.combine=M.default,P.prototype.uncombine=_.default,P.prototype.combineAsync=function(){return this.$combine?this:(this.$combine=9,this.off("ticked",this.combine),this.on("ticked",this.combine,100),this)},P.prototype.recalculate=V.default,P.prototype.refresh=function(){for(var t in $sprite.$style)$sprite.$cache[t]=P.get($sprite.$style[t],$sprite);return this},P.prototype.nextTick=g.default,P.prototype.on=h.default,P.prototype.off=f.default,P.prototype.clear=p.default,P.prototype.trigger=$.default,P.prototype.broadcast=b.default,P.prototype.distribute=x.default,t.exports=P},,,,function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=o(5),n=(r(i),o(16)),l=r(n);t.exports=function(t,e,o,r,i,n,a,s,c,h,u){if(!u){if(e>n+s)return!1;if(n>e+r)return!1;if(t>i+a)return!1;if(i>t+o)return!1}var f=(0,l.default)(t,e,i,n,a,s,c,h,u)||(0,l.default)(t+o,e,i,n,a,s,c,h,u)||(0,l.default)(t,e+r,i,n,a,s,c,h,u)||(0,l.default)(t+o,e+r,i,n,a,s,c,h,u);if(f)return!0;var d=(0,l.default)(i,n,t,e,o,r,c,h,-u)||(0,l.default)(i+a,n,t,e,o,r,c,h,-u)||(0,l.default)(i,n+s,t,e,o,r,c,h,-u)||(0,l.default)(i+a,n+s,t,e,o,r,c,h,-u);return!!d||(e>n&&e+r<n+s&&t<i&&t+o>i+a||t>i&&t+o<i+a&&e<n&&e+r>n+s)}},,,,,function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=o(5),n=(r(i),3.141593);t.exports=function(t,e,o,r,i,l,a,s,c){var h=c?-c/180*n:0;return h&&(t=(t-a)*Math.cos(h)-(e-s)*Math.sin(h)+a,e=(t-a)*Math.sin(h)+(e-s)*Math.cos(h)+s),t>=o&&t<=o+i&&e>=r&&e<=r+l}},,function(t,e){"use strict";t.exports=function(){this.children.forEach(function(t){t.remove()}),this.children=[]}},function(t,e){"use strict";t.exports=function(t){var e=function e(){t.apply(this,arguments),this.off("ticked",e)};this.on("ticked",e)}},function(t,e,o){"use strict";var r=o(1),i=Math.PI,n=function(t){return t.$lastPaintTime||Date.now()},l={linear:function(t,e,o){var r=n(this),i=!1,l=void 0,a=function(){var n=this.$lastPaintTime,s=(n-r)/o,c=(e-t)*s+t;if(i)if(e>t)for(;c>e;)c-=e-t;else for(;c<e;)c+=t-e;else e>t&&c>e?(a.$done=!0,c=e):e<t&&c<e&&(a.$done=!0,c=e);return s>=1&&l&&(l.call(this,c),l=null),c}.bind(this);return a.loop=function(){return i=!0,a},a.restart=function(){return r=n(this),a},a.then=function(t){return l=t,a},a},pendulum:function(t,e,o,r){var l=n(this),a=r||{};a.start=a.start||0;var s=!1,c=void 0,h=a.cycle||1,u=function(){var r=n(this),f=(r-l)/o;s?h&&(f%=h):h?f>h&&(f=h,u.$done=!0,f=h):f>1&&(u.$done=!0,f=1);var d=f*i*2-i/2+a.start/360*i,p=(e-t)*(Math.sin(d)+1)/2+t;return f>=h&&c&&(c.call(this,p),c=null),p}.bind(this);return u.loop=function(){return s=!0,u},u.restart=function(){return l=n(this),u},u.then=function(t){return c=t,u},u},ease:function(t,e,o){return this.pendulum(t,e,2*o,{cycle:.5})},oneByOne:function(t){var e=t,o=!1,r=function(){for(var t=0;t<e.length;t++){if(!e[t].$done)return e[t]();if(!e[t].$nextRestart&&(e[t].$nextRestart=!0,e[t+1]))return e[t+1].restart(),e[t+1]()}if(o){for(var r=0;r<e.length;r++)e[r].$done=!1,e[r].$nextRestart=!1,e[r].restart();return e[0]()}return e[e.length-1]()};return r.loop=function(){return o=!0,r},r}},a=function t(e,o,i,n,a){var s=(0,r.funcOrValue)(e[o]);s=s||0,e[o]=l[i].bind(t)(s,n,a)};for(var s in l)a[s]=l[s];t.exports=a},,,,function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=o(1),n=r(i);t.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();this.hooks[e]&&n.default.execFuncs(this.hooks[e],this,t),t.unshift(e);var o=this.children;o&&o.forEach(function(e){e.broadcast.apply(e,t)})}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},n=o(1),l=r(n),a=o(3),s=(r(a),9),c=1,h=2,u=3;t.exports=function(){var t=this,e=this;return e.$combine!==s?c:(setTimeout(function(){if(e.$combine!==s)return c;if(e.getStyle("visible")===!1)return u;var o=t.$canvas,r=e.getRect(!1,!0);if(r.tw>o.width)return h;if(r.th>o.height)return h;for(var n=e.getAllChildren(!0),a=0;a<n.length;a++){var f=n[a];if(f.content.img&&!f.$render._imgWidth)return u;if(1!==f.getStyle("scale"))return u}var d=void 0;if("hidden"!==l.default.funcOrValue(e.style.overflow,e)){if(d=e.getOuterRect(!1,!0),d.left=Math.floor(d.left),d.top=Math.floor(d.top),d.width=Math.round(d.width),d.height=Math.round(d.height),d.right=Math.round(d.right),d.bottom=Math.round(d.bottom),d.width>o.width)return h;if(d.height>o.height)return h}else d=r;e.off("ticked",t.combine);var p=o.$children.filter(function(t){for(var e=0;e<n.length;e++)if(n[e].$id===t.$id)return!0}),v=e.getStyle("opacity");p.forEach(function(t){t.settings&&(t.settings.$combineGlobalAlpha=t.settings.globalAlpha,t.settings.globalAlpha=v>0?t.settings.globalAlpha/v:1,t.props.$moved||(t.props.$moved=!0,t.props.left-=d.left,t.props.top-=d.top))});var g=o.$combinerCanvas;g||(g=o.$combinerCanvas=document.createElement("canvas"),g.width=o.width,g.height=o.height);var y=g.getContext("2d");y.clearRect(0,0,o.width,o.height),o.$render(y,p,!0),p.forEach(function(t){t.settings&&(t.settings.globalAlpha=t.settings.$combineGlobalAlpha)});var $=document.createElement("canvas");$.width=d.width,$.height=d.height;var m=$.getContext("2d");m.drawImage(g,0,0,d.width,d.height,0,0,d.width,d.height),e.$combine={content:e.content,children:e.children,style:i({},e.style)},e.children=[],e.content={img:$};var b=e.getSelfStyle("left")-(Math.floor(r.left)-d.left),w=e.getSelfStyle("top")-(Math.floor(r.top)-d.top);return i(e.style,{scale:1,left:b,top:w,width:$.width,height:$.height,backgroundColor:void 0}),c}),this)}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=o(1);r(i);t.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();t.unshift(e);var o=this.children;o&&o.forEach(function(e){e.broadcast.apply(e,t)})}},function(t,e){"use strict";t.exports=function(t,e){var o=this,r=o.getRect(t,e);return r.right=r.left+r.width,r.bottom=r.top+r.height,this.children.forEach(function(o){if(o.$cache.visible!==!1){var i=o.getOuterRect(t,e);i.left<r.left&&(r.left=i.left),i.top<r.top&&(r.top=i.top),i.right>r.right&&(r.right=i.right),i.bottom>r.bottom&&(r.bottom=i.bottom),r.width=r.right-r.left,r.height=r.bottom-r.top}}),r}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=o(1),n=r(i);t.exports=function(t,e){this.hooks[t]&&(this.hooks[t]!==e&&this.hooks[t].$handle!==e&&e?n.default.isArray(this.hooks[t])&&(this.hooks[t].indexOf(e)>=0?this.hooks[t][this.hooks[t].indexOf(e)]=void 0:this.hooks[t].indexOf(e.$handle)>=0&&(this.hooks[t][this.hooks[t].indexOf(e.$handle)]=void 0)):delete this.hooks[t])}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=o(1),n=r(i);t.exports=function(t,e,o){var r=e;if(o){var i=this;r=function(){var t=Date.now();if(t>r.$lastTriggerTime+o){r.$lastTriggerTime=t;var n=Array.prototype.slice.call(arguments);e.apply(i,n)}},r.$lastTriggerTime=-1,r.$handle=e}this.hooks[t]?n.default.isArray(this.hooks[t])?this.hooks[t].push(r):this.hooks[t]=[this.hooks[t],r]:this.hooks[t]=r}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=o(1),n=r(i),l=o(11),a=r(l),s=o(3),c=r(s),h=function t(e){if(e){var o=n.default.funcOrValue(e.$style.scale,e);return 1!==o?e:t(e.$parent)}};t.exports=function(t){var e=this;if(!t&&n.default.execFuncs(e.hooks.beforeTick,e,[e.$canvas.$rafTime]),n.default.funcOrValue(e.style.visible,e)===!1)return e.$cache.visible=!1,void(!t&&n.default.execFuncs(e.hooks.ticked,e,[e.$canvas.$rafTime]));e.$cache.visible=!0,t&&(e.$cache={},c.default.styles.forEach(function(t){e.$needUpdate[t]=1,e.$cache[t]=void 0}));var o=Object.keys(e.$needUpdate).length;if(e.$lastUpdate=e.$needUpdate,o){var r={},i=function(t){var o=e.$cache[t];if("function"==typeof e.$style[t]?(r[t]=1,e.$cache[t]=e.$style[t].call(e)):e.$cache[t]=e.$style[t],"left"===t||"top"===t){var i=e.$parent;i&&(e.$cache[t]+=i.$cache[t]||0)}else if("opacity"===t||"scale"===t){var l=e.$parent;l&&(e.$cache[t]*=n.default.firstValuable(l.$cache[t],1))}o===e.$cache[t]?delete e.$needUpdate[t]:"left"!==t&&"top"!==t&&"opacity"!==t&&"scale"!==t||o!==e.$cache[t]&&e.children.forEach(function(e){e.$needUpdate[t]=1})};for(var l in e.$needUpdate)i(l);o=Object.keys(e.$needUpdate).length,e.$needUpdate=r}!t&&n.default.execFuncs(e.hooks.ticked,e,[e.$canvas.$rafTime]);var s=n.default.funcOrValue(e.content.text,e),u=n.default.funcOrValue(e.content.img,e);if(o||e.$cache.text!==s||e.$cache.img!==u||e.content.img&&!e.$render._imgWidth){var f=e.$render;e.$cache.img=f.img=u=n.default.funcOrValue(e.content.img,e),e.$cache.text=f.text=s,"string"==typeof f.img&&(f.img=e.content.img=e.$canvas.imgLoader(f.img)),u&&u._complete===!1&&(u=!1),f.backgroundColor=e.$cache.backgroundColor,f.border=e.$cache.border,f.overflow=e.$cache.overflow,f.overflowX=e.$cache.overflowX,f.overflowY=e.$cache.overflowY,f.locate=e.$cache.locate,f.rotate=e.$cache.rotate,f.scale=e.$cache.scale,f.opacity=e.$cache.opacity,f.$moved=!1,f.childrenInside=(f.overflow||f.overflowX||f.overflowY)&&"visible"!==f.overflow,f.left=e.$cache.left,f.top=e.$cache.top,f.width=e.$cache.width,f.height=e.$cache.height,f._imgWidth=0,f._imgHeight=0,u&&u.width&&(f._imgWidth=u.width||0,f._imgHeight=u.height||0,f.cutLeft=e.$cache.cutLeft||0,f.cutTop=e.$cache.cutTop||0,f.cutWidth=e.$cache.cutWidth||f._imgWidth,f.cutHeight=e.$cache.cutHeight||f._imgHeight,f.cutLeft=Math.round(f.cutLeft),f.cutTop=Math.round(f.cutTop),f.cutWidth=Math.round(f.cutWidth),f.cutHeight=Math.round(f.cutHeight),f.width=f.width||f.cutWidth||0,f.height=f.height||f.cutHeight||0),"lt"===f.locate||("ld"===f.locate?f.top-=f.height:"rt"===f.locate?f.left-=f.width:"rd"===f.locate?(f.left-=f.width,f.top-=f.height):(f.left-=f.width>>1,f.top-=f.height>>1)),f.left=Math.round(f.left),f.top=Math.round(f.top),f.width=Math.round(f.width),f.height=Math.round(f.height);var d=f.settings={};if(d.globalAlpha=n.default.firstValuable(f.opacity,1),f.childrenInside&&(d.clip=!0),1!==e.$cache.scale){var p=f.scale,v=h(e);if(v){var g=v.$render.left+v.$render.width/2,y=v.$render.top+v.$render.height/2;f.left-=(g-f.left)*(p-1),f.top-=(y-f.top)*(p-1),f.width*=p,f.height*=p}}if((f.fh||f.fv)&&(f.fh=f.fh||0,f.fv=f.fv||0,f.fx=f.fx||0,f.fy=f.fy||0,d.transform={fh:f.fh,fv:f.fv,fx:-(f.top+(f.height>>1))*f.fv+f.fx,fy:-(f.left+(f.width>>1))*f.fh+f.fy}),f.blend&&(d.globalCompositeOperation="string"==typeof f.blend?f.blend:blend[f.blend]),f.backgroundColor&&(d.fillRect=f.backgroundColor),f.border&&(d.line=f.border),f.mirrX?(d.translate=[$canvas.width,0],d.scale=[-1,1],f.left=$canvas.width-f.left-f.width,f.mirrY&&(d.translate=[$canvas.width,$canvas.height],d.scale=[-1,-1],f.top=$canvas.height-f.top-f.height)):f.mirrY&&(d.translate=[0,$canvas.height],d.scale=[1,-1],f.top=$canvas.height-f.top-f.height),f.rotate){f.rx=n.default.firstValuable(n.default.funcOrValue(e.$cache.rx,e),f.left+.5*f.width),f.ry=n.default.firstValuable(n.default.funcOrValue(e.$cache.ry,e),f.top+.5*f.height);var $=n.default.firstValuable(f.rx,f.left+.5*f.width),m=n.default.firstValuable(f.ry,f.top+.5*f.height);d.beforeRotate=[$,m],d.rotate=-f.rotate*Math.PI/180,d.rotate=Number(d.rotate.toFixed(4)),d.afterRotate=[-$,-m]}f.$insight=(0,a.default)(f.left,f.top,f.width,f.height,0,0,e.$canvas.width,e.$canvas.height,d.beforeRotate&&d.beforeRotate[0],d.beforeRotate&&d.beforeRotate[1],f.rotate)}e.children.forEach(function(e){e.recalculate(t)})}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=o(1),n=r(i);t.exports=function(){var t=Array.prototype.slice.call(arguments),e=t.shift();if(this.hooks[e])return n.default.execFuncs(this.hooks[e],this,t)}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=o(3);r(i);t.exports=function(){var t=this;if(this.$combine){if(9===this.$combine)return void(this.$combine=!1);this.content=this.$combine.content,this.children=this.$combine.children,Object.keys(this.style).forEach(function(e){t.style[e]=void 0}),Object.keys(this.$combine.style).forEach(function(e){t.style[e]=t.$combine.style[e]}),this.$combine=!1,this.recalculate(!0)}}},,,,,,,,,,,,,,,,,,,function(t,e,o){"use strict";var r={},i="\n".slice(0,1),n=function(t,e){var o=String(t),n=o+JSON.stringify(e);if(e.fontSize=e.fontSize||16,r[n])return r[n];var l;e.padding?(l=e.padding.split(" "),l=l.map(function(t){return parseInt(t)}),l[1]=Number(l[1]||l[0]),l[2]=Number(l[2]||l[0]),l[3]=Number(l[3]||l[1])):l=[0,0,0,0];var a=e.minWidth||e.width||(e.fontSize||16)*o.length+l[1]+l[3]+100,s=o.split("\n").length,c=e.fontSize*(Math.round(o.length)/a+s-1)*(e.lineHeight||e.fontSize)+l[0]+l[2]+100,h=document.createElement("canvas");h.width=a,h.height=c;var u=h.getContext("2d");window.tempCanvas=h,window.tempCtx=u,u.textBaseline="middle",u.font=(e.fontStyle?e.fontStyle+" ":"")+e.fontSize+"px "+(e.family||"serif"),u.fillStyle=e.color||"#000",u.textAlign=e.textAlign||"left";for(var f=0,d=e.lineHeight?(e.lineHeight-e.fontSize)/2:0,p=0,v=1,g=0,y=0,$=1;;)if(y=u.measureText(o.slice(p,v)).width,y>e.width){if("ellipsis"===e.textOverflow){v-=2,u.fillText(o.slice(p,v)+"...",f,d+e.fontSize/2),d+=e.fontSize+(e.lineHeight?(e.lineHeight-e.fontSize)/2:0),$++,g=e.width-l[1]-l[3];break}v-=1,u.fillText(o.slice(p,v),f,d+e.fontSize/2),p=v,v=p+1,d+=e.fontSize+(e.lineHeight?(e.lineHeight-e.fontSize)/2:10),$++}else{if(v>o.length-1){y>g&&(g=y),u.fillText(o.slice(p,v),f,d+e.fontSize/2),d+=e.fontSize+(e.lineHeight?(e.lineHeight-e.fontSize)/2:0);break}o.slice(v,v+1)===i&&(u.fillText(o.slice(p,v),f,d+e.fontSize/2),v+=1,p=v,v=p+1,d+=e.fontSize+(e.lineHeight?(e.lineHeight-e.fontSize)/2:10),$++),y>g&&(g=y),v++}var m=document.createElement("canvas");m.lastLineLeft=y,m.lineCount=$,m.width=Math.max(g+l[1]+l[3],e.minWidth||0),m.height=d+l[0]+l[2];var b=m.getContext("2d");if(e.backgroundColor&&(b.fillStyle=e.backgroundColor,b.fillRect(0,0,m.width,m.height)),b.drawImage(h,(m.width-g)/2,l[0]),e.border){var w=e.border.split(" "),x=w.pop();"solid"===w[w.length-1]&&w.pop();var S=w[0],k=w[1]||S,O=w[2]||S,M=w[3]||k||S;S=parseInt(S),k=parseInt(k),O=parseInt(O),M=parseInt(M);var T=e.borderRadius||0;if(b.beginPath(),b.strokeStyle=x,S&&(b.lineWidth=S,b.moveTo(M?T:0,0),b.lineTo(m.width-(k?T:0),0)),k&&(b.lineWidth=k,b.moveTo(m.width,S?T:0),b.lineTo(m.width,m.height-(O?T:0))),O&&(b.lineWidth=O,b.moveTo(M?T:0,m.height),b.lineTo(m.width-(k?T:0),m.height)),M&&(b.lineWidth=M,b.moveTo(0,S?T:0),b.lineTo(0,m.height-(O?T:0))),b.stroke(),T){var _=document.createElement("canvas"),Y=Math.min(m.width,m.height);_.width=_.height=Y;var V=_.getContext("2d");V.beginPath(),V.strokeStyle=x,V.arc(Y>>1,Y>>1,(Y>>1)-1,0,2*Math.PI),V.stroke(),S&&k&&b.drawImage(_,Y>>1,0,Y>>1,Y>>1,m.width-T,0,T,T),O&&k&&b.drawImage(_,Y>>1,Y>>1,Y>>1,Y>>1,m.width-T,m.height-T,T,T),S&&M&&b.drawImage(_,0,0,Y>>1,Y>>1,0,0,T,T),O&&M&&b.drawImage(_,0,Y>>1,Y>>1,Y>>1,0,m.height-T,T,T)}}return r[n]=m,m};t.exports=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=o(96),n=r(i),l=o(97),a=r(l),s=o(98),c=r(s),h=o(99),u=r(h),f=o(100),d=r(f),p=o(101),v=r(p);t.exports={Button:n.default,Image:a.default,Scroll:c.default,Sequence:u.default,Text:d.default,View:v.default}},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},n=o(7),l=r(n),a=o(51),s=r(a),c={padding:0,width:300,family:'"Helvetica Neue",Helvetica,Arial,sans-serif'},h=function(t,e){t.buttonStyleNormal=i(c,{minWidth:e.style.width,lineHeight:e.style.height,padding:0},e.props.normal),t.buttonStyleHovered=i({},t.buttonStyleNormal,e.props.hovered),t.buttonStylePressed=i({},t.buttonStyleNormal,e.props.pressed),t.imageNormal=(0,s.default)(e.props.text||"",t.buttonStyleNormal),t.imageHovered=e.props.hovered&&(0,s.default)(e.props.text||"",t.buttonStyleHovered),t.imagePressed=e.props.pressed&&(0,s.default)(e.props.text||"",t.buttonStylePressed)},u=function(t){var e=void 0;t.props=t.props||{};var o={buttonStyleNormal:void 0,buttonStyleHovered:void 0,buttonStylePressed:void 0,imageNormal:void 0,imageHovered:void 0,imagePressed:void 0};h(o,t);var r={};return t.events=t.events||{},r.touchmove=r.mousemove=function(){e.content.img=o.imageHovered||o.imageNormal},r.touchstart=r.mousedown=function(){e.content.img=o.imagePressed||o.imageHovered||o.imageNormal},r.touchend=r.touchout=r.mouseout=function(){e.content.img=o.imageNormal},r.mouseup=function(){e.content.img=o.imageHovered||o.imageNormal},r.click=function(o){t.events.click&&t.events.click.call(e,o)},e=new l.default({name:t.name||"button_"+t.props.text,content:{img:o.imageNormal},style:t.style,props:t.props,events:r,hooks:t.hooks}),e.update=function(r){this.__proto__.update.call(this,r),h(o,t),e.content.img=o.imageNormal},e},f="undefined"!=typeof window;f&&window.Easycanvas&&(Easycanvas.class.Button=u),t.exports=u},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=o(7),n=r(i),l=function(t){var e=void 0,o=t||{};return o.name=o.name||"Image",e=new n.default(o),e.content.img=o.src,Object.defineProperty(e,"src",{get:function(){return e.content.img?e.content.img.src:""},set:function(t){e.content.img=t}}),e},a="undefined"!=typeof window;a&&window.Easycanvas&&(Easycanvas.class.Image=l),t.exports=l},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},n=o(7),l=r(n),a=o(1),s=o(20),c=r(s),h=void 0,u=function(t,e){return Math.abs(t)<Math.abs(e)?t:e},f={loose:function(t){t.$scroll.touching=!1},looper:function(t){if(t.$scroll&&t.$scroll.$scrolling){if(Math.abs(t.$scroll.speedX)>1?t.$scroll.speedX*=t.scroll.smooth||.8:t.$scroll.speedX=0,Math.abs(t.$scroll.speedY)>1?t.$scroll.speedY*=t.scroll.smooth||.8:t.$scroll.speedY=0,Math.abs(t.$scroll.speedX)<=1&&Math.abs(t.$scroll.speedY)<=1)return t.$scroll.$scrolling=!1,void(t.$scroll.$wheeling=!1);if(!t.$scroll.touching){if(t.scroll.scrollY-=t.$scroll.speedY,t.scroll.scrollX-=t.$scroll.speedX,!t.$scroll.touching&&!t.$scroll.$wheeling&&Math.abs(t.$scroll.speedY)<50&&t.scroll.anchors&&t.scroll.anchors.length)for(var e=t.scroll.anchorsRange||400,o=0;o<t.scroll.anchors.length;o++){var r=t.scroll.anchors[o],i=t.scroll.scrollY-r;if(i>0&&i<e&&t.$scroll.speedY>0||i<0&&i>-e&&t.$scroll.speedY<0){t.trigger("scrollTo",r,200),t.$scroll.speedY=0;break}}var n=(0,a.funcOrValue)(t.scroll.minScrollX,t),l=(0,a.funcOrValue)(t.scroll.maxScrollX,t),s=(0,a.funcOrValue)(t.scroll.minScrollY,t),c=(0,a.funcOrValue)(t.scroll.maxScrollY,t);!isNaN(s)&&t.scroll.scrollY<s?t.scroll.scrollY=s:!isNaN(c)&&t.scroll.scrollY>c&&(t.scroll.scrollY=c,t.broadcast("scrolledToBottom"),t.$scroll.speedY=0),!isNaN(n)&&t.scroll.scrollX<n?t.scroll.scrollX=n:!isNaN(l)&&t.scroll.scrollX>l&&(t.scroll.scrollX=l)}}},touch:function(t,e){var o=Date.now();if(t.$scroll.$wheeling=!1,t.$scroll.touching){t.$scroll.$scrolling=!0;var r=t.$scroll.startPos.x-e.canvasX,i=t.$scroll.startPos.y-e.canvasY,n=o-t.$scroll.touching;t.$scroll.touching=o;var l=(0,a.funcOrValue)(t.scroll.minScrollX,t),s=(0,a.funcOrValue)(t.scroll.maxScrollX,t),c=(0,a.funcOrValue)(t.scroll.minScrollY,t),h=(0,a.funcOrValue)(t.scroll.maxScrollY,t);if((t.scroll.scrollX+r<l||t.scroll.scrollX+r>s)&&(t.scroll.flexible||t.scroll.flexibleX?r>>=3:r=0),(t.scroll.scrollY+i<c||t.scroll.scrollY+i>h)&&(t.scroll.flexible||t.scroll.flexibleY?i>>=3:i=0),(0,a.funcOrValue)(t.scroll.scrollableX,t)&&Math.abs(r)>=1&&n>1){var f=(e.canvasX-t.$scroll.startPos.x)/n*25;t.$scroll.lastScrollSpeed*f>0&&Math.abs(f)>15&&(f+=u(f,t.$scroll.lastScrollSpeed)),t.$scroll.speedX=(t.$scroll.lastTouchSpeed+f)/(t.$scroll.lastTouchSpeed?2:1),t.$scroll.lastTouchSpeed=f,t.scroll.scrollX+=r}if((0,a.funcOrValue)(t.scroll.scrollableY,t)&&Math.abs(i)>=1&&n>1){var d=(e.canvasY-t.$scroll.startPos.y)/n*25;t.$scroll.lastScrollSpeed*d>0&&Math.abs(d)>15&&(d+=u(d,t.$scroll.lastScrollSpeed)),t.$scroll.speedY=(t.$scroll.lastTouchSpeed+d)/(t.$scroll.lastTouchSpeed?2:1),t.$scroll.lastTouchSpeed=d,t.scroll.scrollY+=i}if(t.$scroll.startPos.x=e.canvasX,t.$scroll.startPos.y=e.canvasY,Math.abs(r)>Math.abs(i)+1)return 1;if(Math.abs(r)<Math.abs(i)-1)return 2}else t.$scroll.touching=o,t.$scroll.quickTouch=o,t.$scroll.lastTouchSpeed=0,t.$scroll.startPos.x=e.canvasX,t.$scroll.startPos.y=e.canvasY,t.$scroll.lastScrollSpeed=t.$scroll.speedX||t.$scroll.speedY,t.$scroll.speedX=0,t.$scroll.speedY=0},wheel:function(t,e){t.$scroll.speedX=(0,a.funcOrValue)(t.scroll.scrollableX,t)?e.event.wheelDeltaX:0,t.$scroll.speedY=(0,a.funcOrValue)(t.scroll.scrollableY,t)?e.event.wheelDeltaY:0,t.$scroll.$scrolling=!0,t.$scroll.$wheeling=!0,e.stopPropagation()}},d=function(t){var e=!1,o=!1,r=t||{};r.scroll=i({scrollX:0,scrollY:0,scrollableX:function(){return"visible"!==(this.style.overflowX||this.style.overflow)},scrollableY:function(){return"visible"!==(this.style.overflowY||this.style.overflow)},minScrollX:0,maxScrollX:function(){var t=this,e=0;return this.getChildren().forEach(function(o){var r=o.getSelfStyle("left")+o.getSelfStyle("width")-t.getStyle("width");r>e&&(e=r)}),e},minScrollY:0,maxScrollY:function(){var t=this,e=0;return this.getChildren().forEach(function(o){var r=o.getSelfStyle("top")+o.getSelfStyle("height")-t.getStyle("height");r>e&&(e=r)}),e},propagationX:!1,propagationY:!1},t.scroll);var n=function t(){e&&(s.scroll.scrollX=e()),o&&(s.scroll.scrollY=o()),e||o||s.off("ticked",t)},a=!1;r.events=i({touchstart:function(t){f.loose(this),a=!0,h=!1,f.touch(this,t),s.scroll.propagationX||s.scroll.propagationY||t.stopPropagation()},touchmove:function(t){if(a&&(!h||this===h)){var e=f.touch(this,t);1===e&&s.scroll.propagationY?(t.stopPropagation(),h=this):2===e&&s.scroll.propagationX&&(t.stopPropagation(),h=this)}},mousewheel:function(t){a=!0,f.wheel(this,t),t.stopPropagation()},touchend:function(){a=!1,f.loose(this)},mouseup:function(){a=!1,f.loose(this)}},r.events||{}),r.scroll.capture&&(r.events.interceptor=function(t){return s.events[t.type]?(s.events[t.type].call(s,t),!1):t});var s=new l.default(r);s.on("ticked",function(){f.looper(s)}),s.on("scrollTo",function(t,r,i){var l=void 0;return e=c.default.ease(s.scroll.scrollY,t,i||200,{cycle:.5}).then(function(){e=!1,l&&l(),l=!1}),o=c.default.ease(s.scroll.scrollY,r,i||200,{cycle:.5}).then(function(){o=!1,l&&l(),l=!1}),s.on("ticked",n),{then:function(t){l=t}}}),s.$scroll={speedX:0,speedY:0,touching:!1,startPos:{},lastTouchSpeed:0,lastScrollSpeed:0};var u=s.add({name:"scrolling-element",style:{left:function(){return-this.$parent.scroll.scrollX},top:function(){return-this.$parent.scroll.scrollY}}});return s.add=u.add.bind(u),s.clear=u.clear.bind(u),s.getChildren=function(){return u.children},s},p="undefined"!=typeof window;p&&window.Easycanvas&&(Easycanvas.class.Scroll=d),t.exports=d},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=o(7),n=r(i),l=o(1),a=function(t){var e=new n.default(t);return t.props.index=t.props.index||0,e.on("beforeTick",function(){var t=this.props,e=(0,l.funcOrValue)(this.content.img,this);if(e&&e.width){var o=t.index||0;o<0&&(o=0);var r=void 0,i=void 0;if(t.frameWidth||t.frameHeight){r=t.frameWidth<0?e.width/-t.frameWidth:t.frameWidth,i=t.frameHeight<0?e.height/-t.frameHeight:t.frameHeight;var n=Math.floor(e.width/r),a=Math.floor(e.height/i);this.style.cutLeft=o%n*r,this.style.cutTop=Math.floor(o/n)%a*i}!t.loop&&o>0&&0===this.style.cutLeft&&0===this.style.cutTop&&(this.style.img=void 0,t.onOver?t.onOver.call(this):this.remove()),t.lastFrameTime=t.lastFrameTime||0,this.$canvas.$nextTickTime-t.lastFrameTime>=(0,l.funcOrValue)(t.interval,this)&&(t.lastFrameTime=this.$canvas.$nextTickTime,t.index++),this.style.cutWidth=this.style.cutWidth||r,this.style.cutHeight=this.style.cutHeight||i,this.style.width=this.style.width||r,this.style.height=this.style.height||i}}),e},s="undefined"!=typeof window;s&&window.Easycanvas&&(Easycanvas.class.Sequence=a),t.exports=a},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},n=o(7),l=r(n),a=o(51),s=r(a),c={padding:0,width:300,lineHeight:100,family:'"Helvetica Neue",Helvetica,Arial,sans-serif'},h=function(t){t.content.img=t.text?(0,s.default)(t.text,i({},c,{lineHeight:t.style.fontSize},t.style)):void 0},u=function(t){var e=void 0;return t.name=t.name||"Image",e=new l.default(t),h(e),Object.defineProperty(e,"text",{get:function(){return e.content.text},set:function(t){e.content.img=text}}),e.update=function(t){this.__proto__.update.call(this,t),h(this)},e},f="undefined"!=typeof window;f&&window.Easycanvas&&(Easycanvas.class.Text=u),t.exports=u},function(t,e,o){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=o(7),n=r(i),l=function(t){var e=void 0,o=t||{};return o.name=o.name||"View",e=new n.default(o)},a="undefined"!=typeof window;a&&window.Easycanvas&&(Easycanvas.class.View=l),t.exports=l}])});