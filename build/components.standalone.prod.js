!function(e,t){for(var n in t)e[n]=t[n]}(window,function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=17)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o="undefined"!=typeof window;t["default"]=function(e,t){o&&window.Easycanvas&&(Easycanvas[t]=function(t){return e(t,Easycanvas)})}},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o={},r="\n".slice(0,1),i=function(e,t){var n,i=String(e),s=i+JSON.stringify(t);if(t.fontSize=t.fontSize||16,o[s])return o[s];t.padding?((n=(n=t.padding.split(" ")).map(function(e){return parseInt(e)}))[1]=Number(n[1]||n[0]),n[2]=Number(n[2]||n[0]),n[3]=Number(n[3]||n[1])):n=[0,0,0,0];var l=t.minWidth||t.width||t.fontSize*i.length+n[1]+n[3]+100,a=i.split("\n").length,d=t.fontSize*(Math.round(i.length)/l+a-1)*(t.lineHeight||t.fontSize)+n[0]+n[2]+100,c=document.createElement("canvas");c.width=l,c.height=d;var h=c.getContext("2d");window.tempCanvas=c,window.tempCtx=h,h.textBaseline="middle",h.font=(t.fontStyle?t.fontStyle+" ":"")+t.fontSize+"px "+(t.fontFamily||"serif"),h.fillStyle=t.color||"#000",h.textAlign=t.textAlign||"left";for(var u=t.lineHeight?(t.lineHeight-t.fontSize)/2:0,f=0,_=1,v=0,p=0,g=1;;)if((p=h.measureText(i.slice(f,_)).width)>t.width){if("ellipsis"===t.textOverflow){_-=2,h.fillText(i.slice(f,_)+"...",0,u+t.fontSize/2),u+=t.fontSize+(t.lineHeight?(t.lineHeight-t.fontSize)/2:0),g++,v=t.width-n[1]-n[3];break}_-=1,h.fillText(i.slice(f,_),0,u+t.fontSize/2),_=(f=_)+1,u+=t.fontSize+(t.lineHeight?(t.lineHeight-t.fontSize)/2:10),g++," "===i[f]&&(f++,_++)}else{if(_>i.length-1){p>v&&(v=p),h.fillText(i.slice(f,_),0,u+t.fontSize/2),u+=t.fontSize+(t.lineHeight?(t.lineHeight-t.fontSize)/2:0);break}i.slice(_,_+1)===r&&(h.fillText(i.slice(f,_),0,u+t.fontSize/2),_=(f=_+=1)+1,u+=t.fontSize+(t.lineHeight?(t.lineHeight-t.fontSize)/2:10),g++),p>v&&(v=p),_++}var w=document.createElement("canvas");w.lastLineLeft=p,w.lineCount=g,w.width=Math.max(v+n[1]+n[3],t.minWidth||0),w.height=u+n[0]+n[2];var b=w.getContext("2d");if(t.backgroundColor&&(b.fillStyle=t.backgroundColor,b.fillRect(0,0,w.width,w.height)),b.drawImage(c,(w.width-v)/2,n[0]),t.border){var m=t.border.split(" "),y=m.pop();"solid"===m[m.length-1]&&m.pop();var S=m[0],x=m[1]||S,C=m[2]||S,I=m[3]||x||S;S=parseInt(S),x=parseInt(x),C=parseInt(C),I=parseInt(I);var $=t.borderRadius||0;if(b.beginPath(),b.strokeStyle=y,S&&(b.lineWidth=S,b.moveTo(I?$:0,0),b.lineTo(w.width-(x?$:0),0)),x&&(b.lineWidth=x,b.moveTo(w.width,S?$:0),b.lineTo(w.width,w.height-(C?$:0))),C&&(b.lineWidth=C,b.moveTo(I?$:0,w.height),b.lineTo(w.width-(x?$:0),w.height)),I&&(b.lineWidth=I,b.moveTo(0,S?$:0),b.lineTo(0,w.height-(C?$:0))),b.stroke(),$){var T=document.createElement("canvas"),O=Math.min(w.width,w.height);T.width=T.height=O;var P=T.getContext("2d");P.beginPath(),P.strokeStyle=y,P.arc(O>>1,O>>1,(O>>1)-1,0,2*Math.PI),P.stroke(),S&&x&&b.drawImage(T,O>>1,0,O>>1,O>>1,w.width-$,0,$,$),C&&x&&b.drawImage(T,O>>1,O>>1,O>>1,O>>1,w.width-$,w.height-$,$,$),S&&I&&b.drawImage(T,0,0,O>>1,O>>1,0,0,$,$),C&&I&&b.drawImage(T,0,O>>1,O>>1,O>>1,0,w.height-$,$,$)}}return o[s]=w,w};t["default"]=i},function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=function(e,t){var n,o=e||{};return o.name=o.name||"Image",(n=new t.Sprite(o)).content.img=o.src,Object.defineProperty(n,"src",{get:function(){return n.content.img?n.content.img.src:""},set:function(e){n.content.img=e}}),n};(0,((o=n(0))&&o.__esModule?o:{"default":o})["default"])(r,"Image");var i=r;t["default"]=i},,,,,,,,function(e,t,n){e.exports=n(18)},function(e,t,n){"use strict";o(n(19)),o(n(9)),o(n(20)),o(n(21)),o(n(22)),o(n(23)),o(n(24)),o(n(26)),o(n(27)),o(n(28));function o(e){return e&&e.__esModule?e:{"default":e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=i(n(8)),r=i(n(0));function i(e){return e&&e.__esModule?e:{"default":e}}var s={padding:0,width:300,family:'"Helvetica Neue",Helvetica,Arial,sans-serif'},l=function(e,t){e.buttonStyleNormal=Object.assign(s,{minWidth:t.style.width,lineHeight:t.style.height,padding:0},t.normal),e.buttonStyleHovered=Object.assign({},e.buttonStyleNormal,t.hovered),e.buttonStylePressed=Object.assign({},e.buttonStyleNormal,t.pressed),e.imageNormal=(0,o["default"])(t.text||"",e.buttonStyleNormal),e.imageHovered=t.hovered&&(0,o["default"])(t.text||"",e.buttonStyleHovered),e.imagePressed=t.pressed&&(0,o["default"])(t.text||"",e.buttonStylePressed)},a=function(e,t){var n,o={buttonStyleNormal:undefined,buttonStyleHovered:undefined,buttonStylePressed:undefined,imageNormal:undefined,imageHovered:undefined,imagePressed:undefined};l(o,e);var r={};return e.events=e.events||{},r.touchmove=r.mousemove=function(){n.content.img=o.imageHovered||o.imageNormal},r.touchstart=r.mousedown=function(){n.content.img=o.imagePressed||o.imageHovered||o.imageNormal},r.touchend=r.touchout=r.mouseout=function(){n.content.img=o.imageNormal},r.mouseup=function(){n.content.img=o.imageHovered||o.imageNormal},r.click=function(t){e.events.click&&e.events.click.call(n,t)},(n=new t.Sprite({name:e.name||"Button_"+e.text,content:{img:o.imageNormal},style:e.style,events:r,hooks:e.hooks})).update=function(e){this.__proto__.update.call(this,e),l(o,this),n.content.img=o.imageNormal},n};(0,r["default"])(a,"Button");var d=a;t["default"]=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o,r,i,s,l=(o=n(0))&&o.__esModule?o:{"default":o};var a=function(e,t){return Math.abs(e)<Math.abs(t)?e:t},d=function(e){e.$scroll.touching=!1},c=function(e){if(e.$scroll&&e.$scroll.$scrolling){if(Math.abs(e.$scroll.speedX)>1?e.$scroll.speedX*=e.scroll.smooth||.8:e.$scroll.speedX=0,Math.abs(e.$scroll.speedY)>1?e.$scroll.speedY*=e.scroll.smooth||.8:e.$scroll.speedY=0,Math.abs(e.$scroll.speedX)<=1&&Math.abs(e.$scroll.speedY)<=1)return e.$scroll.$scrolling=!1,void(e.$scroll.$wheeling=!1);if(!e.$scroll.touching){if(e.scroll.scrollY-=e.$scroll.speedY,e.scroll.scrollX-=e.$scroll.speedX,!e.$scroll.touching&&!e.$scroll.$wheeling&&Math.abs(e.$scroll.speedY)<50&&e.scroll.anchors&&e.scroll.anchors.length)for(var t=e.scroll.anchorsRange||400,n=0;n<e.scroll.anchors.length;n++){var o=e.scroll.anchors[n],i=e.scroll.scrollY-o;if(i>0&&i<t&&e.$scroll.speedY>0||i<0&&i>-t&&e.$scroll.speedY<0){e.scrollTo(0,o,200),e.$scroll.speedY=0;break}}var s=r(e.scroll.minScrollX,e),l=r(e.scroll.maxScrollX,e),a=r(e.scroll.minScrollY,e),d=r(e.scroll.maxScrollY,e);!isNaN(a)&&e.scroll.scrollY<a?e.scroll.scrollY=a:!isNaN(d)&&e.scroll.scrollY>d&&(e.scroll.scrollY=d,e.onReachBottom&&e.onReachBottom(),e.$scroll.speedY=0),!isNaN(s)&&e.scroll.scrollX<s?e.scroll.scrollX=s:!isNaN(l)&&e.scroll.scrollX>l&&(e.scroll.scrollX=l)}}},h=function(e,t){var n=Date.now();if(e.$scroll.$wheeling=!1,e.$scroll.touching){e.$scroll.$scrolling=!0;var o=e.$scroll.startPos.x-t.canvasX,i=e.$scroll.startPos.y-t.canvasY,s=n-e.$scroll.touching;e.$scroll.touching=n;var l=r(e.scroll.minScrollX,e),d=r(e.scroll.maxScrollX,e),c=r(e.scroll.minScrollY,e),h=r(e.scroll.maxScrollY,e);if((e.scroll.scrollX+o<l||e.scroll.scrollX+o>d)&&(e.scroll.flexible||e.scroll.flexibleX?o>>=3:o=0),(e.scroll.scrollY+i<c||e.scroll.scrollY+i>h)&&(e.scroll.flexible||e.scroll.flexibleY?i>>=3:i=0),r(e.scroll.scrollableX,e)&&Math.abs(o)>=1&&s>1){var u=(t.canvasX-e.$scroll.startPos.x)/s*25;e.$scroll.lastScrollSpeed*u>0&&Math.abs(u)>15&&(u+=a(u,e.$scroll.lastScrollSpeed)),e.$scroll.speedX=(e.$scroll.lastTouchSpeed+u)/(e.$scroll.lastTouchSpeed?2:1),e.$scroll.lastTouchSpeed=u,e.scroll.scrollX+=o}if(r(e.scroll.scrollableY,e)&&Math.abs(i)>=1&&s>1){var f=(t.canvasY-e.$scroll.startPos.y)/s*25;e.$scroll.lastScrollSpeed*f>0&&Math.abs(f)>15&&(f+=a(f,e.$scroll.lastScrollSpeed)),e.$scroll.speedY=(e.$scroll.lastTouchSpeed+f)/(e.$scroll.lastTouchSpeed?2:1),e.$scroll.lastTouchSpeed=f,e.scroll.scrollY+=i}if(e.$scroll.startPos.x=t.canvasX,e.$scroll.startPos.y=t.canvasY,Math.abs(o)>Math.abs(i)+1)return 1;if(Math.abs(o)<Math.abs(i)-1)return 2}else e.$scroll.touching=n,e.$scroll.quickTouch=n,e.$scroll.lastTouchSpeed=0,e.$scroll.startPos.x=t.canvasX,e.$scroll.startPos.y=t.canvasY,e.$scroll.lastScrollSpeed=e.$scroll.speedX||e.$scroll.speedY,e.$scroll.speedX=0,e.$scroll.speedY=0},u=function(e,t){e.$scroll.speedX=r(e.scroll.scrollableX,e)?t.event.wheelDeltaX:0,e.$scroll.speedY=r(e.scroll.scrollableY,e)?t.event.wheelDeltaY:0,e.$scroll.$scrolling=!0,e.$scroll.$wheeling=!0,t.stopPropagation()},f=function(e,t){r=t.utils.funcOrValue,i=t.Transition;var n=!1,o=!1,l=e||{};l.scroll=Object.assign({scrollX:0,scrollY:0,scrollableX:function(){var e=this.style.overflowX||this.style.overflow;return"visible"!==e&&"hidden"!==e},scrollableY:function(){var e=this.style.overflowY||this.style.overflow;return"visible"!==e&&"hidden"!==e},minScrollX:0,maxScrollX:function(){var e=this,t=0;return this.getChildren().forEach(function(n){var o=n.getSelfStyle("left")+n.getSelfStyle("width")-e.getStyle("width");o>t&&(t=o)}),t},minScrollY:0,maxScrollY:function(){var e=this,t=0;return this.getChildren().forEach(function(n){var o=n.getSelfStyle("top")+n.getSelfStyle("height")-e.getStyle("height");o>t&&(t=o)}),t},propagationX:!1,propagationY:!1},e.scroll);var a=function p(){n&&(_.scroll.scrollX=n()),o&&(_.scroll.scrollY=o()),n||o||_.off("ticked",p)},f=!1;l.events=Object.assign({touchstart:function(e){d(this),f=!0,s=!1,h(this,e),_.scroll.propagationX||_.scroll.propagationY||e.stopPropagation()},touchmove:function(e){if(f&&(!s||this===s)){var t=h(this,e);1===t&&_.scroll.propagationY?(e.stopPropagation(),s=this):2===t&&_.scroll.propagationX&&(e.stopPropagation(),s=this)}},mousewheel:function(e){f=!0,u(this,e),e.stopPropagation()},touchend:function(){f=!1,d(this)},mouseup:function(){f=!1,d(this)}},l.events||{}),l.scroll.capture&&(l.events.interceptor=function(e){return _.events[e.type]?(_.events[e.type].call(_,e),!1):e});var _=new t.Sprite(l);_.onReachBottom=l.onReachBottom,_.on("ticked",function(){c(_)}),_.scrollTo=function(e,t,r){var s;return n=i.ease(_.scroll.scrollY,e,r||200,{cycle:.5}).then(function(){n=!1,s&&s(),s=!1}),o=i.ease(_.scroll.scrollY,t,r||200,{cycle:.5}).then(function(){o=!1,s&&s(),s=!1}),_.on("ticked",a),{then:function(e){s=e}}},_.$scroll={speedX:0,speedY:0,touching:!1,startPos:{},lastTouchSpeed:0,lastScrollSpeed:0};var v=_.add({name:"scrolling-element",style:{left:function(){return-this.$parent.scroll.scrollX},top:function(){return-this.$parent.scroll.scrollY}}});return _.add=v.add.bind(v),_.clear=v.clear.bind(v),_.getChildren=function(){return v.children},_};(0,l["default"])(f,"Scroll");var _=f;t["default"]=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=i(n(0)),r=i(n(9));function i(e){return e&&e.__esModule?e:{"default":e}}var s=function(e,t){var n=t.utils.funcOrValue,o=new r["default"](e,t);return o.index=e.index||0,o.restart=function(){this.index=0},o.on("beforeTick",function(){var e=this.getImage();if(e&&e.width){var t,o,r,i=this.index||0;if(i<0&&(i=0),this.frameWidth){var s=n(this.frameWidth,this);t=s<0?e.width/-s:s,r=Math.floor(e.width/t),this.style.cutLeft=i%r*t}if(this.frameHeight){var l=n(this.frameHeight,this);o=l<0?e.height/-l:l;var a=Math.floor(e.height/o);this.style.cutTop=Math.floor(i/r)%a*o}if(!this.loop&&i>0&&0===this.style.cutLeft&&0===this.style.cutTop)return this.content.img=undefined,this.onOver&&this.onOver(),void this.remove();this.$lastFrameTime=this.$lastFrameTime||0;var d=n(this.interval,this);d.length&&(d=d[this.index%d.length]),this.$canvas.$nextTickTime-this.$lastFrameTime>=d&&(this.$lastFrameTime=this.$canvas.$nextTickTime,this.index++),this.style.cutWidth=this.style.cutWidth||t,this.style.cutHeight=this.style.cutHeight||o,this.style.width=this.style.width||t,this.style.height=this.style.height||o}}),o};(0,o["default"])(s,"Sequence");var l=s;t["default"]=l},function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=function(e,t){var n,o=e||{};o.name=o.name||"Text",o.content=o.content||{},o.content.text=o.text,o.children&&1===o.children.length&&(o.content.text=o.children[0],o.children=undefined),n=new t.Sprite(o);var r={get:function(){return n.content.text||""},set:function(e){n.content.text=e}};return Object.defineProperty(n,"text",r),n};(0,((o=n(0))&&o.__esModule?o:{"default":o})["default"])(r,"Text");var i=r;t["default"]=i},function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=function(e,t){var n=e||{};return n.name=n.name||"View",new t.Sprite(n)};(0,((o=n(0))&&o.__esModule?o:{"default":o})["default"])(r,"View");var i=r;t["default"]=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=i(n(0)),r=i(n(25));function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}r["default"].prototype._mousePos=function(e){return{x:e.x,y:e.y}};var a=function(e,t){var n,o=e||{};o.name=o.name||"Input";var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({canvas:document.createElement("canvas")},o,{},o.style,{fontColor:o.style.color});o.style.width=o.style.width-2*(o.style.borderWidth||0)-2*(o.style.padding||0),o.style.height=o.style.height-2*(o.style.borderWidth||0)-2*(o.style.padding||0);var a=new r["default"](i);return o.style.borderWidth=0,o.style.borderColor=undefined,o.style.width=o.style.height=undefined,(n=new t.Sprite(o)).$canvasInput=a,["onsubmit","onkeydown","onkeyup","onfocus","onblur"].forEach(function(e){a["_"+e]=function(t){n[e]&&n[e].call(n,t)}}),["focus","blur","selectText"].forEach(function(e){n[e]=a[e].bind(a)}),n.on("removed",function(){a.destroy.call(a)}),n.content.img=a._renderCanvas,n.addEventListener("interceptor",function(e){e.stopPropagation();var t={type:e.type,x:e.canvasX-n.getStyle("left"),y:e.canvasY-n.getStyle("top")};if(a[e.type]&&a[e.type](t,a),"click"===e.type){n.$canvas.addEventListener("interceptor",function e(t){"click"===t.type&&n.$canvas.removeEventListener("interceptor",e)})}}),Object.defineProperty(n,"value",{get:function(){return a.value()},set:function(e){a.value(void 0===e?"":e)}}),n};(0,o["default"])(a,"Input");var d=a;t["default"]=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;
/*!
 *  CanvasInput v1.2.7
 *  http://goldfirestudios.com/blog/108/CanvasInput-HTML5-Canvas-Text-Input
 *
 *  (c) 2013-2017, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
var o=[],r=function(e){var t=this;e=e||{},t._canvas=e.canvas||null,t._ctx=t._canvas?t._canvas.getContext("2d"):null,t._x=e.x||0,t._y=e.y||0,t._extraX=e.extraX||0,t._extraY=e.extraY||0,t._fontSize=e.fontSize||14,t._fontFamily=e.fontFamily||"Arial",t._fontColor=e.fontColor||"#000",t._placeHolderColor=e.placeHolderColor||"#bfbebd",t._fontWeight=e.fontWeight||"normal",t._fontStyle=e.fontStyle||"normal",t._fontShadowColor=e.fontShadowColor||"",t._fontShadowBlur=e.fontShadowBlur||0,t._fontShadowOffsetX=e.fontShadowOffsetX||0,t._fontShadowOffsetY=e.fontShadowOffsetY||0,t._readonly=e.readonly||!1,t._maxlength=e.maxlength||null,t._width=e.width||150,t._height=e.height||t._fontSize,t._padding=e.padding>=0?e.padding:5,t._borderWidth=e.borderWidth>=0?e.borderWidth:1,t._borderColor=e.borderColor||"#959595",t._borderRadius=e.borderRadius>=0?e.borderRadius:3,t._backgroundImage=e.backgroundImage||"",t._boxShadow=e.boxShadow||"1px 1px 0px rgba(255, 255, 255, 1)",t._innerShadow=e.innerShadow||"0px 0px 4px rgba(0, 0, 0, 0.4)",t._selectionColor=e.selectionColor||"rgba(179, 212, 253, 0.8)",t._placeHolder=e.placeHolder||"",t._value=(e.value||t._placeHolder)+"",t._onsubmit=e.onsubmit||function(){},t._onkeydown=e.onkeydown||function(){},t._onkeyup=e.onkeyup||function(){},t._onfocus=e.onfocus||function(){},t._onblur=e.onblur||function(){},t._cursor=!1,t._cursorPos=0,t._hasFocus=!1,t._selection=[0,0],t._wasOver=!1,t.boxShadow(t._boxShadow,!0),t._calcWH(),t._renderCanvas=document.createElement("canvas"),t._renderCanvas.setAttribute("width",t.outerW),t._renderCanvas.setAttribute("height",t.outerH),t._renderCtx=t._renderCanvas.getContext("2d"),t._shadowCanvas=document.createElement("canvas"),t._shadowCanvas.setAttribute("width",t._width+2*t._padding),t._shadowCanvas.setAttribute("height",t._height+2*t._padding),t._shadowCtx=t._shadowCanvas.getContext("2d"),"undefined"!=typeof e.backgroundGradient?(t._backgroundColor=t._renderCtx.createLinearGradient(0,0,0,t.outerH),t._backgroundColor.addColorStop(0,e.backgroundGradient[0]),t._backgroundColor.addColorStop(1,e.backgroundGradient[1])):t._backgroundColor=e.backgroundColor||"#fff",t._canvas&&(t._canvas.addEventListener("mousemove",function(e){e=e||window.event,t.mousemove(e,t)},!1),t._canvas.addEventListener("mousedown",function(e){e=e||window.event,t.mousedown(e,t)},!1),t._canvas.addEventListener("mouseup",function(e){e=e||window.event,t.mouseup(e,t)},!1));var n=function(e){e=e||window.event,t._hasFocus&&!t._mouseDown&&t.blur()};window.addEventListener("mouseup",n,!0),window.addEventListener("touchend",n,!0),t._hiddenInput=document.createElement("input"),t._hiddenInput.type="text",t._hiddenInput.style.position="absolute",t._hiddenInput.style.opacity=0,t._hiddenInput.style.pointerEvents="none",t._hiddenInput.style.zIndex=0,t._hiddenInput.style.transform="scale(0)",t._updateHiddenInput(),t._maxlength&&(t._hiddenInput.maxLength=t._maxlength),document.body.appendChild(t._hiddenInput),t._hiddenInput.value=t._value,t._hiddenInput.addEventListener("keydown",function(e){e=e||window.event,t._hasFocus&&(window.focus(),t._hiddenInput.focus(),t.keydown(e,t))}),t._hiddenInput.addEventListener("keyup",function(e){e=e||window.event,t._value=t._hiddenInput.value,t._cursorPos=t._hiddenInput.selectionStart,t._value.length>t._clipText().length&&t._hiddenInput.selectionStart>t._clipText().length&&(t._cursorPos=t._clipText().length-(t._value.length-t._hiddenInput.selectionStart)),t._selection=[t._hiddenInput.selectionStart,t._hiddenInput.selectionEnd],t.render(),t._hasFocus&&t._onkeyup(e,t)}),o.push(t),t._inputsIndex=o.length-1,t.render()};r.prototype={canvas:function(e){return void 0!==e?(this._canvas=e,this._ctx=this._canvas.getContext("2d"),this.render()):this._canvas},x:function(e){return void 0!==e?(this._x=e,this._updateHiddenInput(),this.render()):this._x},y:function(e){return void 0!==e?(this._y=e,this._updateHiddenInput(),this.render()):this._y},extraX:function(e){return void 0!==e?(this._extraX=e,this._updateHiddenInput(),this.render()):this._extraX},extraY:function(e){return void 0!==e?(this._extraY=e,this._updateHiddenInput(),this.render()):this._extraY},fontSize:function(e){return void 0!==e?(this._fontSize=e,this.render()):this._fontSize},fontFamily:function(e){return void 0!==e?(this._fontFamily=e,this.render()):this._fontFamily},fontColor:function(e){return void 0!==e?(this._fontColor=e,this.render()):this._fontColor},placeHolderColor:function(e){return void 0!==e?(this._placeHolderColor=e,this.render()):this._placeHolderColor},fontWeight:function(e){return void 0!==e?(this._fontWeight=e,this.render()):this._fontWeight},fontStyle:function(e){return void 0!==e?(this._fontStyle=e,this.render()):this._fontStyle},fontShadowColor:function(e){return void 0!==e?(this._fontShadowColor=e,this.render()):this._fontShadowColor},fontShadowBlur:function(e){return void 0!==e?(this._fontShadowBlur=e,this.render()):this._fontShadowBlur},fontShadowOffsetX:function(e){return void 0!==e?(this._fontShadowOffsetX=e,this.render()):this._fontShadowOffsetX},fontShadowOffsetY:function(e){return void 0!==e?(this._fontShadowOffsetY=e,this.render()):this._fontShadowOffsetY},width:function(e){return void 0!==e?(this._width=e,this._calcWH(),this._updateCanvasWH(),this._updateHiddenInput(),this.render()):this._width},height:function(e){return void 0!==e?(this._height=e,this._calcWH(),this._updateCanvasWH(),this._updateHiddenInput(),this.render()):this._height},padding:function(e){return void 0!==e?(this._padding=e,this._calcWH(),this._updateCanvasWH(),this.render()):this._padding},borderWidth:function(e){return void 0!==e?(this._borderWidth=e,this._calcWH(),this._updateCanvasWH(),this.render()):this._borderWidth},borderColor:function(e){return void 0!==e?(this._borderColor=e,this.render()):this._borderColor},borderRadius:function(e){return void 0!==e?(this._borderRadius=e,this.render()):this._borderRadius},backgroundColor:function(e){return void 0!==e?(this._backgroundColor=e,this.render()):this._backgroundColor},backgroundGradient:function(e){return void 0!==e?(this._backgroundColor=this._renderCtx.createLinearGradient(0,0,0,this.outerH),this._backgroundColor.addColorStop(0,e[0]),this._backgroundColor.addColorStop(1,e[1]),this.render()):this._backgroundColor},boxShadow:function(e,t){if(void 0===e)return this._boxShadow;var n=e.split("px ");return this._boxShadow={x:"none"===this._boxShadow?0:parseInt(n[0],10),y:"none"===this._boxShadow?0:parseInt(n[1],10),blur:"none"===this._boxShadow?0:parseInt(n[2],10),color:"none"===this._boxShadow?"":n[3]},this._boxShadow.x<0?(this.shadowL=Math.abs(this._boxShadow.x)+this._boxShadow.blur,this.shadowR=this._boxShadow.blur+this._boxShadow.x):(this.shadowL=Math.abs(this._boxShadow.blur-this._boxShadow.x),this.shadowR=this._boxShadow.blur+this._boxShadow.x),this._boxShadow.y<0?(this.shadowT=Math.abs(this._boxShadow.y)+this._boxShadow.blur,this.shadowB=this._boxShadow.blur+this._boxShadow.y):(this.shadowT=Math.abs(this._boxShadow.blur-this._boxShadow.y),this.shadowB=this._boxShadow.blur+this._boxShadow.y),this.shadowW=this.shadowL+this.shadowR,this.shadowH=this.shadowT+this.shadowB,this._calcWH(),t?void 0:(this._updateCanvasWH(),this.render())},innerShadow:function(e){return void 0!==e?(this._innerShadow=e,this.render()):this._innerShadow},selectionColor:function(e){return void 0!==e?(this._selectionColor=e,this.render()):this._selectionColor},placeHolder:function(e){return void 0!==e?(this._placeHolder=e,this.render()):this._placeHolder},value:function(e){return void 0!==e?(this._value=e+"",this._hiddenInput.value=e+"",this._cursorPos=this._clipText().length,this.render(),this):this._value===this._placeHolder?"":this._value},onsubmit:function(e){if(void 0!==e)return this._onsubmit=e,this;this._onsubmit()},onkeydown:function(e){if(void 0!==e)return this._onkeydown=e,this;this._onkeydown()},onkeyup:function(e){if(void 0!==e)return this._onkeyup=e,this;this._onkeyup()},focus:function(e){var t=this;if(!t._hasFocus){t._onfocus(t);for(var n=0;n<o.length;n++)o[n]._hasFocus&&o[n].blur()}t._selectionUpdated?delete t._selectionUpdated:t._selection=[0,0],t._hasFocus=!0,t._readonly?t._hiddenInput.readOnly=!0:(t._hiddenInput.readOnly=!1,t._cursorPos="number"==typeof e?e:t._clipText().length,t._placeHolder===t._value&&(t._value="",t._hiddenInput.value=""),t._cursor=!0,t._cursorInterval&&clearInterval(t._cursorInterval),t._cursorInterval=setInterval(function(){t._cursor=!t._cursor,t.render()},500));var r=t._cursorPos;t._value.length>t._clipText().length&&(t._cursorPos=t._value.length-(t._clipText().length-(e||0)));var i=t._selection[0]>0||t._selection[1]>0;return t._hiddenInput.focus(),t._hiddenInput.selectionStart=i?t._selection[0]:t._cursorPos,t._hiddenInput.selectionEnd=i?t._selection[1]:t._cursorPos,t._value.length>t._clipText().length&&(t._cursorPos=r,t._hiddenInput.selectionEnd!==t._hiddenInput.selectionStart&&(t._hiddenInput.selectionStart=t._value.length-(t._clipText().length-t._selection[0]),t._hiddenInput.selectionEnd=t._value.length-(t._clipText().length-t._selection[1]))),t.render()},blur:function(e){var t=e||this;return t._onblur(t),t._cursorInterval&&clearInterval(t._cursorInterval),t._hasFocus=!1,t._cursor=!1,t._selection=[0,0],t._hiddenInput.blur(),""===t._value&&(t._value=t._placeHolder),t.render()},keydown:function(e,t){var n=e.which;e.shiftKey;if(!t._readonly&&t._hasFocus){if(t._onkeydown(e,t),65===n&&(e.ctrlKey||e.metaKey))return t.selectText(),e.preventDefault(),t.render();if(17===n||e.metaKey||e.ctrlKey)return t;if(13===n)e.preventDefault(),t._onsubmit(e,t);else if(9===n&&(e.preventDefault(),o.length>1)){var r=o[t._inputsIndex+1]?t._inputsIndex+1:0;t.blur(),setTimeout(function(){o[r].focus()},10)}return t._value=t._hiddenInput.value,t._cursorPos=t._hiddenInput.selectionStart,t._selection=[0,0],t.render()}},click:function(e,t){var n=t._mousePos(e),o=n.x,r=n.y;return t._endSelection?(delete t._endSelection,void delete t._selectionUpdated):t._canvas&&t._overInput(o,r)||!t._canvas?t._mouseDown?(t._mouseDown=!1,t.click(e,t),t.focus(t._clickPos(o,r))):void 0:t.blur()},mousemove:function(e,t){var n=t._mousePos(e),o=n.x,r=n.y,i=t._overInput(o,r);if(i&&t._canvas?(t._canvas.style.cursor="text",t._wasOver=!0):t._wasOver&&t._canvas&&(t._canvas.style.cursor="default",t._wasOver=!1),t._hasFocus&&t._selectionStart>=0){var s=t._clickPos(o,r),l=Math.min(t._selectionStart,s),a=Math.max(t._selectionStart,s);if(!i)return t._selectionUpdated=!0,t._endSelection=!0,delete t._selectionStart,void t.render();t._selection[0]===l&&t._selection[1]===a||(t._selection=[l,a],console.log(t._selection),window.s=t,t.render())}},mousedown:function(e,t){var n=t._mousePos(e),o=n.x,r=n.y,i=t._overInput(o,r);t._mouseDown=i,t._hasFocus&&i&&(t._selectionStart=t._clickPos(o,r))},mouseup:function(e,t){var n=t._mousePos(e),o=n.x,r=n.y,i=t._clickPos(o,r)!==t._selectionStart;t._hasFocus&&t._selectionStart>=0&&t._overInput(o,r)&&i?(t._selectionUpdated=!0,delete t._selectionStart,t.render()):delete t._selectionStart,t.click(e,t)},selectText:function(e){var t=this;e=e||[0,t._value.length];return setTimeout(function(){t._selection=[e[0],e[1]],t._hiddenInput.selectionStart=e[0],t._hiddenInput.selectionEnd=e[1],t.render()},1),t},renderCanvas:function(){return this._renderCanvas},render:function(){var e=this,t=e._renderCtx,n=e.outerW,o=e.outerH,r=e._borderRadius,i=e._borderWidth,s=e.shadowW,l=e.shadowH;t&&(t.clearRect(0,0,t.canvas.width,t.canvas.height),t.shadowOffsetX=e._boxShadow.x,t.shadowOffsetY=e._boxShadow.y,t.shadowBlur=e._boxShadow.blur,t.shadowColor=e._boxShadow.color,e._borderWidth>0&&(t.fillStyle=e._borderColor,e._roundedRect(t,e.shadowL,e.shadowT,n-s,o-l,r),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),e._drawTextBox(function(){t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0;var a=e._clipText(),d=e._padding+e._borderWidth+e.shadowT;if(e._selection[1]>0){var c=e._textWidth(a.substring(0,e._selection[0])),h=e._textWidth(a.substring(e._selection[0],e._selection[1]));t.fillStyle=e._selectionColor,t.fillRect(d+c,d,h,e._height)}if(e._cursor){var u=e._textWidth(a.substring(0,e._cursorPos));t.fillStyle=e._fontColor,t.fillRect(d+u,d,1,e._height)}var f=e._padding+e._borderWidth+e.shadowL,_=Math.round(d+e._height/2);a=""===a&&e._placeHolder?e._placeHolder:a,t.fillStyle=""!==e._value&&e._value!==e._placeHolder?e._fontColor:e._placeHolderColor,t.font=e._fontStyle+" "+e._fontWeight+" "+e._fontSize+"px "+e._fontFamily,t.shadowColor=e._fontShadowColor,t.shadowBlur=e._fontShadowBlur,t.shadowOffsetX=e._fontShadowOffsetX,t.shadowOffsetY=e._fontShadowOffsetY,t.textAlign="left",t.textBaseline="middle",t.fillText(a,f,_);var v=e._innerShadow.split("px "),p="none"===e._innerShadow?0:parseInt(v[0],10),g="none"===e._innerShadow?0:parseInt(v[1],10),w="none"===e._innerShadow?0:parseInt(v[2],10),b="none"===e._innerShadow?"":v[3];if(w>0){var m=e._shadowCtx,y=m.canvas.width,S=m.canvas.height;m.clearRect(0,0,y,S),m.shadowBlur=w,m.shadowColor=b,m.shadowOffsetX=0,m.shadowOffsetY=g,m.fillRect(-1*n,-100,3*n,100),m.shadowOffsetX=p,m.shadowOffsetY=0,m.fillRect(y,-1*o,100,3*o),m.shadowOffsetX=0,m.shadowOffsetY=g,m.fillRect(-1*n,S,3*n,100),m.shadowOffsetX=p,m.shadowOffsetY=0,m.fillRect(-100,-1*o,100,3*o),e._roundedRect(t,i+e.shadowL,i+e.shadowT,n-2*i-s,o-2*i-l,r),t.clip(),t.drawImage(e._shadowCanvas,0,0,y,S,i+e.shadowL,i+e.shadowT,y,S)}return e._ctx&&(e._ctx.clearRect(e._x,e._y,t.canvas.width,t.canvas.height),e._ctx.drawImage(e._renderCanvas,e._x,e._y)),e}))},destroy:function(){var e=o.indexOf(this);-1!=e&&o.splice(e,1),this._hasFocus&&this.blur(),this._hiddenInput=null,this._renderCanvas=null,this._shadowCanvas=null,this._renderCtx=null},_drawTextBox:function(e){var t=this,n=t._renderCtx,o=t.outerW,r=t.outerH,i=t._borderRadius,s=t._borderWidth,l=t.shadowW,a=t.shadowH;if(""===t._backgroundImage)n.fillStyle=t._backgroundColor,t._roundedRect(n,s+t.shadowL,s+t.shadowT,o-2*s-l,r-2*s-a,i),n.fill(),e();else{var d=new Image;d.src=t._backgroundImage,d.onload=function(){n.drawImage(d,0,0,d.width,d.height,s+t.shadowL,s+t.shadowT,o,r),e()}}},_clearSelection:function(){if(this._selection[1]>0){var e=this._selection[0],t=this._selection[1];return this._value=this._value.substr(0,e)+this._value.substr(t),this._cursorPos=e,this._cursorPos=this._cursorPos<0?0:this._cursorPos,this._selection=[0,0],!0}return!1},_clipText:function(e){e=void 0===e?this._value:e;var t=this._textWidth(e)/(this._width-this._padding);return(t>1?e.substr(-1*Math.floor(e.length/t)):e)+""},_textWidth:function(e){var t=this._renderCtx;return t.font=this._fontStyle+" "+this._fontWeight+" "+this._fontSize+"px "+this._fontFamily,t.textAlign="left",t.measureText(e).width},_calcWH:function(){this.outerW=this._width+2*this._padding+2*this._borderWidth+this.shadowW,this.outerH=this._height+2*this._padding+2*this._borderWidth+this.shadowH},_updateCanvasWH:function(){var e=this._renderCanvas.width,t=this._renderCanvas.height;this._renderCanvas.setAttribute("width",this.outerW),this._renderCanvas.setAttribute("height",this.outerH),this._shadowCanvas.setAttribute("width",this._width+2*this._padding),this._shadowCanvas.setAttribute("height",this._height+2*this._padding),this._ctx&&this._ctx.clearRect(this._x,this._y,e,t)},_updateHiddenInput:function(){this._hiddenInput.style.left=this._x+this._extraX+(this._canvas?this._canvas.offsetLeft:0)+"px",this._hiddenInput.style.top=this._y+this._extraY+(this._canvas?this._canvas.offsetTop:0)+"px",this._hiddenInput.style.width=this._width+2*this._padding+"px",this._hiddenInput.style.height=this._height+2*this._padding+"px"},_roundedRect:function(e,t,n,o,r,i){o<2*i&&(i=o/2),r<2*i&&(i=r/2),e.beginPath(),e.moveTo(t+i,n),e.lineTo(t+o-i,n),e.quadraticCurveTo(t+o,n,t+o,n+i),e.lineTo(t+o,n+r-i),e.quadraticCurveTo(t+o,n+r,t+o-i,n+r),e.lineTo(t+i,n+r),e.quadraticCurveTo(t,n+r,t,n+r-i),e.lineTo(t,n+i),e.quadraticCurveTo(t,n,t+i,n),e.closePath()},_overInput:function(e,t){var n=e>=this._x+this._extraX,o=e<=this._x+this._extraX+this._width+2*this._padding,r=t>=this._y+this._extraY,i=t<=this._y+this._extraY+this._height+2*this._padding;return n&&o&&r&&i},_clickPos:function(e,t){var n=this._value;this._value===this._placeHolder&&(n="");var o=this._clipText(n),r=0,i=o.length;if(e-(this._x+this._extraX)<this._textWidth(o))for(var s=0;s<o.length;s++)if((r+=this._textWidth(o[s]))>=e-(this._x+this._extraX)){i=s;break}return i},_mousePos:function(e){var t=e.target,n=e.pageX,o=e.pageY;e.touches&&e.touches.length?(t=e.touches[0].target,n=e.touches[0].pageX,o=e.touches[0].pageY):e.changedTouches&&e.changedTouches.length&&(t=e.changedTouches[0].target,n=e.changedTouches[0].pageX,o=e.changedTouches[0].pageY);var r=document.defaultView.getComputedStyle(t,undefined),i=parseInt(r.paddingLeft,10)||0,s=parseInt(r.paddingLeft,10)||0,l=parseInt(r.borderLeftWidth,10)||0,a=parseInt(r.borderLeftWidth,10)||0,d=document.body.parentNode.offsetTop||0,c=document.body.parentNode.offsetLeft||0,h=0,u=0;if("undefined"!=typeof t.offsetParent)do{h+=t.offsetLeft,u+=t.offsetTop}while(t=t.offsetParent);return{x:n-(h+=i+l+c),y:o-(u+=s+a+d)}}};var i=r;t["default"]=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o=i(n(0)),r=i(n(8));function i(e){return e&&e.__esModule?e:{"default":e}}var s={padding:0,width:300,fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif'},l=function(e,t){e.content.img=e.text?(0,r["default"])(t,Object.assign({},s,{lineHeight:e.style.fontSize,textAlign:"left"},e.style)):undefined,e.style.width=e.content.img.width,e.style.height=e.content.img.height},a=function(e,t){var n,o;return e.name=e.name||"Text",n=new t.Sprite(e),l(n,n.opt.text||""),Object.defineProperty(n,"text",{get:function(){return o},set:function(e){o=e,l(n,e)}}),n.update=function(e){this.__proto__.update.call(this,e),l(this,o)},n};(0,o["default"])(a,"MultiLineText");var d=a;t["default"]=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var o,r=(o=n(0))&&o.__esModule?o:{"default":o};var i={left:0,top:0},s={left:0,top:0},l=function(e,t){e.draggable&&(e.onDragStep?e.onDragStep({left:t.canvasX-i.left,top:t.canvasY-i.top}):(e.style.left=s.left+t.canvasX-i.left,e.style.top=s.top+t.canvasY-i.top))},a=function(e,t){var n;return e.name=e.name||"Draggable",(n=new t.Sprite(e)).addEventListener("mousedown",function(e){if(n.draggable){n.onDragStart&&n.onDragStart(),i.left=e.canvasX,i.top=e.canvasY,s.left=n.getSelfStyle("left"),s.top=n.getSelfStyle("top");n.$canvas.addEventListener("interceptor",function t(e){"mousemove"===e.type?l(n,e):"mouseup"===e.type&&(n.$canvas.removeEventListener("interceptor",t),n.onDragEnd&&n.onDragEnd({left:s.left+e.canvasX-i.left,top:s.top+e.canvasY-i.top}))})}}),n.addEventListener("touchstart",function(e){if(n.draggable){n.onDragStart&&n.onDragStart(),i.left=e.canvasX,i.top=e.canvasY,s.left=n.getSelfStyle("left"),s.top=n.getSelfStyle("top");n.$canvas.addEventListener("interceptor",function t(e){"touchmove"===e.type?l(n,e):"touchend"===e.type&&(n.$canvas.removeEventListener("interceptor",t),n.onDragEnd&&n.onDragEnd({left:s.left+e.canvasX-i.left,top:s.top+e.canvasY-i.top}))})}}),n};(0,r["default"])(a,"Draggable");var d=a;t["default"]=d},function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=function(e,t){var n,o=e||{};o.name=o.name||"StaticView",o.style=o.style||{},n=new t.Sprite(o);var r=0;return n.on("ticked",function(){if(n.$canvas.$children)if(2===r&&n.$combine&&n.$combine.children)n.$combine.children.forEach(function(e){return e.recalculate()}),(n.children.length>1||n.$combine.children.find(function(e){return e.$selfChanged||e.getAllChildren().find(function(e){return!1!==e.$selfChanged})}))&&(n.uncombine(),r=0);else if(0===r&&!n.getAllChildren(!1).find(function(e){return!1!==e.$selfChanged}))return void(n.combine()&&(r=1,n.nextTick(function(){r++})))}),n};(0,((o=n(0))&&o.__esModule?o:{"default":o})["default"])(r,"StaticView");var i=r;t["default"]=i}]));