<body>
    <script src="../build/index.js"></script>
    <script src="../build/plugin.webgl.js"></script>
    <canvas id="app" width="800" height="1800" style="width: 800px; height: 1800px; opacity: 0.1;"></canvas>

    <script>
        var COUNT = 1000; // 5000  20-30fps

        var $app = new Easycanvas.Painter();
        $app.register(document.getElementById('app'), {
            name: 'main',
            webgl: !true
        });
        $app.start();
        // $app.fpsHandler = console.log;

        $app.imgLoader.cacheCanvas = true;
        var demoPicUrl = 'https://raw.githubusercontent.com/c-zhuo/easycanvas/master/demos/block.jpg';

        $app.imgLoader(demoPicUrl, function (img) {
            // create a Sprite
            for (var i = 0; i <= COUNT; i++)
                $app.add({
                    content: {
                        img: img,
                    },
                    style: {
                        left: Math.random() * 500,
                        // left: Easycanvas.Transition.pendulum(500 - Math.random() * 1000, 500 - Math.random() * 1000, Math.random() * 3000 + 2000).loop(),
                        top: (Math.random() * 500),
                        width: (Math.random() * 200),
                        height: (Math.random() * 200),
                        // rotate: Math.random() * 360,
                        zIndex: Math.random(),
                        // rotate: 40,
                    },
                });
        });

        // console.log(Date.now());
        // for (let i = 0;i< 10; i++){

        // $app.children[0].style.left = Math.random() * 200
        // $app.children[0].style.top = Math.random() * 200
        // $app.children[0].recalculate()
        // $app.$render()

        // }
        // console.log(Date.now()); // ~30+



        // another canvas instance
        // var $Temp = new Easycanvas.Painter();
        // $Temp.register(document.createElement('canvas'), {
        //     name: 'temp',
        //     fullScreen: true
        // });
        // $Temp.start();

        // Easycanvas.ImgLoader(demoPicUrl, function (img) {
        //     // create a Sprite
        //     for (var i = 0; i <= COUNT / 2; i++)
        //         $Temp.add({
        //             name: 'SpriteOfTemp',
        //             content: {
        //                 img: img,
        //             },
        //             style: {
        //                 left: Easycanvas.Transition.pendulum(Math.random() * 500, Math.random() * 500, 1000).loop(),
        //                 top: (Math.random() * 500),
        //                 width: (Math.random() * 200),
        //                 height: (Math.random() * 200),
        //                 zIndex: Math.random(),
        //                 locate: 'lt',
        //                 opacity: 0.1,
        //                 // rotate: 40,
        //             },
        //         });
        // });

        window.__EASYCANVAS_DEVTOOL__.isPaintRecording = false;
    </script>
</body>

